(function(t){function e(e){for(var r,o,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},s=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"4ebb":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var r=a("e332"),n=a.n(r);n.a},"8cf1":function(t,e,a){"use strict";var r=a("4ebb"),n=a.n(r);n.a},a88d:function(t,e,a){"use strict";var r=a("b132"),n=a.n(r);n.a},b132:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],o=a("d225"),i=a("b0b4"),l=a("308d"),c=a("6bb5"),u=a("4e2b"),d=a("9ab4"),p=a("60a3"),m=a("4bb5"),f=a("8c4f"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"home"},[a("notifications"),a("div",{staticClass:"main"},[a("a",{staticClass:"logo",attrs:{href:"/",title:"Панорама"}}),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.user.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{id:"login"},on:{click:t.login}},[t._v("\n                    Войти "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.isLoad,expression:"isLoad"}],staticClass:"fas fa-circle-notch fa-spin"})])])])],1),a("footer",{staticClass:"app-footer"},[a("div",{staticClass:"copyright"},[a("p",[t._v("Все права защищены © "),a("span",{domProps:{innerHTML:t._s(t.date.getFullYear())}})]),t._m(0),a("p",{staticClass:"pink"},[t._v("Интеграционная платформа муниципалитетов")])])])])},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("a",{attrs:{href:"https://cityskills.ru/",title:"Центр Муниципальных Компетенций"}},[t._v("Центр Муниципальных\n                Компетенций")])])}],b=a("bc3a"),y=a.n(b),g="http://api.city-panorama.ru/api/",_="http://api.city-panorama.ru/",O="86e3243edaa1fae5749bcf3e1cebb81bce915274",C=function(t){y.a.defaults.headers.common["Authorization"]=t.token},j=function(t){var e=JSON.parse(t).user.token;e&&(y.a.defaults.headers.common["Authorization"]=e)},S=function(){function t(){Object(o["a"])(this,t)}return Object(i["a"])(t,null,[{key:"notify",value:function(){r["default"].prototype.$notify({type:"error",title:"Ошибка",text:"При выполнении запроса произошла ошибка"})}},{key:"notifyWithCustomMessage",value:function(t){r["default"].prototype.$notify({type:"error",title:"Ошибка",text:t})}}]),t}(),k=S,w=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.date=new Date,t.user={email:"",password:""},t.isLoad=!1,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"login",value:function(){var t=this;this.isLoad=!0,y.a.post("".concat(g,"login"),this.user).then((function(e){t.userState.token="Bearer "+e.data.access_token,t.userState.role=e.data.role,C(t.userState),t.getUser(),t.isLoad=!1})).catch((function(e){e.response&&401===e.response.status?k.notifyWithCustomMessage("Аутентификация не удалась: неверное имя пользователя или пароль"):e.response&&e.response.data.msg?k.notifyWithCustomMessage(e.response.data.msg):e.message?k.notifyWithCustomMessage(e.message):k.notifyWithCustomMessage("Аутентификация не удалась: неизвестная ошибка"),t.user.password="",t.isLoad=!1}))}}]),e}(p["f"]);Object(d["a"])([Object(p["e"])()],w.prototype,"date",void 0),Object(d["a"])([Object(p["e"])()],w.prototype,"user",void 0),Object(d["a"])([Object(p["e"])()],w.prototype,"isLoad",void 0),Object(d["a"])([Object(m["b"])("user")],w.prototype,"userState",void 0),Object(d["a"])([m["a"]],w.prototype,"getUser",void 0),w=Object(d["a"])([Object(p["a"])({})],w);var x=w,E=x,T=a("2877"),P=Object(T["a"])(E,v,h,!1,null,null,null),F=P.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-desktop manager",class:{"left-menu-full":t.leftMenuState.full}},[a("notifications"),a("top-menu"),a("left-menu"),a("div",{staticClass:"container"},[a("router-view")],1)],1)},L=[],R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top-menu"},[a("div",{staticClass:"top-menu-left"},[null!==t.userState.user.contractor&&void 0!==t.userState.user.contractor?a("div",{staticClass:"contractor-logo top-menu-item"},[a("img",{attrs:{src:t.logoSrc}})]):t._e(),null!==t.userState.user.contractor&&void 0!==t.userState.user.contractor?a("div",{staticClass:"contractor-name top-menu-item"},[a("label",[t._v(t._s(t.userState.user.contractor.name))])]):t._e()]),a("div",{staticClass:"top-menu-right"},[a("div",{staticClass:"person-photo top-menu-item",style:"background-image: url("+t.photoSrc+")"}),null!==t.userState.user.person&&void 0!==t.userState.user.person?a("div",{staticClass:"person-name top-menu-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/manager/cabinet",tag:"label",title:"Профиль пользователя"}},[t._v("\n                "+t._s(t.userState.user.person.lastname)+" "+t._s(t.userState.user.person.firstname)+" "+t._s(t.userState.user.person?t.userState.user.person.middlename:"")+"\n            ")])],1):t._e(),null!==t.userState.user.person&&void 0!==t.userState.user.person?a("div",{staticClass:"person-post top-menu-item"},[a("label",[t._v(t._s(t.userState.user.post?"("+t.userState.user.post+")":""))])]):t._e(),a("div",{staticClass:"person-logout top-menu-item"},[a("button",{staticClass:"btn btn-link",attrs:{title:"Выйти из Системы"},on:{click:t.logout}},[a("i",{staticClass:"fa fa-sign-out"})])])])])},I=[],D=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"photoSrc",get:function(){return null===this.userState.user.person||void 0===this.userState.user.person?"/images/social.png":""===this.userState.user.person.photo||null===this.userState.user.person.photo?"/images/social.png":"".concat(_,"/storage/").concat(this.userState.user.person.photo)}},{key:"logoSrc",get:function(){return null===this.userState.user.contractor||void 0===this.userState.user.contractor?"/images/logo.png":""===this.userState.user.contractor.logo||null===this.userState.user.contractor.logo?"/images/logo.png":"".concat(_,"/storage/").concat(this.userState.user.contractor.logo)}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("user")],D.prototype,"userState",void 0),Object(d["a"])([m["a"]],D.prototype,"logout",void 0),D=Object(d["a"])([Object(p["a"])({})],D);var N=D,A=N,z=Object(T["a"])(A,R,I,!1,null,null,null),G=z.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left-menu",class:{full:t.leftMenuState.full}},[a("ul",{staticClass:"menu"},[a("li",[a("router-link",{attrs:{to:"/manager/desktop",tag:"a"}},[a("i",{staticClass:"fa fa-desktop"}),a("label",[t._v("Рабочий стол")])]),a("hr")],1),a("li",["superadmin"===t.userState.role?a("router-link",{attrs:{to:"/administrator/persons",tag:"a"}},[a("i",{staticClass:"fa fa-users"}),a("label",[t._v("Физические Лица")])]):t._e()],1),a("li",["superadmin"===t.userState.role?a("router-link",{attrs:{to:"/administrator/contractors",tag:"a"}},[a("i",{staticClass:"fa fa-briefcase"}),a("label",[t._v("Контрагенты")])]):t._e(),a("hr")],1),a("li",["superadmin"===t.userState.role?a("router-link",{attrs:{to:"/administrator/mo",tag:"a"}},[a("i",{staticClass:"fa fa-map-o"}),a("label",[t._v("МО")])]):t._e()],1),a("li",["superadmin"===t.userState.role?a("router-link",{attrs:{to:"/administrator/tos",tag:"a"}},[a("i",{staticClass:"fa fa-cubes"}),a("label",[t._v("ТОС")])]):t._e()],1),a("li",["superadmin"===t.userState.role?a("router-link",{attrs:{to:"/administrator/tszh",tag:"a"}},[a("i",{staticClass:"fa fa-building"}),a("label",[t._v("ТСЖ")])]):t._e(),a("hr")],1),a("li",[a("router-link",{attrs:{to:"/manager/gis",tag:"a"}},[a("i",{staticClass:"fa fa-map-marker"}),a("label",[t._v("Картография")])])],1),a("li",["superadmin"===t.userState.role?a("router-link",{attrs:{to:"/administrator/parse/kmz",tag:"a"}},[a("i",{staticClass:"fa fa-upload"}),a("label",[t._v("Парсинг KMZ")])]):t._e()],1),a("li",["superadmin"===t.userState.role?a("router-link",{attrs:{to:"/administrator/parse/xls",tag:"a"}},[a("i",{staticClass:"fa fa-upload"}),a("label",[t._v("Парсинг XLS")])]):t._e()],1),a("li",[a("a",{on:{click:function(e){return t.toggle()}}},[t.leftMenuState.full?a("i",{staticClass:"fa fa-angle-left"}):a("i",{staticClass:"fa fa-angle-right"}),a("label",[t._v("Свернуть меню")])])])])])},B=[],V=(a("6b54"),function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){this.getLeftMenuFull({full:null===localStorage.getItem("left-menu-full")||"true"===localStorage.getItem("left-menu-full")})}},{key:"toggle",value:function(){this.toggleLeftMenu(),localStorage.setItem("left-menu-full",this.leftMenuState.full.toString())}}]),e}(p["f"]));Object(d["a"])([Object(m["b"])("user")],V.prototype,"userState",void 0),Object(d["a"])([Object(m["b"])("leftMenu")],V.prototype,"leftMenuState",void 0),Object(d["a"])([m["a"]],V.prototype,"toggleLeftMenu",void 0),Object(d["a"])([m["a"]],V.prototype,"getLeftMenuFull",void 0),V=Object(d["a"])([Object(p["a"])({})],V);var q=V,W=q,H=Object(T["a"])(W,U,B,!1,null,null,null),J=H.exports,Y=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(m["b"])("leftMenu")],Y.prototype,"leftMenuState",void 0),Y=Object(d["a"])([Object(p["a"])({components:{LeftMenu:J,TopMenu:G}})],Y);var K=Y,Z=K,X=Object(T["a"])(Z,M,L,!1,null,null,null),Q=X.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content desktop"},[t._m(0),a("ul",{ref:"tablist",staticClass:"nav nav-tabs",attrs:{id:"tabs",role:"tablist"}},[t._m(1),t._m(2),t._m(3)]),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"events",role:"tabpanel","aria-labelledby":"events-tab"}},[a("div",{staticClass:"card-body"},[a("events")],1)]),t._m(4),t._m(5)])])},et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"content-header"},[a("h1",[t._v("\n            Рабочий стол\n        ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#events",role:"tab","aria-controls":"events","aria-selected":"true"}},[t._v("\n                События\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#notebook",role:"tab","aria-controls":"notebook","aria-selected":"false"}},[t._v("\n                Блокнот\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#documents",role:"tab","aria-controls":"documents","aria-selected":"false"}},[t._v("\n                Мои документы\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-pane fade",attrs:{id:"notebook",role:"tabpanel","aria-labelledby":"notebook-tab"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"alert alert-info"},[t._v("Инструмент находится в разработке")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-pane fade",attrs:{id:"documents",role:"tabpanel","aria-labelledby":"documents-tab"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"alert alert-info"},[t._v("Инструмент находится в разработке")])])])])])}],at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"desktop-container"},[t._m(0),a("hr"),a("div",{staticClass:"persons-items"},t._l(t.resolveVIPBirthdayPersons,(function(e){return a("div",{staticClass:"person-item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("p",[a("label",{staticClass:"date"},[t._v(t._s(t.resolvedDate(e.birthday)))])])]),a("div",{staticClass:"col-7"},[a("p",[a("img",{staticClass:"photo",attrs:{src:t.resolvePhotoSrc(e.photo)}}),t._v("\n                                    "+t._s(e.lastname)+" "+t._s(e.firstname)+" "+t._s(e.middlename)+"\n                                ")])]),a("div",{staticClass:"col-3"},[a("p",t._l(t.resolvedPhones(e.phones),(function(e){return a("a",{staticClass:"phone",attrs:{href:"tel:"+e.value}},[t._v("\n                                       "+t._s(e.value)+"\n                                   ")])})),0)])])])})),0)]),a("div",{staticClass:"desktop-container"},[a("h4",[t._v("Дни рождения")]),a("hr"),a("div",{staticClass:"persons-items"},t._l(t.resolveBirthdayPersons,(function(e){return a("div",{staticClass:"person-item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("p",[a("label",{staticClass:"date"},[t._v(t._s(t.resolvedDate(e.birthday)))])])]),a("div",{staticClass:"col-7"},[a("p",[a("img",{staticClass:"photo",attrs:{src:t.resolvePhotoSrc(e.photo)}}),t._v("\n                                    "+t._s(e.lastname)+" "+t._s(e.firstname)+" "+t._s(e.middlename)+"\n                                ")])]),a("div",{staticClass:"col-3"},[a("p",t._l(t.resolvedPhones(e.phones),(function(e){return a("a",{staticClass:"phone",attrs:{href:"tel:"+e.value}},[t._v("\n                                        "+t._s(e.value)+"\n                                    ")])})),0)])])])})),0)])]),t._m(1)])])},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",[t._v("Дни рождения  "),a("i",{staticClass:"fas fa-crown"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("div",{staticClass:"desktop-container"},[a("h4",[t._v("Мои события  "),a("i",{staticClass:"fa fa-calendar"})]),a("hr"),a("div",{staticClass:"alert alert-info"},[t._v("Инструмент находится в разработке")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")])])}],nt=(a("28a5"),a("96cf"),a("3b8d")),st=(a("411c"),a("107a"),function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.birthdayPersons=[],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getPersonBirthday();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getPersonBirthday",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"person/birthday"));case 3:e=t.sent,this.birthdayPersons=e.data,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"resolvePhotoSrc",value:function(t){return""===t||null===t?"/images/social.png":"".concat(_,"/storage/").concat(t)}},{key:"resolvedDate",value:function(t){var e=t.split(" ");return e=e[0].split("-"),"".concat(e[2],".").concat(e[1],".").concat(e[0])}},{key:"resolvedPhones",value:function(t){return null===t||""===t||'"[]"'===t?[]:JSON.parse(JSON.parse(t))}},{key:"resolveVIPBirthdayPersons",get:function(){return this.birthdayPersons.filter((function(t){return t.status&&"vip"===t.status}))}},{key:"resolveBirthdayPersons",get:function(){return this.birthdayPersons.filter((function(t){return"vip"!==t.status}))}}]),e}(p["f"]));Object(d["a"])([Object(p["e"])()],st.prototype,"birthdayPersons",void 0),st=Object(d["a"])([Object(p["a"])({components:{}})],st);var ot=st,it=ot,lt=Object(T["a"])(it,at,rt,!1,null,null,null),ct=lt.exports,ut=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);ut=Object(d["a"])([Object(p["a"])({components:{Events:ct}})],ut);var dt=ut,pt=dt,mt=Object(T["a"])(pt,tt,et,!1,null,null,null),ft=mt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Справочник контрагентов")]),a("button",{staticClass:"btn btn-success",on:{click:t.createContractor}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v("\n        Добавить\n    ")]),a("button",{staticClass:"btn btn-info",on:{click:t.excelExport}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n        Выгрузить в Excel\n    ")]),a("div",{staticClass:"table-dynamic-filter"},[a("label",{staticClass:"title"},[t._v("Расширенный поиск:\n            "),t.filterShow?a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.toggleFilterShow()}}},[t._v("[свернуть]")]):a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.toggleFilterShow()}}},[t._v("[развернуть]")])]),a("label",{staticClass:"title info"},[t._v("\n            Всего записей: "),a("b",[t._v(t._s(t.contractors.length))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterShow,expression:"filterShow"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Наименование"},domProps:{value:t.filter.name},on:{input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.inn,expression:"filter.inn"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ИНН"},domProps:{value:t.filter.inn},on:{input:function(e){e.target.composing||t.$set(t.filter,"inn",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.kpp,expression:"filter.kpp"}],staticClass:"form-control",attrs:{type:"text",placeholder:"КПП"},domProps:{value:t.filter.kpp},on:{input:function(e){e.target.composing||t.$set(t.filter,"kpp",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.region,expression:"filter.region"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Регион"},domProps:{value:t.filter.region},on:{input:function(e){e.target.composing||t.$set(t.filter,"region",e.target.value)}}})])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.area,expression:"filter.area"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Район"},domProps:{value:t.filter.area},on:{input:function(e){e.target.composing||t.$set(t.filter,"area",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.city,expression:"filter.city"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Город, село"},domProps:{value:t.filter.city},on:{input:function(e){e.target.composing||t.$set(t.filter,"city",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.street,expression:"filter.street"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Улица"},domProps:{value:t.filter.street},on:{input:function(e){e.target.composing||t.$set(t.filter,"street",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.build,expression:"filter.build"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Дом"},domProps:{value:t.filter.build},on:{input:function(e){e.target.composing||t.$set(t.filter,"build",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 actions"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.cleanFilter()}}},[t._v("\n                        Сбросить фильтр\n                    ")])])])])]),a("div",{staticClass:"table-scroll contarcotrs",class:{full:!t.filterShow}},[a("vue-table-dynamic",{ref:"contractorsTable",attrs:{params:t.params},on:{"cell-click":t.onClickCell,"cell-dblclick":t.onDblclickCell},scopedSlots:t._u([{key:"column-8",fn:function(e){var r=e.props;return[a("button",{staticClass:"btn btn-default",on:{click:function(e){return t.editContractor(r.cellData)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("button",{staticClass:"btn btn-default",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent(r.cellData)}}},[a("i",{staticClass:"fa fa-trash"})]),a("button",{staticClass:"btn btn-default",on:{click:function(e){return t.getContractorUsers(r.cellData)}}},[a("i",{staticClass:"fa fa-users"})])]}}])})],1),a("sure-modal")],1)},ht=[],bt=(a("8e6e"),a("456d"),a("7f7f"),a("ac6a"),a("bd86")),yt=function(t,e,a){a=a||"id";var r=t.filter((function(t){return t[a]===e}));return 0!==r.length&&r[0]},gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"sureModal",tabindex:"-1",role:"dialog","aria-labelledby":"sureModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"sureModalLabel"}},[t._v(t._s(t.sureModalState.modal.title))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("p",[t._v(t._s(t.sureModalState.modal.text))])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button","test-tag":"button-ok","data-dismiss":"modal"},on:{click:function(e){return t.ok()}}},[t._v(t._s(t.sureModalState.modal.buttonOk))]),a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.cansel()}}},[t._v(t._s(t.sureModalState.modal.buttonCansel))])])])])])},_t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ot=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"ok",value:function(){!1!==this.sureModalState.modal.action&&this.sureModalState.modal.action()}},{key:"cansel",value:function(){!1!==this.sureModalState.modal.actionCansel&&this.sureModalState.modal.actionCansel()}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("sureModal")],Ot.prototype,"sureModalState",void 0),Ot=Object(d["a"])([Object(p["a"])({})],Ot);var Ct=Ot,jt=Ct,St=Object(T["a"])(jt,gt,_t,!1,null,null,null),kt=St.exports;function wt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function xt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(a),!0).forEach((function(e){Object(bt["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Et=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.params={data:[],header:"row",sort:[0,1,2,3,4,5,6,7],columnWidth:[{column:0,width:300},{column:8,width:96}],selectedRow:0},t.tableIdIndex=8,t.selectedRow=0,t.contractors=[],t.filter={name:"",inn:"",kpp:"",region:"",area:"",city:"",street:"",build:""},t.filterShow=!0,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onFilterChange",value:function(){this.contractorFilter(),localStorage.setItem("contractors.filter",JSON.stringify(this.filter))}},{key:"onContractors",value:function(){this.initTable()}},{key:"onSelectedRow",value:function(){var t=xt({},this.params);t.selectedRow=this.selectedRow,this.params=xt({},t)}},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.contractorState.contractors.length){t.next=3;break}return t.next=3,this.administratorContractorGetAll();case 3:this.filterState(),this.contractorFilter(),this.initTable();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initTable",value:function(){var t=this;this.params.data=[["Наименование","ИНН","КПП","Регион","Район","Город/село","Улица","Дом",""]],this.contractors.forEach((function(e,a){t.params.data.push([e.name,e.inn,e.kpp,t.resolvedRegion(e.address),t.resolvedArea(e.address),t.resolvedCity(e.address),t.resolvedStreet(e.address),t.resolvedBuild(e.address),e.id.toString()])}))}},{key:"contractorFilter",value:function(){var t=this;this.contractors=this.contractorState.contractors.filter((function(e){return(""===t.filter.name||e.name.toLowerCase().indexOf(t.filter.name.toLowerCase())+1||e.full_name.toLowerCase().indexOf(t.filter.name.toLowerCase())+1)&&(""===t.filter.inn||e.inn.toLowerCase().indexOf(t.filter.inn.toLowerCase())+1)&&(""===t.filter.kpp||e.kpp.toLowerCase().indexOf(t.filter.kpp.toLowerCase())+1)&&(""===t.filter.region||t.resolvedRegion(e.address).toLowerCase().indexOf(t.filter.region.toLowerCase())+1)&&(""===t.filter.area||t.resolvedArea(e.address).toLowerCase().indexOf(t.filter.area.toLowerCase())+1)&&(""===t.filter.city||t.resolvedCity(e.address).toLowerCase().indexOf(t.filter.city.toLowerCase())+1)&&(""===t.filter.street||t.resolvedStreet(e.address).toLowerCase().indexOf(t.filter.street.toLowerCase())+1)&&(""===t.filter.build||t.resolvedBuild(e.address).toLowerCase().indexOf(t.filter.build.toLowerCase())+1)}))}},{key:"cleanFilter",value:function(){this.filter={name:"",inn:"",kpp:"",region:"",area:"",city:"",street:"",build:""}}},{key:"toggleFilterShow",value:function(){this.filterShow=!this.filterShow,localStorage.setItem("contractors.filterShow",this.filterShow.toString())}},{key:"filterState",value:function(){localStorage.getItem("contractors.filterShow")&&(this.filterShow="true"===localStorage.getItem("contractors.filterShow")),localStorage.getItem("contractors.filter")&&(this.filter=Object.assign(this.filter,JSON.parse(localStorage.getItem("contractors.filter"))))}},{key:"createContractor",value:function(){this.administratorContractorUnsetSingle(),this.$router.push("/administrator/contractor/0")}},{key:"editContractor",value:function(t){this.$router.push("/administrator/contractor/".concat(t))}},{key:"contractorSetSingle",value:function(t){var e=yt(this.contractorState.contractors,parseInt(t,10));this.administratorContractorSetSingle(e)}},{key:"setSureModalContent",value:function(t){var e=this,a=yt(this.contractorState.contractors,parseInt(t,10));this.setSureModal({title:"Удалить контрагента?",text:'Вы уверены, что хотите удалить контрагента "'.concat(a.name,'" из системы?'),action:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.administratorContractorSetSingle(a),t.next=3,e.administratorContractorDelete();case 3:e.administratorContractorUnsetSingle();case 4:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()})}},{key:"excelExport",value:function(){var t=this,e=this.$refs.contractorsTable;if(e){var a=e.tableData;if(a&&a.activatedRows){var r=a.activatedRows.map((function(e,a){if(0===a)return["№ п/п","Наименование","Полное наименование","ИНН","КПП","Регион","Район","Город/село","Улица","Дом","Офис"];var r=yt(t.contractorState.contractors,parseInt(e.cells[t.tableIdIndex].data,10));return[a,r.name,r.full_name,r.inn,r.kpp,t.resolvedRegion(r.address),t.resolvedArea(r.address),t.resolvedCity(r.address),t.resolvedStreet(r.address),t.resolvedBuild(r.address),t.resolvedFlat(r.address)]}));y.a.post("".concat(g,"export/excel"),{data:r}).then((function(t){window.open("".concat(_).concat(t.data))}))}}}},{key:"onDblclickCell",value:function(t,e,a){if(e!==this.tableIdIndex){var r=this.$refs.contractorsTable;if(r){var n=r.tableData.rows[t].cells[this.tableIdIndex].data;this.editContractor(n)}}}},{key:"onClickCell",value:function(t,e,a){this.selectedRow===t&&this.onDblclickCell(t,e,a),this.selectedRow=t}},{key:"getContractorUsers",value:function(t){this.contractorSetSingle(t),this.$router.push("/administrator/contractors/users/".concat(t))}},{key:"resolvedRegion",value:function(t){return null!==t&&null!==t.region?"".concat(t.region," ").concat(t.region_type):""}},{key:"resolvedArea",value:function(t){return null!==t&&null!==t.area?"".concat(t.area," ").concat(t.area_type):""}},{key:"resolvedCity",value:function(t){return null!==t&&null!==t.city?"".concat(t.city," ").concat(t.city_type):null!==t&&null!==t.settlement?"".concat(t.settlement," ").concat(t.settlement_type):""}},{key:"resolvedStreet",value:function(t){return null!==t&&null!==t.street?"".concat(t.street," ").concat(t.street_type):""}},{key:"resolvedBuild",value:function(t){return null!==t&&null!==t.house?"".concat(t.house):""}},{key:"resolvedFlat",value:function(t){return null!==t&&null!==t.flat?"".concat(t.flat):""}}]),e}(p["f"]);Object(d["a"])([m["a"]],Et.prototype,"administratorContractorGetAll",void 0),Object(d["a"])([m["a"]],Et.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],Et.prototype,"administratorContractorDelete",void 0),Object(d["a"])([m["a"]],Et.prototype,"administratorContractorSetSingle",void 0),Object(d["a"])([m["a"]],Et.prototype,"administratorContractorUnsetSingle",void 0),Object(d["a"])([Object(m["b"])("administratorContractor")],Et.prototype,"contractorState",void 0),Object(d["a"])([Object(p["e"])()],Et.prototype,"params",void 0),Object(d["a"])([Object(p["e"])()],Et.prototype,"tableIdIndex",void 0),Object(d["a"])([Object(p["e"])()],Et.prototype,"selectedRow",void 0),Object(d["a"])([Object(p["e"])()],Et.prototype,"contractors",void 0),Object(d["a"])([Object(p["e"])()],Et.prototype,"filter",void 0),Object(d["a"])([Object(p["e"])()],Et.prototype,"filterShow",void 0),Object(d["a"])([Object(p["g"])("filter",{deep:!0})],Et.prototype,"onFilterChange",null),Object(d["a"])([Object(p["g"])("contractors",{deep:!0})],Et.prototype,"onContractors",null),Object(d["a"])([Object(p["g"])("selectedRow")],Et.prototype,"onSelectedRow",null),Et=Object(d["a"])([Object(p["a"])({components:{SureModal:kt}})],Et);var Tt=Et,Pt=Tt,Ft=Object(T["a"])(Pt,vt,ht,!1,null,null,null),$t=Ft.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("header",{staticClass:"content-header"},[a("button",{staticClass:"btn btn-info btn-back",on:{click:t.back}},[a("i",{staticClass:"fa fa-angle-left"}),t._v("\n            Назад\n        ")]),0===t.contractorId?a("h1",[t._v("\n            Создание нового Контрагента\n        ")]):a("h1",[t._v("\n            Изменение Контрагента: "),a("b",{staticClass:"accent"},[t._v(t._s(t.contractorState.contractor.name))])])]),a("ul",{ref:"tablist",staticClass:"nav nav-tabs",attrs:{id:"tabs",role:"tablist"}},[t._m(0)]),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"main",role:"tabpanel","aria-labelledby":"main-tab"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group file-upload"},[""!==t.contractorState.contractor.logo&&null!==t.contractorState.contractor.logo?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.imageModal",modifiers:{imageModal:!0}}]},[a("div",{staticClass:"image",style:"background-image: url("+t.resolveLogoSrc+")"})]):a("img",{staticClass:"photo",attrs:{src:t.resolveLogoSrc},on:{click:function(e){return t.$refs.photo.click()}}}),a("input",{ref:"logo",staticClass:"form-control-file",attrs:{type:"file",accept:"image/jpeg,image/png,image/gif"},on:{change:t.uploadLogo}}),""!==t.resolveLogoSrc?a("button",{on:{click:function(e){return t.deleteLogo()}}},[t._v("×")]):t._e()],1)]),a("div",{staticClass:"col-10"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorName"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.name,expression:"contractorState.contractor.name"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorName",required:"",placeholder:"Наименование контрагента"},domProps:{value:t.contractorState.contractor.name},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"name",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorINN"}},[t._v("ИНН")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.inn,expression:"contractorState.contractor.inn"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorINN",required:"",placeholder:"ИНН"},domProps:{value:t.contractorState.contractor.inn},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"inn",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorKPP"}},[t._v("КПП")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.kpp,expression:"contractorState.contractor.kpp"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorKPP",placeholder:"КПП"},domProps:{value:t.contractorState.contractor.kpp},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"kpp",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleContractorFullName"}},[t._v("Полное наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.full_name,expression:"contractorState.contractor.full_name"}],staticClass:"form-control",attrs:{type:"text",id:"singleContractorFullName",required:"",placeholder:"Полное наименование контрагента"},domProps:{value:t.contractorState.contractor.full_name},on:{input:function(e){e.target.composing||t.$set(t.contractorState.contractor,"full_name",e.target.value)}}})])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Адрес")]),a("vue-dadata",{attrs:{onChange:t.changeAddress,query:t.contractorState.contractor.address?t.contractorState.contractor.address.unrestricted_value:"",token:t.dadataApiKey}})],1)])]),t._m(1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.contractorState.contractor.parent_id,expression:"contractorState.contractor.parent_id"}],staticClass:"form-control",attrs:{id:"singleLayerModuleId"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.contractorState.contractor,"parent_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"null",title:"Нет родительского контрагента"}},[t._v("-")]),t._l(t.parentContractors,(function(e){return a("option",{attrs:{title:e.name},domProps:{value:e.id}},[t._v("\n                                "+t._s(e.name)+"\n                            ")])}))],2)])])])])]),a("footer",{staticClass:"content-footer"},[a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.hasChanges},on:{click:t.save}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n            Сохранить\n        ")]),a("button",{staticClass:"btn btn-info",on:{click:t.back}},[a("i",{staticClass:"fa fa-angle-left"}),t._v("\n            К списку\n        ")])]),a("image-modal",{model:{value:t.resolveLogoSrc,callback:function(e){t.resolveLogoSrc=e},expression:"resolveLogoSrc"}})],1)},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#main",role:"tab","aria-controls":"main","aria-selected":"true"}},[t._v("\n                Основные сведения\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"singleLayerModuleId"}},[t._v("Родительский контрагент")])])])}],Rt=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"imageModal",centered:""}},[a("div",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.$bvModal.hide("imageModal")}}},[t._v("×")])]),a("b-container",[a("div",[a("b-img",{attrs:{src:t.value,fluid:""}})],1)]),a("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"})],1)},Dt=[],Nt=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(p["e"])()],Nt.prototype,"src",void 0),Object(d["a"])([Object(p["d"])({type:String,default:""})],Nt.prototype,"value",void 0),Nt=Object(d["a"])([Object(p["a"])({})],Nt);var At=Nt,zt=At,Gt=Object(T["a"])(zt,It,Dt,!1,null,null,null),Ut=Gt.exports;function Bt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Vt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(a),!0).forEach((function(e){Object(bt["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Bt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var qt=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.dadataApiKey=O,t.contractor={id:0,name:"",full_name:""},t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.contractorId){t.next=4;break}this.administratorContractorUnsetSingle(),t.next=6;break;case 4:return t.next=6,this.administratorContractorGetById({id:this.contractorId});case 6:this.contractor=Vt({},this.contractorState.contractor);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"uploadLogo",value:function(){var t=this.$refs.logo;if(t&&t.files&&0!==t.files.length){var e=t.files[0];this.administratorContractorUploadLogo({file:e})}}},{key:"deleteLogo",value:function(){this.contractorState.contractor.logo=""}},{key:"changeAddress",value:function(t){this.contractorState.contractor.address=Vt({},t.data,{unrestricted_value:t.unrestricted_value})}},{key:"save",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorContractorUpdate();case 2:this.contractor=Vt({},this.contractorState.contractor);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"back",value:function(){this.$router.push("/administrator/contractors/")}},{key:"resolveLogoSrc",get:function(){return""===this.contractorState.contractor.logo||null===this.contractorState.contractor.logo?"/images/logo.png":"".concat(_,"/storage/").concat(this.contractorState.contractor.logo)}},{key:"contractorId",get:function(){return this.$route.params.id?parseInt(this.$route.params.id,10):0}},{key:"parentContractors",get:function(){var t=this,e=[];return this.contractorState.contractors.map((function(a){(a.id!==t.contractorState.contractor.id&&null==a.parent_id||a.id===t.contractorState.contractor.parent_id)&&e.push(a)})),e}},{key:"hasChanges",get:function(){return(0===this.contractorId||0!==this.contractor.id)&&!Rt(this.contractor,this.contractorState.contractor)}}]),e}(p["f"]);Object(d["a"])([m["a"]],qt.prototype,"administratorContractorGetById",void 0),Object(d["a"])([m["a"]],qt.prototype,"administratorContractorUpdate",void 0),Object(d["a"])([m["a"]],qt.prototype,"administratorContractorUploadLogo",void 0),Object(d["a"])([m["a"]],qt.prototype,"administratorContractorSetSingle",void 0),Object(d["a"])([m["a"]],qt.prototype,"administratorContractorUnsetSingle",void 0),Object(d["a"])([Object(m["b"])("administratorContractor")],qt.prototype,"contractorState",void 0),Object(d["a"])([Object(p["e"])()],qt.prototype,"dadataApiKey",void 0),Object(d["a"])([Object(p["e"])()],qt.prototype,"contractor",void 0),qt=Object(d["a"])([Object(p["a"])({components:{ImageModal:Ut}})],qt);var Wt=qt,Ht=Wt,Jt=Object(T["a"])(Ht,Mt,Lt,!1,null,null,null),Yt=Jt.exports,Kt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Справочник Муниципальных Образований")]),a("br"),a("br"),a("div",{staticClass:"alert alert-info"},[t._v("\n        Инструмент находится в разработке\n    ")])])}],Xt=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Xt=Object(d["a"])([Object(p["a"])({components:{SureModal:kt}})],Xt);var Qt=Xt,te=Qt,ee=Object(T["a"])(te,Kt,Zt,!1,null,null,null),ae=ee.exports,re=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ne=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Муниципальное Образование")]),a("br"),a("br"),a("div",{staticClass:"alert alert-info"},[t._v("\n        Инструмент находится в разработке\n    ")])])}],se=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);se=Object(d["a"])([Object(p["a"])({components:{SureModal:kt}})],se);var oe=se,ie=oe,le=Object(T["a"])(ie,re,ne,!1,null,null,null),ce=le.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Справочник ТОС")]),a("button",{staticClass:"btn btn-success",on:{click:t.createContractorTos}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v("\n        Добавить\n    ")]),a("button",{staticClass:"btn btn-info",on:{click:t.excelExport}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n        Выгрузить в Excel\n    ")]),a("div",{staticClass:"table-dynamic-filter"},[a("label",{staticClass:"title"},[t._v("Расширенный поиск:\n            "),t.filterShow?a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.toggleFilterShow()}}},[t._v("[свернуть]")]):a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.toggleFilterShow()}}},[t._v("[развернуть]")])]),a("label",{staticClass:"title info"},[t._v("\n            Всего записей: "),a("b",[t._v(t._s(t.contractorsTos.length))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterShow,expression:"filterShow"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Наименование"},domProps:{value:t.filter.name},on:{input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.inn,expression:"filter.inn"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ИНН"},domProps:{value:t.filter.inn},on:{input:function(e){e.target.composing||t.$set(t.filter,"inn",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.kpp,expression:"filter.kpp"}],staticClass:"form-control",attrs:{type:"text",placeholder:"КПП"},domProps:{value:t.filter.kpp},on:{input:function(e){e.target.composing||t.$set(t.filter,"kpp",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.region,expression:"filter.region"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Регион"},domProps:{value:t.filter.region},on:{input:function(e){e.target.composing||t.$set(t.filter,"region",e.target.value)}}})])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.area,expression:"filter.area"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Район"},domProps:{value:t.filter.area},on:{input:function(e){e.target.composing||t.$set(t.filter,"area",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.city,expression:"filter.city"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Город, село"},domProps:{value:t.filter.city},on:{input:function(e){e.target.composing||t.$set(t.filter,"city",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.street,expression:"filter.street"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Улица"},domProps:{value:t.filter.street},on:{input:function(e){e.target.composing||t.$set(t.filter,"street",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.build,expression:"filter.build"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Дом"},domProps:{value:t.filter.build},on:{input:function(e){e.target.composing||t.$set(t.filter,"build",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 actions"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.cleanFilter()}}},[t._v("\n                        Сбросить фильтр\n                    ")])])])])]),a("div",{staticClass:"table-scroll contarcotrs-tos",class:{full:!t.filterShow}},[a("vue-table-dynamic",{ref:"contractorsTosTable",attrs:{params:t.params},on:{"cell-click":t.onClickCell,"cell-dblclick":t.onDblclickCell},scopedSlots:t._u([{key:"column-8",fn:function(e){var r=e.props;return[a("button",{staticClass:"btn btn-default",on:{click:function(e){return t.editContractorTos(r.cellData)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("button",{staticClass:"btn btn-default",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent(r.cellData)}}},[a("i",{staticClass:"fa fa-trash"})])]}}])})],1),a("sure-modal")],1)},de=[];function pe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function me(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(a),!0).forEach((function(e){Object(bt["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var fe=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.params={data:[],header:"row",sort:[0,1,2,3,4,5,6,7],columnWidth:[{column:0,width:300},{column:8,width:64}],selectedRow:0},t.tableIdIndex=8,t.selectedRow=0,t.contractorsTos=[],t.filter={name:"",inn:"",kpp:"",region:"",area:"",city:"",street:"",build:""},t.filterShow=!0,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onFilterChange",value:function(){this.contractorsTosFilter(),localStorage.setItem("contractors.tos.filter",JSON.stringify(this.filter))}},{key:"onContractorsTos",value:function(){this.initTable()}},{key:"onSelectedRow",value:function(){var t=me({},this.params);t.selectedRow=this.selectedRow,this.params=me({},t)}},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.contractorTosState.contractorsTos.length){t.next=3;break}return t.next=3,this.administratorContractorTosGetAll();case 3:this.filterState(),this.contractorsTosFilter(),this.initTable();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initTable",value:function(){var t=this;this.params.data=[["Наименование","ИНН","КПП","Регион","Район","Город/село","Улица","Дом",""]],console.log(this.contractorsTos),this.contractorsTos.forEach((function(e,a){t.params.data.push([e.full_contractor.name,e.full_contractor.inn,e.full_contractor.kpp,t.resolvedRegion(e.full_contractor.address),t.resolvedArea(e.full_contractor.address),t.resolvedCity(e.full_contractor.address),t.resolvedStreet(e.full_contractor.address),t.resolvedBuild(e.full_contractor.address),e.id.toString()])}))}},{key:"contractorsTosFilter",value:function(){var t=this;this.contractorsTos=this.contractorTosState.contractorsTos.filter((function(e){return(""===t.filter.name||e.full_contractor.name.toLowerCase().indexOf(t.filter.name.toLowerCase())+1||e.full_contractor.full_name.toLowerCase().indexOf(t.filter.name.toLowerCase())+1)&&(""===t.filter.inn||e.full_contractor.inn.toLowerCase().indexOf(t.filter.inn.toLowerCase())+1)&&(""===t.filter.kpp||e.full_contractor.kpp.toLowerCase().indexOf(t.filter.kpp.toLowerCase())+1)&&(""===t.filter.region||t.resolvedRegion(e.full_contractor.address).toLowerCase().indexOf(t.filter.region.toLowerCase())+1)&&(""===t.filter.area||t.resolvedArea(e.full_contractor.address).toLowerCase().indexOf(t.filter.area.toLowerCase())+1)&&(""===t.filter.city||t.resolvedCity(e.full_contractor.address).toLowerCase().indexOf(t.filter.city.toLowerCase())+1)&&(""===t.filter.street||t.resolvedStreet(e.full_contractor.address).toLowerCase().indexOf(t.filter.street.toLowerCase())+1)&&(""===t.filter.build||t.resolvedBuild(e.full_contractor.address).toLowerCase().indexOf(t.filter.build.toLowerCase())+1)}))}},{key:"cleanFilter",value:function(){this.filter={name:"",inn:"",kpp:"",region:"",area:"",city:"",street:"",build:""}}},{key:"toggleFilterShow",value:function(){this.filterShow=!this.filterShow,localStorage.setItem("contractors.tos.filterShow",this.filterShow.toString())}},{key:"filterState",value:function(){localStorage.getItem("contractors.tos.filterShow")&&(this.filterShow="true"===localStorage.getItem("contractors.tos.filterShow")),localStorage.getItem("contractors.tos.filter")&&(this.filter=Object.assign(this.filter,JSON.parse(localStorage.getItem("contractors.tos.filter"))))}},{key:"createContractorTos",value:function(){this.administratorContractorTosUnsetSingle(),this.$router.push("/administrator/tos/0")}},{key:"editContractorTos",value:function(t){this.$router.push("/administrator/tos/".concat(t))}},{key:"contractorTosSetSingle",value:function(t){var e=yt(this.contractorTosState.contractorsTos,parseInt(t,10));this.administratorContractorTosSetSingle(e)}},{key:"setSureModalContent",value:function(t){var e=this,a=yt(this.contractorTosState.contractorsTos,parseInt(t,10));this.setSureModal({title:"Удалить ТОС?",text:'Вы уверены, что хотите удалить ТОС "'.concat(a.constructor.name,'" из системы?'),action:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.administratorContractorTosSetSingle(a),t.next=3,e.administratorContractorTosDelete();case 3:e.administratorContractorTosUnsetSingle();case 4:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()})}},{key:"excelExport",value:function(){var t=this,e=this.$refs.contractorsTosTable;if(e){var a=e.tableData;if(a&&a.activatedRows){var r=a.activatedRows.map((function(e,a){if(0===a)return["№ п/п","Наименование","Полное наименование","ИНН","КПП","Регион","Район","Город/село","Улица","Дом","Офис"];var r=yt(t.contractorTosState.contractorsTos,parseInt(e.cells[t.tableIdIndex].data,10));return[a,r.full_contractor.name,r.full_contractor.full_name,r.full_contractor.inn,r.full_contractor.kpp,t.resolvedRegion(r.full_contractor.address),t.resolvedArea(r.full_contractor.address),t.resolvedCity(r.full_contractor.address),t.resolvedStreet(r.full_contractor.address),t.resolvedBuild(r.full_contractor.address),t.resolvedFlat(r.full_contractor.address)]}));y.a.post("".concat(g,"export/excel"),{data:r}).then((function(t){window.open("".concat(_).concat(t.data))}))}}}},{key:"onDblclickCell",value:function(t,e,a){if(e!==this.tableIdIndex){var r=this.$refs.contractorsTosTable;if(r){var n=r.tableData.rows[t].cells[this.tableIdIndex].data;this.editContractorTos(n)}}}},{key:"onClickCell",value:function(t,e,a){this.selectedRow===t&&this.onDblclickCell(t,e,a),this.selectedRow=t}},{key:"resolvedRegion",value:function(t){return t&&t.region?"".concat(t.region," ").concat(t.region_type):""}},{key:"resolvedArea",value:function(t){return t&&t.area?"".concat(t.area," ").concat(t.area_type):""}},{key:"resolvedCity",value:function(t){return t&&t.city?"".concat(t.city," ").concat(t.city_type):t&&t.settlement?"".concat(t.settlement," ").concat(t.settlement_type):""}},{key:"resolvedStreet",value:function(t){return t&&t.street?"".concat(t.street," ").concat(t.street_type):""}},{key:"resolvedBuild",value:function(t){return t&&t.house?"".concat(t.house):""}},{key:"resolvedFlat",value:function(t){return t&&t.flat?"".concat(t.flat):""}}]),e}(p["f"]);Object(d["a"])([m["a"]],fe.prototype,"administratorContractorTosGetAll",void 0),Object(d["a"])([m["a"]],fe.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],fe.prototype,"administratorContractorTosDelete",void 0),Object(d["a"])([m["a"]],fe.prototype,"administratorContractorTosSetSingle",void 0),Object(d["a"])([m["a"]],fe.prototype,"administratorContractorTosUnsetSingle",void 0),Object(d["a"])([Object(m["b"])("administratorContractorTos")],fe.prototype,"contractorTosState",void 0),Object(d["a"])([Object(p["e"])()],fe.prototype,"params",void 0),Object(d["a"])([Object(p["e"])()],fe.prototype,"tableIdIndex",void 0),Object(d["a"])([Object(p["e"])()],fe.prototype,"selectedRow",void 0),Object(d["a"])([Object(p["e"])()],fe.prototype,"contractorsTos",void 0),Object(d["a"])([Object(p["e"])()],fe.prototype,"filter",void 0),Object(d["a"])([Object(p["e"])()],fe.prototype,"filterShow",void 0),Object(d["a"])([Object(p["g"])("filter",{deep:!0})],fe.prototype,"onFilterChange",null),Object(d["a"])([Object(p["g"])("contractorsTos",{deep:!0})],fe.prototype,"onContractorsTos",null),Object(d["a"])([Object(p["g"])("selectedRow")],fe.prototype,"onSelectedRow",null),fe=Object(d["a"])([Object(p["a"])({components:{SureModal:kt}})],fe);var ve=fe,he=ve,be=Object(T["a"])(he,ue,de,!1,null,null,null),ye=be.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("header",{staticClass:"content-header"},[a("button",{staticClass:"btn btn-info btn-back",on:{click:t.back}},[a("i",{staticClass:"fa fa-angle-left"}),t._v("\n            Назад\n        ")]),0===t.contractorTosId?a("h1",[t._v("\n            Создание ТОС\n        ")]):a("h1",[t._v("\n            Изменение ТОС: "),t.contractorTosState.contractorTos.full_contractor?a("b",{staticClass:"accent"},[t._v(t._s(t.contractorTosState.contractorTos.full_contractor.name))]):t._e()])]),a("ul",{ref:"tablist",staticClass:"nav nav-tabs",attrs:{id:"tabs",role:"tablist"}},[t._m(0),t._m(1)]),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"main",role:"tabpanel","aria-labelledby":"main-tab"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("awesome-selector",{attrs:{title:"Контрагент",id:"singleContractorTosContractor",list:t.resolvedContractors},on:{onchange:t.contractorChange},model:{value:t.resolvedContractor,callback:function(e){t.resolvedContractor=e},expression:"resolvedContractor"}})],1)])])]),a("div",{staticClass:"tab-pane fade",attrs:{id:"addresses",role:"tabpanel","aria-labelledby":"addresses-tab"}},[a("div",{staticClass:"card-body"},[t._l(t.contractorTosState.contractorTos.addresses,(function(e){return a("div",{staticClass:"row"},[a("div",{staticClass:"col-11"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(e.unrestricted_value))])])]),a("div",{staticClass:"col-1"},[a("button",{staticClass:"btn btn-default btn-circle",on:{click:function(a){return t.addressesTabDeleteAddress(e)}}},[a("i",{staticClass:"fa fa-minus"})])])])})),a("div",{staticClass:"row"},[a("div",{staticClass:"col-11"},[a("vue-dadata",{attrs:{onChange:t.addressesTabChangeAddress,token:t.dadataApiKey}})],1),a("div",{staticClass:"col-1"},[a("button",{staticClass:"btn btn-success btn-circle",on:{click:t.addressesTabAddAddress}},[a("i",{staticClass:"fa fa-plus"})])])])],2)])]),a("footer",{staticClass:"content-footer"},[a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.hasChanges},on:{click:t.save}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n            Сохранить\n        ")]),a("button",{staticClass:"btn btn-info",on:{click:t.back}},[a("i",{staticClass:"fa fa-angle-left"}),t._v("\n            К списку\n        ")])])])},_e=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#main",role:"tab","aria-controls":"main","aria-selected":"true"}},[t._v("\n                Основные сведения\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#addresses",role:"tab","aria-controls":"addresses","aria-selected":"false"}},[t._v("\n                Адреса\n            ")])])}],Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{staticClass:"title",attrs:{for:t.id}},[t._v(t._s(t.title))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.value.title,expression:"value.title"},{name:"b-modal",rawName:"v-b-modal.awesomeSelectorList",modifiers:{awesomeSelectorList:!0}}],staticClass:"form-control",attrs:{type:"text",id:t.id,readonly:"",placeholder:t.title},domProps:{value:t.value.title},on:{input:function(e){e.target.composing||t.$set(t.value,"title",e.target.value)}}}),a("div",{staticClass:"actions"},[a("a",{staticClass:"btn btn-link btn-danger",on:{click:t.clean}},[t._v("Очистить")])]),a("b-modal",{attrs:{id:"awesomeSelectorList",size:"l",title:"Выбрать "+t.title}},[a("b-container",[a("form",{staticClass:"awesome-selector-dialog"},[a("div",{staticClass:"awesome-selector-search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{placeholder:"Начните ввод для поиска"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("button",{staticClass:"btn btn-info btn-clean-search",on:{click:function(e){t.search=""}}},[a("i",{staticClass:"fa fa-times"})])]),a("div",{staticClass:"awesome-selector-items"},t._l(t.resolveList,(function(e){return a("div",{staticClass:"awesome-selector-item"},[a("a",{attrs:{href:"javascript:void(0);",title:e.title},on:{click:function(a){return t.select(e)}}},[t._v(t._s(e.title))])])})),0)])]),a("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"})],1)],1)},Ce=[],je=(a("386d"),function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.search="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onchange",value:function(t){return t}},{key:"clean",value:function(){this.resolveValue={id:0,title:""}}},{key:"select",value:function(t){this.resolveValue=t,this.$bvModal.hide("awesomeSelectorList")}},{key:"resolveList",get:function(){var t=this;return this.list.filter((function(e){return e.title.toLowerCase().indexOf(t.search.toLowerCase())+1}))}},{key:"resolveValue",get:function(){return this.value},set:function(t){this.onchange(t)}}]),e}(p["f"]));Object(d["a"])([Object(p["d"])()],je.prototype,"title",void 0),Object(d["a"])([Object(p["d"])()],je.prototype,"id",void 0),Object(d["a"])([Object(p["d"])()],je.prototype,"list",void 0),Object(d["a"])([Object(p["d"])()],je.prototype,"value",void 0),Object(d["a"])([Object(p["e"])()],je.prototype,"search",void 0),Object(d["a"])([Object(p["b"])()],je.prototype,"onchange",null),je=Object(d["a"])([Object(p["a"])({components:{}})],je);var Se=je,ke=Se,we=Object(T["a"])(ke,Oe,Ce,!1,null,null,null),xe=we.exports;function Ee(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Te(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(a),!0).forEach((function(e){Object(bt["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Pe=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.dadataApiKey=O,t.contractorTos={id:0,contractor_id:0},t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.administratorContractorGetAll(),0!==this.contractorTosId){t.next=5;break}this.administratorContractorTosUnsetSingle(),t.next=7;break;case 5:return t.next=7,this.administratorContractorTosGetById({id:this.contractorTosId});case 7:this.contractorTos=Te({},this.contractorTosState.contractorTos);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorContractorTosUpdate();case 2:this.contractorTos=Te({},this.contractorTosState.contractorTos);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"back",value:function(){this.$router.push("/administrator/contractors/tos/")}},{key:"contractorChange",value:function(t){this.contractorTosState.contractorTos.contractor_id=t.id,this.resolvedContractor=t}},{key:"addressesTabChangeAddress",value:function(t){this.address=Te({},t.data,{unrestricted_value:t.unrestricted_value})}},{key:"addressesTabAddAddress",value:function(){this.administratorContractorTosAddAddress({address:this.address})}},{key:"addressesTabDeleteAddress",value:function(t){this.administratorContractorTosDeleteAddress({address:t})}},{key:"contractorTosId",get:function(){return this.$route.params.id?parseInt(this.$route.params.id,10):0}},{key:"hasChanges",get:function(){return(0===this.contractorTosId||0!==this.contractorTos.id)&&!Rt(this.contractorTos,this.contractorTosState.contractorTos)}},{key:"resolvedContractors",get:function(){return this.contractorState.contractors.map((function(t){return{id:t.id,title:t.name}}))}},{key:"resolvedContractor",get:function(){return null===this.contractorTosState.contractorTos.full_contractor||void 0===this.contractorTosState.contractorTos.full_contractor?{id:0,title:""}:{id:this.contractorTosState.contractorTos.full_contractor.id,title:this.contractorTosState.contractorTos.full_contractor.name}},set:function(t){this.contractorTosState.contractorTos.full_contractor=Object.assign({},{id:t.id,name:t.title,full_name:t.title})}}]),e}(p["f"]);Object(d["a"])([m["a"]],Pe.prototype,"administratorContractorGetAll",void 0),Object(d["a"])([m["a"]],Pe.prototype,"administratorContractorTosGetById",void 0),Object(d["a"])([m["a"]],Pe.prototype,"administratorContractorTosUpdate",void 0),Object(d["a"])([m["a"]],Pe.prototype,"administratorContractorTosSetSingle",void 0),Object(d["a"])([m["a"]],Pe.prototype,"administratorContractorTosUnsetSingle",void 0),Object(d["a"])([m["a"]],Pe.prototype,"administratorContractorTosAddAddress",void 0),Object(d["a"])([m["a"]],Pe.prototype,"administratorContractorTosDeleteAddress",void 0),Object(d["a"])([Object(m["b"])("administratorContractorTos")],Pe.prototype,"contractorTosState",void 0),Object(d["a"])([Object(m["b"])("administratorContractor")],Pe.prototype,"contractorState",void 0),Object(d["a"])([Object(p["e"])()],Pe.prototype,"address",void 0),Object(d["a"])([Object(p["e"])()],Pe.prototype,"dadataApiKey",void 0),Object(d["a"])([Object(p["e"])()],Pe.prototype,"contractorTos",void 0),Pe=Object(d["a"])([Object(p["a"])({components:{AwesomeSelector:xe}})],Pe);var Fe=Pe,$e=Fe,Me=Object(T["a"])($e,ge,_e,!1,null,null,null),Le=Me.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Справочник ТСЖ")]),a("button",{staticClass:"btn btn-success",on:{click:t.createContractorTszh}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v("\n        Добавить\n    ")]),a("button",{staticClass:"btn btn-info",on:{click:t.excelExport}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n        Выгрузить в Excel\n    ")]),a("div",{staticClass:"table-dynamic-filter"},[a("label",{staticClass:"title"},[t._v("Расширенный поиск:\n            "),t.filterShow?a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.toggleFilterShow()}}},[t._v("[свернуть]")]):a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.toggleFilterShow()}}},[t._v("[развернуть]")])]),a("label",{staticClass:"title info"},[t._v("\n            Всего записей: "),a("b",[t._v(t._s(t.contractorsTszh.length))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterShow,expression:"filterShow"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Наименование"},domProps:{value:t.filter.name},on:{input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.inn,expression:"filter.inn"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ИНН"},domProps:{value:t.filter.inn},on:{input:function(e){e.target.composing||t.$set(t.filter,"inn",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.kpp,expression:"filter.kpp"}],staticClass:"form-control",attrs:{type:"text",placeholder:"КПП"},domProps:{value:t.filter.kpp},on:{input:function(e){e.target.composing||t.$set(t.filter,"kpp",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.region,expression:"filter.region"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Регион"},domProps:{value:t.filter.region},on:{input:function(e){e.target.composing||t.$set(t.filter,"region",e.target.value)}}})])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.area,expression:"filter.area"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Район"},domProps:{value:t.filter.area},on:{input:function(e){e.target.composing||t.$set(t.filter,"area",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.city,expression:"filter.city"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Город, село"},domProps:{value:t.filter.city},on:{input:function(e){e.target.composing||t.$set(t.filter,"city",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.street,expression:"filter.street"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Улица"},domProps:{value:t.filter.street},on:{input:function(e){e.target.composing||t.$set(t.filter,"street",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.build,expression:"filter.build"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Дом"},domProps:{value:t.filter.build},on:{input:function(e){e.target.composing||t.$set(t.filter,"build",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 actions"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.cleanFilter()}}},[t._v("\n                        Сбросить фильтр\n                    ")])])])])]),a("div",{staticClass:"table-scroll contarcotrs-tszh",class:{full:!t.filterShow}},[a("vue-table-dynamic",{ref:"contractorsTszhTable",attrs:{params:t.params},on:{"cell-click":t.onClickCell,"cell-dblclick":t.onDblclickCell},scopedSlots:t._u([{key:"column-8",fn:function(e){var r=e.props;return[a("button",{staticClass:"btn btn-default",on:{click:function(e){return t.editContractorTszh(r.cellData)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("button",{staticClass:"btn btn-default",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent(r.cellData)}}},[a("i",{staticClass:"fa fa-trash"})])]}}])})],1),a("sure-modal")],1)},Ie=[];function De(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Ne(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?De(Object(a),!0).forEach((function(e){Object(bt["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):De(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ae=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.params={data:[],header:"row",sort:[0,1,2,3,4,5,6,7],columnWidth:[{column:0,width:300},{column:8,width:64}],selectedRow:0},t.tableIdIndex=8,t.selectedRow=0,t.contractorsTszh=[],t.filter={name:"",inn:"",kpp:"",region:"",area:"",city:"",street:"",build:""},t.filterShow=!0,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onFilterChange",value:function(){this.contractorsTszhFilter(),localStorage.setItem("contractors.tszh.filter",JSON.stringify(this.filter))}},{key:"onContractorsTszh",value:function(){this.initTable()}},{key:"onSelectedRow",value:function(){var t=Ne({},this.params);t.selectedRow=this.selectedRow,this.params=Ne({},t)}},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.contractorTszhState.contractorsTszh.length){t.next=3;break}return t.next=3,this.administratorContractorTszhGetAll();case 3:this.filterState(),this.contractorsTszhFilter(),this.initTable();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initTable",value:function(){var t=this;this.params.data=[["Наименование","ИНН","КПП","Регион","Район","Город/село","Улица","Дом",""]],this.contractorsTszh.forEach((function(e,a){t.params.data.push([e.full_contractor.name,e.full_contractor.inn,e.full_contractor.kpp,t.resolvedRegion(e.full_contractor.address),t.resolvedArea(e.full_contractor.address),t.resolvedCity(e.full_contractor.address),t.resolvedStreet(e.full_contractor.address),t.resolvedBuild(e.full_contractor.address),e.id.toString()])}))}},{key:"contractorsTszhFilter",value:function(){var t=this;this.contractorsTszh=this.contractorTszhState.contractorsTszh.filter((function(e){return(""===t.filter.name||e.full_contractor.name.toLowerCase().indexOf(t.filter.name.toLowerCase())+1||e.full_contractor.full_name.toLowerCase().indexOf(t.filter.name.toLowerCase())+1)&&(""===t.filter.inn||e.full_contractor.inn.toLowerCase().indexOf(t.filter.inn.toLowerCase())+1)&&(""===t.filter.kpp||e.full_contractor.kpp.toLowerCase().indexOf(t.filter.kpp.toLowerCase())+1)&&(""===t.filter.region||t.resolvedRegion(e.full_contractor.address).toLowerCase().indexOf(t.filter.region.toLowerCase())+1)&&(""===t.filter.area||t.resolvedArea(e.full_contractor.address).toLowerCase().indexOf(t.filter.area.toLowerCase())+1)&&(""===t.filter.city||t.resolvedCity(e.full_contractor.address).toLowerCase().indexOf(t.filter.city.toLowerCase())+1)&&(""===t.filter.street||t.resolvedStreet(e.full_contractor.address).toLowerCase().indexOf(t.filter.street.toLowerCase())+1)&&(""===t.filter.build||t.resolvedBuild(e.full_contractor.address).toLowerCase().indexOf(t.filter.build.toLowerCase())+1)}))}},{key:"cleanFilter",value:function(){this.filter={name:"",inn:"",kpp:"",region:"",area:"",city:"",street:"",build:""}}},{key:"toggleFilterShow",value:function(){this.filterShow=!this.filterShow,localStorage.setItem("contractors.tszh.filterShow",this.filterShow.toString())}},{key:"filterState",value:function(){localStorage.getItem("contractors.tszh.filterShow")&&(this.filterShow="true"===localStorage.getItem("contractors.tszh.filterShow")),localStorage.getItem("contractors.tszh.filter")&&(this.filter=Object.assign(this.filter,JSON.parse(localStorage.getItem("contractors.tszh.filter"))))}},{key:"createContractorTszh",value:function(){this.administratorContractorTszhUnsetSingle(),this.$router.push("/administrator/tszh/0")}},{key:"editContractorTszh",value:function(t){this.$router.push("/administrator/tszh/".concat(t))}},{key:"contractorTszhSetSingle",value:function(t){var e=yt(this.contractorTszhState.contractorsTszh,parseInt(t,10));this.administratorContractorTszhSetSingle(e)}},{key:"showSingleContractorTszhModal",value:function(t,e,a){if(e!==this.tableIdIndex){var r=this.$refs.contractorsTszhTable;if(r){var n=r.tableData.rows[t].cells[this.tableIdIndex].data;this.contractorTszhSetSingle(n),this.$bvModal.show("singleContractorTszhModal")}}}},{key:"setSureModalContent",value:function(t){var e=this,a=yt(this.contractorTszhState.contractorsTszh,parseInt(t,10));this.setSureModal({title:"Удалить ТСЖ?",text:'Вы уверены, что хотите удалить ТСЖ "'.concat(a.constructor.name,'" из системы?'),action:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.administratorContractorTszhSetSingle(a),t.next=3,e.administratorContractorTszhDelete();case 3:e.administratorContractorTszhUnsetSingle();case 4:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()})}},{key:"excelExport",value:function(){var t=this,e=this.$refs.contractorsTszhTable;if(e){var a=e.tableData;if(a&&a.activatedRows){var r=a.activatedRows.map((function(e,a){if(0===a)return["№ п/п","Наименование","Полное наименование","ИНН","КПП","Регион","Район","Город/село","Улица","Дом","Офис"];var r=yt(t.contractorTszhState.contractorsTszh,parseInt(e.cells[t.tableIdIndex].data,10));return[a,r.full_contractor.name,r.full_contractor.full_name,r.full_contractor.inn,r.full_contractor.kpp,t.resolvedRegion(r.full_contractor.address),t.resolvedArea(r.full_contractor.address),t.resolvedCity(r.full_contractor.address),t.resolvedStreet(r.full_contractor.address),t.resolvedBuild(r.full_contractor.address),t.resolvedFlat(r.full_contractor.address)]}));y.a.post("".concat(g,"export/excel"),{data:r}).then((function(t){window.open("".concat(_).concat(t.data))}))}}}},{key:"onDblclickCell",value:function(t,e,a){if(e!==this.tableIdIndex){var r=this.$refs.contractorsTszhTable;if(r){var n=r.tableData.rows[t].cells[this.tableIdIndex].data;this.editContractorTszh(n)}}}},{key:"onClickCell",value:function(t,e,a){this.selectedRow===t&&this.onDblclickCell(t,e,a),this.selectedRow=t}},{key:"resolvedRegion",value:function(t){return t&&t.region?"".concat(t.region," ").concat(t.region_type):""}},{key:"resolvedArea",value:function(t){return t&&t.area?"".concat(t.area," ").concat(t.area_type):""}},{key:"resolvedCity",value:function(t){return t&&t.city?"".concat(t.city," ").concat(t.city_type):t&&t.settlement?"".concat(t.settlement," ").concat(t.settlement_type):""}},{key:"resolvedStreet",value:function(t){return t&&t.street?"".concat(t.street," ").concat(t.street_type):""}},{key:"resolvedBuild",value:function(t){return t&&t.house?"".concat(t.house):""}},{key:"resolvedFlat",value:function(t){return t&&t.flat?"".concat(t.flat):""}}]),e}(p["f"]);Object(d["a"])([m["a"]],Ae.prototype,"administratorContractorTszhGetAll",void 0),Object(d["a"])([m["a"]],Ae.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],Ae.prototype,"administratorContractorTszhDelete",void 0),Object(d["a"])([m["a"]],Ae.prototype,"administratorContractorTszhSetSingle",void 0),Object(d["a"])([m["a"]],Ae.prototype,"administratorContractorTszhUnsetSingle",void 0),Object(d["a"])([Object(m["b"])("administratorContractorTszh")],Ae.prototype,"contractorTszhState",void 0),Object(d["a"])([Object(p["e"])()],Ae.prototype,"params",void 0),Object(d["a"])([Object(p["e"])()],Ae.prototype,"tableIdIndex",void 0),Object(d["a"])([Object(p["e"])()],Ae.prototype,"selectedRow",void 0),Object(d["a"])([Object(p["e"])()],Ae.prototype,"contractorsTszh",void 0),Object(d["a"])([Object(p["e"])()],Ae.prototype,"filter",void 0),Object(d["a"])([Object(p["e"])()],Ae.prototype,"filterShow",void 0),Object(d["a"])([Object(p["g"])("filter",{deep:!0})],Ae.prototype,"onFilterChange",null),Object(d["a"])([Object(p["g"])("contractorsTszh",{deep:!0})],Ae.prototype,"onContractorsTszh",null),Object(d["a"])([Object(p["g"])("selectedRow")],Ae.prototype,"onSelectedRow",null),Ae=Object(d["a"])([Object(p["a"])({components:{SureModal:kt}})],Ae);var ze=Ae,Ge=ze,Ue=Object(T["a"])(Ge,Re,Ie,!1,null,null,null),Be=Ue.exports,Ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("header",{staticClass:"content-header"},[a("button",{staticClass:"btn btn-info btn-back",on:{click:t.back}},[a("i",{staticClass:"fa fa-angle-left"}),t._v("\n            Назад\n        ")]),0===t.contractorTszhId?a("h1",[t._v("\n            Создание ТСЖ\n        ")]):a("h1",[t._v("\n            Изменение ТСЖ: "),t.contractorTszhState.contractorTszh.full_contractor?a("b",{staticClass:"accent"},[t._v(t._s(t.contractorTszhState.contractorTszh.full_contractor.name))]):t._e()])]),a("ul",{ref:"tablist",staticClass:"nav nav-tabs",attrs:{id:"tabs",role:"tablist"}},[t._m(0)]),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"main",role:"tabpanel","aria-labelledby":"main-tab"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("awesome-selector",{attrs:{title:"Контрагент",id:"singleContractorTszhContractor",list:t.resolvedContractors},on:{onchange:t.contractorChange},model:{value:t.resolvedContractor,callback:function(e){t.resolvedContractor=e},expression:"resolvedContractor"}})],1)])])])]),a("footer",{staticClass:"content-footer"},[a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.hasChanges},on:{click:t.save}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n            Сохранить\n        ")]),a("button",{staticClass:"btn btn-info",on:{click:t.back}},[a("i",{staticClass:"fa fa-angle-left"}),t._v("\n            К списку\n        ")])])])},qe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#main",role:"tab","aria-controls":"main","aria-selected":"true"}},[t._v("\n                Основные сведения\n            ")])])}];function We(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function He(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?We(Object(a),!0).forEach((function(e){Object(bt["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):We(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Je=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.dadataApiKey=O,t.contractorTszh={id:0,contractor_id:0},t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.administratorContractorGetAll(),0!==this.contractorTszhId){t.next=5;break}this.administratorContractorTszhUnsetSingle(),t.next=7;break;case 5:return t.next=7,this.administratorContractorTszhGetById({id:this.contractorTszhId});case 7:this.contractorTszh=He({},this.contractorTszhState.contractorTszh);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorContractorTszhUpdate();case 2:this.contractorTszh=He({},this.contractorTszhState.contractorTszh);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"back",value:function(){this.$router.push("/administrator/contractors/tszh/")}},{key:"contractorChange",value:function(t){this.contractorTszhState.contractorTszh.contractor_id=t.id,this.resolvedContractor=t}},{key:"contractorTszhId",get:function(){return this.$route.params.id?parseInt(this.$route.params.id,10):0}},{key:"hasChanges",get:function(){return(0===this.contractorTszhId||0!==this.contractorTszh.id)&&!Rt(this.contractorTszh,this.contractorTszhState.contractorTszh)}},{key:"resolvedContractors",get:function(){return this.contractorState.contractors.map((function(t){return{id:t.id,title:t.name}}))}},{key:"resolvedContractor",get:function(){return null===this.contractorTszhState.contractorTszh.full_contractor||void 0===this.contractorTszhState.contractorTszh.full_contractor?{id:0,title:""}:{id:this.contractorTszhState.contractorTszh.full_contractor.id,title:this.contractorTszhState.contractorTszh.full_contractor.name}},set:function(t){this.contractorTszhState.contractorTszh.full_contractor=Object.assign({},{id:t.id,name:t.title,full_name:t.title})}}]),e}(p["f"]);Object(d["a"])([m["a"]],Je.prototype,"administratorContractorGetAll",void 0),Object(d["a"])([m["a"]],Je.prototype,"administratorContractorTszhGetById",void 0),Object(d["a"])([m["a"]],Je.prototype,"administratorContractorTszhUpdate",void 0),Object(d["a"])([m["a"]],Je.prototype,"administratorContractorTszhSetSingle",void 0),Object(d["a"])([m["a"]],Je.prototype,"administratorContractorTszhUnsetSingle",void 0),Object(d["a"])([Object(m["b"])("administratorContractorTszh")],Je.prototype,"contractorTszhState",void 0),Object(d["a"])([Object(m["b"])("administratorContractor")],Je.prototype,"contractorState",void 0),Object(d["a"])([Object(p["e"])()],Je.prototype,"dadataApiKey",void 0),Object(d["a"])([Object(p["e"])()],Je.prototype,"contractorTszh",void 0),Je=Object(d["a"])([Object(p["a"])({components:{AwesomeSelector:xe}})],Je);var Ye=Je,Ke=Ye,Ze=Object(T["a"])(Ke,Ve,qe,!1,null,null,null),Xe=Ze.exports,Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Справочник физических лиц")]),a("button",{staticClass:"btn btn-success",on:{click:t.createPerson}},[a("i",{staticClass:"fa fa-user-plus"}),t._v("\n        Добавить\n    ")]),a("button",{staticClass:"btn btn-info",on:{click:t.excelExport}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n        Выгрузить в Excel\n    ")]),a("div",{staticClass:"table-dynamic-filter"},[a("label",{staticClass:"title"},[t._v("Расширенный поиск:\n            "),t.filterShow?a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.toggleFilterShow()}}},[t._v("[свернуть]")]):a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.toggleFilterShow()}}},[t._v("[развернуть]")])]),a("label",{staticClass:"title info"},[t._v("\n            Всего записей: "),a("b",[t._v(t._s(t.persons.length))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterShow,expression:"filterShow"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.lastname,expression:"filter.lastname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Фамилия"},domProps:{value:t.filter.lastname},on:{input:function(e){e.target.composing||t.$set(t.filter,"lastname",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.firstname,expression:"filter.firstname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Имя"},domProps:{value:t.filter.firstname},on:{input:function(e){e.target.composing||t.$set(t.filter,"firstname",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.middlename,expression:"filter.middlename"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Отчество"},domProps:{value:t.filter.middlename},on:{input:function(e){e.target.composing||t.$set(t.filter,"middlename",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.date_of_birth,expression:"filter.date_of_birth"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Дата рождения"},domProps:{value:t.filter.date_of_birth},on:{input:function(e){e.target.composing||t.$set(t.filter,"date_of_birth",e.target.value)}}})])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.tos,expression:"filter.tos"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"tos",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Все")]),t._l(t.contractorTosState.contractorsTos,(function(e,r){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e.full_contractor.name)+"\n                            ")])}))],2)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.region,expression:"filter.region"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Регион"},domProps:{value:t.filter.region},on:{input:function(e){e.target.composing||t.$set(t.filter,"region",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.area,expression:"filter.area"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Район"},domProps:{value:t.filter.area},on:{input:function(e){e.target.composing||t.$set(t.filter,"area",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.city,expression:"filter.city"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Город, село"},domProps:{value:t.filter.city},on:{input:function(e){e.target.composing||t.$set(t.filter,"city",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.street,expression:"filter.street"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Улица"},domProps:{value:t.filter.street},on:{input:function(e){e.target.composing||t.$set(t.filter,"street",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.build,expression:"filter.build"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Дом"},domProps:{value:t.filter.build},on:{input:function(e){e.target.composing||t.$set(t.filter,"build",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.phone,expression:"filter.phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Телефон"},domProps:{value:t.filter.phone},on:{input:function(e){e.target.composing||t.$set(t.filter,"phone",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 actions"},[a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.cleanFilter()}}},[t._v("\n                        Сбросить фильтр\n                    ")])])])])]),a("div",{staticClass:"table-scroll persons",class:{full:!t.filterShow}},[a("vue-table-dynamic",{ref:"personsTable",attrs:{params:t.params},on:{"cell-click":t.onClickCell,"cell-dblclick":t.onDblclickCell},scopedSlots:t._u([{key:"column-0",fn:function(e){var r=e.props;return[a("span",{domProps:{innerHTML:t._s(r.cellData)}})]}},{key:"column-9",fn:function(e){var r=e.props;return[a("button",{staticClass:"btn btn-default",on:{click:function(e){return t.editPerson(r.cellData)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("button",{staticClass:"btn btn-default",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent(r.cellData)}}},[a("i",{staticClass:"fa fa-trash"})])]}}])})],1),a("sure-modal")],1)},ta=[],ea=a("7618");function aa(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function ra(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?aa(Object(a),!0).forEach((function(e){Object(bt["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):aa(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var na=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.params={data:[],header:"row",sort:[0,1,2,3,4,5,6,7],columnWidth:[{column:3,width:100},{column:8,width:64},{column:9,width:64}],selectedRow:0},t.tableIdIndex=9,t.selectedRow=0,t.persons=[],t.filter={lastname:"",firstname:"",middlename:"",date_of_birth:"",region:"",area:"",city:"",street:"",build:"",phone:"",tos:""},t.filterShow=!0,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onFilterChange",value:function(){this.personFilter(),localStorage.setItem("persons.filter",JSON.stringify(this.filter))}},{key:"onPersons",value:function(){this.initTable()}},{key:"onSelectedRow",value:function(){var t=ra({},this.params);t.selectedRow=this.selectedRow,this.params=ra({},t)}},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.personState.persons.length){t.next=3;break}return t.next=3,this.administratorPersonGetAll();case 3:this.filterState(),this.personFilter(),this.initTable(),this.administratorContractorTosGetAll();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initTable",value:function(){var t=this;this.params.data=[["Фамилия","Имя","Отчество","Дата Рождения","Регион","Район","Город/село","Улица","Дом",""]],this.persons.forEach((function(e,a){t.params.data.push([e.lastname+("vip"===e.status?' <i class="fas fa-crown"></i>':""),e.firstname,e.middlename,t.resolvedDate(e.date_of_birth),t.resolvedRegion(e.address),t.resolvedArea(e.address),t.resolvedCity(e.address),t.resolvedStreet(e.address),t.resolvedBuild(e.address),e.id.toString()])}))}},{key:"personFilter",value:function(){var t=this,e=ra({},this.filter);this.persons=this.personState.persons.filter((function(a){var r=!0;return""!==e.tos&&e.tos.addresses&&0!==e.tos.addresses.length&&(r=a.address&&0!==e.tos.addresses.filter((function(t){return t.fias_id===a.address.fias_id})).length),(""===e.lastname||a.lastname.toLowerCase().indexOf(e.lastname.toLowerCase())+1)&&(""===e.firstname||a.firstname.toLowerCase().indexOf(e.firstname.toLowerCase())+1)&&(""===e.middlename||a.middlename.toLowerCase().indexOf(e.middlename.toLowerCase())+1)&&(""===e.date_of_birth||a.date_of_birth.toLowerCase().indexOf(e.date_of_birth.toLowerCase())+1)&&(""===e.region||t.resolvedRegion(a.address).toLowerCase().indexOf(e.region.toLowerCase())+1)&&(""===e.area||t.resolvedArea(a.address).toLowerCase().indexOf(e.area.toLowerCase())+1)&&(""===e.city||t.resolvedCity(a.address).toLowerCase().indexOf(e.city.toLowerCase())+1)&&(""===e.street||t.resolvedStreet(a.address).toLowerCase().indexOf(e.street.toLowerCase())+1)&&(""===e.build||t.resolvedBuild(a.address).toLowerCase().indexOf(e.build.toLowerCase())+1)&&(""===e.phone||a.phones.toLowerCase().indexOf(e.phone.toLowerCase())+1)&&r}))}},{key:"cleanFilter",value:function(){this.filter={lastname:"",firstname:"",middlename:"",date_of_birth:"",region:"",area:"",city:"",street:"",build:"",phone:"",tos:""}}},{key:"toggleFilterShow",value:function(){this.filterShow=!this.filterShow,localStorage.setItem("persons.filterShow",this.filterShow.toString())}},{key:"filterState",value:function(){localStorage.getItem("persons.filterShow")&&(this.filterShow="true"===localStorage.getItem("persons.filterShow")),localStorage.getItem("persons.filter")&&(this.filter=Object.assign(this.filter,JSON.parse(localStorage.getItem("persons.filter"))))}},{key:"createPerson",value:function(){this.administratorPersonUnsetSingle(),this.$router.push("/administrator/person/0")}},{key:"editPerson",value:function(t){this.$router.push("/administrator/person/".concat(t))}},{key:"setSureModalContent",value:function(t){var e=this,a=yt(this.personState.persons,parseInt(t,10));this.setSureModal({title:"Удалить физическое лицо?",text:'Вы уверены, что хотите удалить физическое лицо "'.concat(a.lastname," ").concat(a.firstname,'" из системы?'),action:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.administratorPersonSetSingle(a),t.next=3,e.administratorPersonDelete();case 3:e.administratorPersonUnsetSingle();case 4:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()})}},{key:"excelExport",value:function(){var t=this,e=this.$refs.personsTable;if(e){var a=e.tableData;if(a&&a.activatedRows){var r=a.activatedRows.map((function(e,a){if(0===a)return["№ п/п","Фамилия","Имя","Отчество","Дата Рождения","Регион","Район","Город/село","Улица","Дом","Квартира","Телефон"];var r=yt(t.personState.persons,parseInt(e.cells[t.tableIdIndex].data,10));return[a,r.lastname,r.firstname,r.middlename,t.resolvedDate(r.date_of_birth),t.resolvedRegion(r.address),t.resolvedArea(r.address),t.resolvedCity(r.address),t.resolvedStreet(r.address),t.resolvedBuild(r.address),t.resolvedFlat(r.address),t.resolvedPhones(r.phones)]}));y.a.post("".concat(g,"export/excel"),{data:r}).then((function(t){window.open("".concat(_).concat(t.data))}))}}}},{key:"onDblclickCell",value:function(t,e,a){if(e!==this.tableIdIndex){var r=this.$refs.personsTable;if(r){var n=r.tableData.rows[t].cells[this.tableIdIndex].data;this.editPerson(n)}}}},{key:"onClickCell",value:function(t,e,a){this.selectedRow===t&&this.onDblclickCell(t,e,a),this.selectedRow=t}},{key:"resolvedDate",value:function(t){t=new Date(t);var e=t.getDate()<10?"0".concat(t.getDate()):t.getDate(),a=t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1;return"".concat(e,".").concat(a,".").concat(t.getFullYear())}},{key:"resolvedPhones",value:function(t){return null===t||""===t?"":(t=JSON.parse(t),"object"!==Object(ea["a"])(t)&&(t=[{type:"Мобильный",value:t}]),t.length>0?t[0].value:"-")}},{key:"resolvedRegion",value:function(t){return null!==t&&null!==t.region?"".concat(t.region," ").concat(t.region_type):""}},{key:"resolvedArea",value:function(t){return null!==t&&null!==t.area?"".concat(t.area," ").concat(t.area_type):""}},{key:"resolvedCity",value:function(t){return null!==t&&null!==t.city?"".concat(t.city," ").concat(t.city_type):null!==t&&null!==t.settlement?"".concat(t.settlement," ").concat(t.settlement_type):""}},{key:"resolvedStreet",value:function(t){return null!==t&&null!==t.street?"".concat(t.street," ").concat(t.street_type):""}},{key:"resolvedBuild",value:function(t){return null!==t&&null!==t.house?"".concat(t.house):""}},{key:"resolvedFlat",value:function(t){return null!==t&&null!==t.flat?"".concat(t.flat):""}}]),e}(p["f"]);Object(d["a"])([m["a"]],na.prototype,"administratorPersonGetAll",void 0),Object(d["a"])([m["a"]],na.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],na.prototype,"administratorPersonDelete",void 0),Object(d["a"])([m["a"]],na.prototype,"administratorPersonSetSingle",void 0),Object(d["a"])([m["a"]],na.prototype,"administratorPersonUnsetSingle",void 0),Object(d["a"])([m["a"]],na.prototype,"administratorContractorTosGetAll",void 0),Object(d["a"])([Object(m["b"])("administratorPerson")],na.prototype,"personState",void 0),Object(d["a"])([Object(m["b"])("administratorContractorTos")],na.prototype,"contractorTosState",void 0),Object(d["a"])([Object(p["e"])()],na.prototype,"params",void 0),Object(d["a"])([Object(p["e"])()],na.prototype,"tableIdIndex",void 0),Object(d["a"])([Object(p["e"])()],na.prototype,"selectedRow",void 0),Object(d["a"])([Object(p["e"])()],na.prototype,"persons",void 0),Object(d["a"])([Object(p["e"])()],na.prototype,"filter",void 0),Object(d["a"])([Object(p["e"])()],na.prototype,"filterShow",void 0),Object(d["a"])([Object(p["g"])("filter",{deep:!0})],na.prototype,"onFilterChange",null),Object(d["a"])([Object(p["g"])("persons",{deep:!0})],na.prototype,"onPersons",null),Object(d["a"])([Object(p["g"])("selectedRow")],na.prototype,"onSelectedRow",null),na=Object(d["a"])([Object(p["a"])({components:{SureModal:kt}})],na);var sa=na,oa=sa,ia=Object(T["a"])(oa,Qe,ta,!1,null,null,null),la=ia.exports,ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("header",{staticClass:"content-header"},[a("button",{staticClass:"btn btn-info btn-back",on:{click:t.back}},[a("i",{staticClass:"fa fa-angle-left"}),t._v("\n            Назад\n        ")]),0===t.personId?a("h1",[t._v("\n            Создание нового Физического Лица\n        ")]):a("h1",[t._v("\n            Изменение Физического Лица: "),a("b",{staticClass:"accent"},[t._v(t._s(t.personState.person.lastname)+" "+t._s(t.personState.person.firstname)+" "+t._s(t.personState.person.middlename))])])]),a("ul",{ref:"tablist",staticClass:"nav nav-tabs",attrs:{id:"tabs",role:"tablist"}},[t._m(0),t._m(1),t._m(2)]),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"main",role:"tabpanel","aria-labelledby":"main-tab"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group file-upload"},[""!==t.personState.person.photo&&null!==t.personState.person.photo?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.imageModal",modifiers:{imageModal:!0}}]},[a("div",{staticClass:"image",style:"background-image: url("+t.resolvePhotoSrc+")"})]):a("img",{staticClass:"photo",attrs:{src:t.resolvePhotoSrc},on:{click:function(e){return t.$refs.photo.click()}}}),a("input",{ref:"photo",staticClass:"form-control-file",attrs:{type:"file",accept:"image/jpeg,image/png,image/gif",disabled:!t.hasWrite},on:{change:t.uploadPhoto}}),""!==t.resolvePhotoSrc?a("button",{on:{click:function(e){return t.deletePhoto()}}},[t._v("×")]):t._e()],1)]),a("div",{staticClass:"col-10"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonLastname"}},[t._v("Фамилия *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.lastname,expression:"personState.person.lastname"}],staticClass:"form-control",attrs:{type:"text",id:"singlePersonLastname",required:"",placeholder:"Фамилия",disabled:!t.hasWrite},domProps:{value:t.personState.person.lastname},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"lastname",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonFirstname"}},[t._v("Имя *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.firstname,expression:"personState.person.firstname"}],staticClass:"form-control",attrs:{type:"text",id:"singlePersonFirstname",required:"",placeholder:"Имя",disabled:!t.hasWrite},domProps:{value:t.personState.person.firstname},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"firstname",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonMiddlename"}},[t._v("Отчество")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.middlename,expression:"personState.person.middlename"}],staticClass:"form-control",attrs:{type:"text",id:"singlePersonMiddlename",placeholder:"Отчество",disabled:!t.hasWrite},domProps:{value:t.personState.person.middlename},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"middlename",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonDateOfBirth"}},[t._v("Дата рождения")]),a("date-picker",{attrs:{id:"singlePersonDateOfBirth",format:"DD.MM.YYYY",valueType:"DD.MM.YYYY",editable:!0,"input-class":"form-control",placeholder:"Дата Рождения",disabled:!t.hasWrite},model:{value:t.resolvedDate,callback:function(e){t.resolvedDate=e},expression:"resolvedDate"}})],1)]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonPost"}},[t._v("Должность")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.post,expression:"personState.person.post"}],staticClass:"form-control",attrs:{type:"text",id:"singlePersonPost",placeholder:"Должность",disabled:!t.hasWrite},domProps:{value:t.personState.person.post},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"post",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonStatus"}},[t._v("Статус")]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.resolvedStatus,expression:"resolvedStatus"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"singlePersonStatus",disabled:!t.hasWrite},domProps:{checked:Array.isArray(t.resolvedStatus)?t._i(t.resolvedStatus,null)>-1:t.resolvedStatus},on:{change:function(e){var a=t.resolvedStatus,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=null,o=t._i(a,s);r.checked?o<0&&(t.resolvedStatus=a.concat([s])):o>-1&&(t.resolvedStatus=a.slice(0,o).concat(a.slice(o+1)))}else t.resolvedStatus=n}}}),t._m(3)])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("phones",{attrs:{disabled:!t.hasWrite},model:{value:t.personState.person.phones,callback:function(e){t.$set(t.personState.person,"phones",e)},expression:"personState.person.phones"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Адрес")]),a("vue-dadata",{attrs:{onChange:t.changeAddress,query:t.personState.person.address?t.personState.person.address.unrestricted_value:"",token:t.dadataApiKey,disabled:!t.hasWrite}}),t.tszh?a("span",{staticClass:"form-group-info"},[a("i",{staticClass:"fa fa-building",attrs:{"aria-hidden":"true"}}),t._v("\n                                По данному адресу найдено ТСЖ "),a("b",[t._v('"'+t._s(t.tszh.name)+'"')]),t._v(". Физическое лицо автоматически будет привязано к данному ТСЖ\n                            ")]):t._e(),t.tos?a("span",{staticClass:"form-group-info"},[a("i",{staticClass:"fa fa-cubes",attrs:{"aria-hidden":"true"}}),t._v("\n                                По данному адресу найдено ТОС "),a("b",[t._v('"'+t._s(t.tos.full_contractor.name)+'"')]),t._v(". Физическое лицо автоматически будет привязано к данному ТОС\n                            ")]):t._e()],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonPassportSeries"}},[t._v("Серия паспорта")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.passport_series,expression:"personState.person.passport_series"}],staticClass:"form-control",attrs:{type:"text",id:"singlePersonPassportSeries",placeholder:"Серия",disabled:!t.hasWrite},domProps:{value:t.personState.person.passport_series},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"passport_series",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonPassportNumber"}},[t._v("Номер паспорта")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.passport_number,expression:"personState.person.passport_number"}],staticClass:"form-control",attrs:{type:"text",id:"singlePersonPassportNumber",placeholder:"Номер",disabled:!t.hasWrite},domProps:{value:t.personState.person.passport_number},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"passport_number",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonPassportPassportIssuedBy"}},[t._v("Выдан кем")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.passport_issued_by,expression:"personState.person.passport_issued_by"}],staticClass:"form-control",attrs:{type:"text",id:"singlePersonPassportPassportIssuedBy",placeholder:"Выдан кем",disabled:!t.hasWrite},domProps:{value:t.personState.person.passport_issued_by},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"passport_issued_by",e.target.value)}}})])]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonPassportPassportIssuedWhen"}},[t._v("Выдан когда")]),a("date-picker",{attrs:{id:"singlePersonPassportPassportIssuedWhen",format:"DD.MM.YYYY",valueType:"DD.MM.YYYY",editable:!0,"input-class":"form-control",placeholder:"Выдан когда",disabled:!t.hasWrite},model:{value:t.resolvedDatePassport,callback:function(e){t.resolvedDatePassport=e},expression:"resolvedDatePassport"}})],1)]),a("div",{staticClass:"col-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonPassportDepartmentNumber"}},[t._v("Номер подразделения")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.passport_department_number,expression:"personState.person.passport_department_number"}],staticClass:"form-control",attrs:{type:"text",id:"singlePersonPassportDepartmentNumber",placeholder:"Номер подразделения",disabled:!t.hasWrite},domProps:{value:t.personState.person.passport_department_number},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"passport_department_number",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singlePersonOwn"}},[t._v("Данные о собственности")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.personState.person.own,expression:"personState.person.own"}],staticClass:"form-control",attrs:{id:"singlePersonOwn",placeholder:"Данные о собственности",disabled:!t.hasWrite},domProps:{value:t.personState.person.own},on:{input:function(e){e.target.composing||t.$set(t.personState.person,"own",e.target.value)}}})])])])])]),a("div",{staticClass:"tab-pane fade",attrs:{id:"history",role:"tabpanel","aria-labelledby":"history-tab"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("history",{attrs:{object:"person"},model:{value:t.personState.person.history,callback:function(e){t.$set(t.personState.person,"history",e)},expression:"personState.person.history"}})],1)])])]),t._m(4)]),a("footer",{staticClass:"content-footer"},[t.hasWrite?a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.hasChanges},on:{click:t.save}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n            Сохранить\n        ")]):a("button",{staticClass:"btn btn-warning",on:{click:t.toggleHasWrite}},[a("i",{staticClass:"fa fa-pencil"}),t._v("\n            Редактировать\n        ")]),a("button",{staticClass:"btn btn-info",on:{click:t.back}},[a("i",{staticClass:"fa fa-angle-left"}),t._v("\n            К списку\n        ")])]),a("image-modal",{model:{value:t.resolvePhotoSrc,callback:function(e){t.resolvePhotoSrc=e},expression:"resolvePhotoSrc"}})],1)},ua=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#main",role:"tab","aria-controls":"main","aria-selected":"true"}},[t._v("\n                Основные сведения\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#history",role:"tab","aria-controls":"history","aria-selected":"false"}},[t._v("\n                История\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#deputies",role:"tab","aria-controls":"deputies","aria-selected":"false"}},[t._v("\n                Депутаты\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"form-check-label",attrs:{for:"singlePersonStatus"}},[t._v("VIP-статус "),a("i",{staticClass:"fas fa-crown"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-pane fade",attrs:{id:"deputies",role:"tabpanel","aria-labelledby":"deputies-tab"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"alert alert-info"},[t._v("\n                                Раздел находится в разработке\n                            ")])])])])])])}],da=a("ec45"),pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[t.historyState.histories&&t.historyState.histories.length>0?a("table",{staticClass:"note-list-items"},[a("tbody",t._l(t.historyState.histories,(function(e,r){return a("tr",{staticClass:"item"},[a("td",{staticClass:"cell-value"},["system"===e.type?a("i",{staticClass:"fa fa-info-circle",attrs:{title:"Системная запись"}}):t._e(),t._v("\n                "+t._s(e.text)+"\n            ")]),a("td",{staticClass:"cell-author"},[a("label",{staticClass:"author-name"},[t._v(t._s(e.create_user.person.lastname)+" "+t._s(e.create_user.person.firstname)+" "+t._s(e.create_user.person.middlename))]),a("label",{staticClass:"author-post"},[t._v(t._s(e.create_user.post))]),a("label",{staticClass:"datetime"},[t._v(t._s(t.getDateFormat(e.created_at)))])]),a("td",{staticClass:"cell-action"},["user"===e.type?a("button",{staticClass:"btn btn-default",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.remove(e)}}},[t._v("×")]):t._e()])])})),0)]):t._e(),a("table",{staticClass:"note-list-items model"},[a("tr",[a("td",{staticClass:"cell-value",attrs:{rowspan:"2"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.historyState.history.text,expression:"historyState.history.text"}],staticClass:"form-control",attrs:{placeholder:"Примечание"},domProps:{value:t.historyState.history.text},on:{input:function(e){e.target.composing||t.$set(t.historyState.history,"text",e.target.value)}}})]),a("td",{staticClass:"cell-action"},[a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.historyState.history.text},on:{click:t.add}},[t._v("+")])])])]),a("sure-modal")],1)},ma=[],fa=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeValue",value:function(){this.setHistories({histories:this.value})}},{key:"mounted",value:function(){this.setHistories({histories:this.value})}},{key:"add",value:function(){this.addHistory({id:this.personState.person.id,object:this.object}),this.unsetHistory()}},{key:"remove",value:function(t){var e=this;this.setSureModal({title:"Удалить запись?",text:'Вы уверены, что хотите удалить запись "'.concat(t.text,'" из системы?'),action:function(){var a=Object(nt["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.setHistory(t),e.removeHistory({id:e.personState.person.id,object:e.object}),e.unsetHistory();case 3:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}},{key:"getDateFormat",value:function(t){var e=new Date(t),a=e.getDate()<10?"0".concat(e.getDate()):e.getDate(),r=e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,n=e.getFullYear(),s=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),o=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(a,".").concat(r,".").concat(n," ").concat(s,":").concat(o)}}]),e}(p["f"]);Object(d["a"])([m["a"]],fa.prototype,"setHistories",void 0),Object(d["a"])([m["a"]],fa.prototype,"addHistory",void 0),Object(d["a"])([m["a"]],fa.prototype,"removeHistory",void 0),Object(d["a"])([m["a"]],fa.prototype,"setHistory",void 0),Object(d["a"])([m["a"]],fa.prototype,"unsetHistory",void 0),Object(d["a"])([m["a"]],fa.prototype,"setSureModal",void 0),Object(d["a"])([Object(p["d"])()],fa.prototype,"value",void 0),Object(d["a"])([Object(p["d"])()],fa.prototype,"object",void 0),Object(d["a"])([Object(m["b"])("administratorPerson")],fa.prototype,"personState",void 0),Object(d["a"])([Object(m["b"])("user")],fa.prototype,"userState",void 0),Object(d["a"])([Object(m["b"])("history")],fa.prototype,"historyState",void 0),Object(d["a"])([Object(p["g"])("value")],fa.prototype,"onChangeValue",null),fa=Object(d["a"])([Object(p["a"])({components:{SureModal:kt}})],fa);var va=fa,ha=va,ba=Object(T["a"])(ha,pa,ma,!1,null,null,null),ya=ba.exports,ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",[t._v("Телефоны")]),a("table",{staticClass:"phones-list-items"},[a("tbody",t._l(t.phonesState.phones,(function(e,r){return a("tr",{staticClass:"item"},[a("td",{staticClass:"cell-type"},[t._v(t._s(e.type))]),a("td",{staticClass:"cell-value"},[a("a",{attrs:{href:"tel:"+e.value,title:e.value}},[t._v(t._s(e.value))])]),a("td",{staticClass:"cell-action"},[a("button",{staticClass:"btn",on:{click:function(e){return t.remove(r)}}},[t._v("×")])])])})),0),a("tfoot",[t.disabled?t._e():a("tr",[a("td",{staticClass:"cell-type"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.phonesState.phone.type,expression:"phonesState.phone.type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.phonesState.phone,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Домашний"}},[t._v("Домашний")]),a("option",{attrs:{value:"Рабочий"}},[t._v("Рабочий")]),a("option",{attrs:{value:"Мобильный"}},[t._v("Мобильный")])])]),a("td",{staticClass:"cell-value"},[a("the-mask",{staticClass:"form-control",attrs:{mask:["#(###)###-##-##","#(####)##-##-##"],id:"singlePersonPhones",type:"text"},model:{value:t.phonesState.phone.value,callback:function(e){t.$set(t.phonesState.phone,"value",e)},expression:"phonesState.phone.value"}})],1),a("td",{staticClass:"cell-action"},[a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.phonesState.phone.value},on:{click:function(e){return t.add()}}},[t._v("+")])])])])])])},_a=[],Oa=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeValue",value:function(){this.setPhones({phones:this.value})}},{key:"mounted",value:function(){this.setPhones({phones:this.value})}},{key:"add",value:function(){this.addPhone({}),this.unsetPhone()}},{key:"remove",value:function(t){this.removePhone({index:t})}}]),e}(p["f"]);Object(d["a"])([m["a"]],Oa.prototype,"setPhones",void 0),Object(d["a"])([m["a"]],Oa.prototype,"addPhone",void 0),Object(d["a"])([m["a"]],Oa.prototype,"removePhone",void 0),Object(d["a"])([m["a"]],Oa.prototype,"unsetPhone",void 0),Object(d["a"])([Object(p["d"])()],Oa.prototype,"value",void 0),Object(d["a"])([Object(p["d"])()],Oa.prototype,"disabled",void 0),Object(d["a"])([Object(m["b"])("user")],Oa.prototype,"userState",void 0),Object(d["a"])([Object(m["b"])("phones")],Oa.prototype,"phonesState",void 0),Object(d["a"])([Object(p["g"])("value")],Oa.prototype,"onChangeValue",null),Oa=Object(d["a"])([Object(p["a"])({components:{}})],Oa);var Ca=Oa,ja=Ca,Sa=Object(T["a"])(ja,ga,_a,!1,null,null,null),ka=Sa.exports;function wa(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function xa(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?wa(Object(a),!0).forEach((function(e){Object(bt["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wa(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ea=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.dadataApiKey=O,t.tszh=!1,t.tos=!1,t.person={id:0,firstname:"",lastname:"",middlename:"",fias_address_id:0},t.hasWrite=!1,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangePersonAddress",value:function(){this.tszh=!1,this.personState.person.address&&this.personState.person.address.fias_id&&(this.getTszhByAddress(),this.getTosByAddress())}},{key:"onChangeHistory",value:function(){this.personState.person.history=this.historyState.histories}},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.personId){t.next=5;break}this.hasWrite=!0,this.administratorPersonUnsetSingle(),t.next=7;break;case 5:return t.next=7,this.administratorPersonGetById({id:this.personId});case 7:this.person=xa({},this.personState.person);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"uploadPhoto",value:function(){var t=this.$refs.photo;if(t&&t.files&&0!==t.files.length){var e=t.files[0];this.administratorPersonUploadPhoto({file:e})}}},{key:"deletePhoto",value:function(){this.personState.person.photo=""}},{key:"changeAddress",value:function(t){this.personState.person.address=xa({},t.data,{unrestricted_value:t.unrestricted_value})}},{key:"save",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.parsePhones(),t.next=3,this.administratorPersonUpdate();case 3:0===this.personId&&this.$router.push("/administrator/person/".concat(this.personState.person.id)),this.person=xa({},this.personState.person),this.toggleHasWrite();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"parsePhones",value:function(){""!==this.phonesState.phone.value&&(this.addPhone({}),this.unsetPhone()),this.personState.person.phones=JSON.stringify(this.phonesState.phones)}},{key:"back",value:function(){this.$router.push("/administrator/persons/")}},{key:"getTszhByAddress",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"tszh/fias/").concat(this.personState.person.address.fias_id));case 3:e=t.sent,this.tszh=""!==e.data&&xa({},e.data),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getTosByAddress",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"tos/fias/").concat(this.personState.person.address.fias_id));case 3:e=t.sent,this.tos=""!==e.data&&xa({},e.data),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"toggleHasWrite",value:function(){this.hasWrite=!this.hasWrite}},{key:"resolvePhotoSrc",get:function(){return""===this.personState.person.photo||null===this.personState.person.photo?"/images/social.png":"".concat(_,"/storage/").concat(this.personState.person.photo)}},{key:"resolvedDate",get:function(){if(this.personState.person.date_of_birth){var t=this.personState.person.date_of_birth.split("-");return"".concat(t[2],".").concat(t[1],".").concat(t[0])}return""},set:function(t){var e=t.split(".");this.personState.person.date_of_birth="".concat(e[2],"-").concat(e[1],"-").concat(e[0])}},{key:"resolvedDatePassport",get:function(){if(this.personState.person.passport_issued_when){var t=this.personState.person.passport_issued_when.split("-");return"".concat(t[2],".").concat(t[1],".").concat(t[0])}return""},set:function(t){var e=t.split(".");this.personState.person.passport_issued_when="".concat(e[2],"-").concat(e[1],"-").concat(e[0])}},{key:"personId",get:function(){return this.$route.params.id?parseInt(this.$route.params.id,10):0}},{key:"resolvedStatus",get:function(){return"vip"===this.personState.person.status},set:function(t){this.personState.person.status=!0===t?"vip":null}},{key:"hasChanges",get:function(){return(0===this.personId||0!==this.person.id)&&(!Rt(this.person,this.personState.person)||!Rt(this.person.phones,this.phonesState.phones))}}]),e}(p["f"]);Object(d["a"])([m["a"]],Ea.prototype,"administratorPersonGetById",void 0),Object(d["a"])([m["a"]],Ea.prototype,"administratorPersonUpdate",void 0),Object(d["a"])([m["a"]],Ea.prototype,"administratorPersonUploadPhoto",void 0),Object(d["a"])([m["a"]],Ea.prototype,"administratorPersonSetSingle",void 0),Object(d["a"])([m["a"]],Ea.prototype,"administratorPersonUnsetSingle",void 0),Object(d["a"])([m["a"]],Ea.prototype,"addPhone",void 0),Object(d["a"])([m["a"]],Ea.prototype,"unsetPhone",void 0),Object(d["a"])([Object(m["b"])("administratorPerson")],Ea.prototype,"personState",void 0),Object(d["a"])([Object(m["b"])("user")],Ea.prototype,"userState",void 0),Object(d["a"])([Object(m["b"])("phones")],Ea.prototype,"phonesState",void 0),Object(d["a"])([Object(m["b"])("history")],Ea.prototype,"historyState",void 0),Object(d["a"])([Object(p["e"])()],Ea.prototype,"dadataApiKey",void 0),Object(d["a"])([Object(p["e"])()],Ea.prototype,"tszh",void 0),Object(d["a"])([Object(p["e"])()],Ea.prototype,"tos",void 0),Object(d["a"])([Object(p["e"])()],Ea.prototype,"person",void 0),Object(d["a"])([Object(p["e"])()],Ea.prototype,"hasWrite",void 0),Object(d["a"])([Object(p["g"])("personState.person.address",{deep:!0})],Ea.prototype,"onChangePersonAddress",null),Object(d["a"])([Object(p["g"])("historyState.histories",{deep:!0})],Ea.prototype,"onChangeHistory",null),Ea=Object(d["a"])([Object(p["a"])({components:{DatePicker:da["default"],ImageModal:Ut,History:ya,Phones:ka}})],Ea);var Ta=Ea,Pa=Ta,Fa=Object(T["a"])(Pa,ca,ua,!1,null,null,null),$a=Fa.exports,Ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v('Пользователи контрагента "'+t._s(t.contractorState.contractor.name)+'"')]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.singleUserModal",modifiers:{singleUserModal:!0}}],attrs:{variant:"info"},on:{click:t.createUser}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать нового\n    ")]),a("button",{staticClass:"btn btn-info",on:{click:t.excelExport}},[a("i",{staticClass:"fa fa-floppy-o"}),t._v("\n        Выгрузить в Excel\n    ")]),a("button",{staticClass:"btn btn-info btn-right",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("\n        Назад\n    ")]),a("vue-table-dynamic",{ref:"userTable",attrs:{params:t.users},on:{"cell-click":t.showSingleUserModal},scopedSlots:t._u([{key:"column-6",fn:function(e){var r=e.props;return[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.singleUserModal",modifiers:{singleUserModal:!0}}],attrs:{variant:"default"},on:{click:function(e){return t.userSetSingle(r.cellData)}}},[t._v("\n                Изменить\n            ")]),a("button",{staticClass:"btn btn-default",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent(r.cellData)}}},[t._v("\n                Удалить\n            ")])]}}])}),a("single-user"),a("sure-modal")],1)},La=[],Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"singleUserModal",size:"xl",title:0===t.userState.user.id?"Регистрация пользователя":"Изменение пользователя: "+t.userState.user.email}},[a("b-container",[a("form",{staticClass:"modal-dialog-user"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleUserEmail"}},[t._v("Адрес электронной почты *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userState.user.email,expression:"userState.user.email"}],staticClass:"form-control",attrs:{type:"email",id:"singleUserEmail",required:"",placeholder:"user@mail.ru"},domProps:{value:t.userState.user.email},on:{input:function(e){e.target.composing||t.$set(t.userState.user,"email",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleUserRole"}},[t._v("Роль пользователя")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.userState.user.role,expression:"userState.user.role"}],staticClass:"form-control",attrs:{id:"singleUserRole"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.userState.user,"role",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"admin"}},[t._v("Управляющий")]),a("option",{attrs:{value:"superadmin"}},[t._v("Администратор")])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleUserPost"}},[t._v("Должность")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userState.user.post,expression:"userState.user.post"}],staticClass:"form-control",attrs:{type:"text",id:"singleUserPost",required:""},domProps:{value:t.userState.user.post},on:{input:function(e){e.target.composing||t.$set(t.userState.user,"post",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("awesome-selector",{attrs:{title:"Физическое лицо",id:"singleUserPerson",list:t.resolvedPersons},on:{onchange:t.personChange},model:{value:t.resolvedPerson,callback:function(e){t.resolvedPerson=e},expression:"resolvedPerson"}})],1),a("div",{staticClass:"alert alert-info"},[t._v('\n                Если вы не хотите изменять пароль пользователя, оставьте поле "Пароль" пустым\n            ')]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleUserPassword"}},[t._v("Пароль *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userState.user.password,expression:"userState.user.password"}],staticClass:"form-control",attrs:{type:"password",id:"singleUserPassword",required:""},domProps:{value:t.userState.user.password},on:{input:function(e){e.target.composing||t.$set(t.userState.user,"password",e.target.value)}}})])])]),a("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-button",{attrs:{variant:"primary","data-dismiss":"modal"},on:{click:t.save}},[t._v("\n            Сохранить\n        ")]),a("b-button",{attrs:{variant:"secondary"},on:{click:t.close}},[t._v("\n            Закрыть\n        ")])],1)],1)},Ia=[],Da=a("021b"),Na=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){this.administratorPersonGetAll()}},{key:"personChange",value:function(t){this.userState.user.person_id=0!==t.id?t.id:null,this.resolvedPerson=t}},{key:"save",value:function(){this.administratorUserUpdate(),this.$bvModal.hide("singleUserModal")}},{key:"close",value:function(){this.$bvModal.hide("singleUserModal")}},{key:"resolvedPersons",get:function(){return this.personState.persons.map((function(t){return{id:t.id,title:"".concat(t.lastname," ").concat(t.firstname," ").concat(t.middlename)}}))}},{key:"resolvedPerson",get:function(){return null===this.userState.user.person||void 0===this.userState.user.person?{id:0,title:""}:{id:this.userState.user.person.id,title:"".concat(this.userState.user.person.lastname," ").concat(this.userState.user.person.firstname," ").concat(this.userState.user.person.middlename)}},set:function(t){var e=t.title.split(" ");this.userState.user.person=0!==t.id?{id:t.id,firstname:void 0!==e[1]?e[1]:"",lastname:void 0!==e[0]?e[0]:"",middlename:void 0!==e[2]?e[2]:"",fias_address_id:null}:{id:0,firstname:"",lastname:"",middlename:"",fias_address_id:null}}}]),e}(p["f"]);Object(d["a"])([m["a"]],Na.prototype,"administratorUserUpdate",void 0),Object(d["a"])([m["a"]],Na.prototype,"administratorPersonGetAll",void 0),Object(d["a"])([Object(m["b"])("administratorUser")],Na.prototype,"userState",void 0),Object(d["a"])([Object(m["b"])("administratorPerson")],Na.prototype,"personState",void 0),Na=Object(d["a"])([Object(p["a"])({components:{Form:Da["a"],AwesomeSelector:xe}})],Na);var Aa=Na,za=Aa,Ga=Object(T["a"])(za,Ra,Ia,!1,null,null,null),Ua=Ga.exports,Ba=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.users={data:[],header:"row",stripe:!0,enableSearch:!0,sort:[0,1,2,3,4,5]},t.tableIdIndex=6,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onUsers",value:function(){var t=this;this.users.data=[["Фамилия","Имя","Отчество","Логин","Должность","Роль",""]],this.userState.users.forEach((function(e,a){t.users.data.push([e.person?e.person.lastname:"",e.person?e.person.firstname:"",e.person?e.person.middlename:"",e.email,e.post,t.resolvedRole(e),e.id.toString()])}))}},{key:"onContractorIdChange",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorUserGetAllByContractor({contractorId:this.$route.params.id});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorContractorGetById({id:this.$route.params.id});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"userSetSingle",value:function(t){var e=yt(this.userState.users,parseInt(t,10));this.administratorUserSetSingle(e)}},{key:"showSingleUserModal",value:function(t,e,a){if(e!==this.tableIdIndex){var r=this.$refs.userTable;if(r){var n=r.tableData.rows[t].cells[this.tableIdIndex].data;this.userSetSingle(n),this.$bvModal.show("singleUserModal")}}}},{key:"createUser",value:function(){this.administratorUserUnsetSingle({contractorId:this.$route.params.id})}},{key:"setSureModalContent",value:function(t){var e=this,a=yt(this.userState.users,parseInt(t,10));this.setSureModal({title:"Удалить пользователя?",text:'Вы уверены, что хотите удалить пользователя "'.concat(a.email,'" из системы?'),action:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.administratorUserSetSingle(a),t.next=3,e.administratorUserDelete();case 3:e.administratorUserUnsetSingle({contractorId:0});case 4:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()})}},{key:"excelExport",value:function(){var t=this,e=this.$refs.userTable;if(e){var a=e.tableData;if(a&&a.activatedRows){var r=a.activatedRows.map((function(e,a){var r=0===a?"№ п/п":a;return[r].concat(e.cells.map((function(a,r){if(r!==t.tableIdIndex)return r+1<e.cells.length&&a.data})))}));y.a.post("".concat(g,"export/excel"),{data:r}).then((function(t){window.open("".concat(_).concat(t.data))}))}}}},{key:"resolvedRole",value:function(t){return"admin"===t.role?"Управляющий":"Администратор"}}]),e}(p["f"]);Object(d["a"])([m["a"]],Ba.prototype,"administratorUserGetAllByContractor",void 0),Object(d["a"])([m["a"]],Ba.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],Ba.prototype,"administratorUserDelete",void 0),Object(d["a"])([m["a"]],Ba.prototype,"administratorUserSetSingle",void 0),Object(d["a"])([m["a"]],Ba.prototype,"administratorUserUnsetSingle",void 0),Object(d["a"])([m["a"]],Ba.prototype,"administratorContractorGetById",void 0),Object(d["a"])([Object(m["b"])("administratorContractor")],Ba.prototype,"contractorState",void 0),Object(d["a"])([Object(m["b"])("administratorUser")],Ba.prototype,"userState",void 0),Object(d["a"])([Object(p["e"])()],Ba.prototype,"users",void 0),Object(d["a"])([Object(p["e"])()],Ba.prototype,"tableIdIndex",void 0),Object(d["a"])([Object(p["g"])("userState.users",{deep:!0})],Ba.prototype,"onUsers",null),Object(d["a"])([Object(p["g"])("this.$route.params.id",{immediate:!0,deep:!0})],Ba.prototype,"onContractorIdChange",null),Ba=Object(d["a"])([Object(p["a"])({components:{SingleUser:Ua,SureModal:kt}})],Ba);var Va=Ba,qa=Va,Wa=Object(T["a"])(qa,Ma,La,!1,null,null,null),Ha=Wa.exports,Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Справочник модулей")]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleModuleModal"},on:{click:t.administratorModuleUnsetSingle}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.moduleState.modules,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleModuleModal"},on:{click:function(a){return t.administratorModuleSetSingle(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-6"},[t._l(e.layers,(function(e,r){return r<=2?a("label",[t._v(t._s(e.title))]):t._e()})),e.layers.length>3?a("label",[t._v("... (всего "+t._s(e.layers.length)+")")]):t._e()],2)])})),t._m(1)],2),a("single-module"),a("sure-modal")],1)},Ya=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Слои")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Слои")])])}],Ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleModuleModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleModuleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleModuleModalLabel"}},[0===t.moduleState.module.id?a("span",[t._v("Создание нового модуля")]):a("span",[t._v('Изменение модуля "'+t._s(t.moduleState.module.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleModuleTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.moduleState.module.title,expression:"moduleState.module.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleModuleTitle",required:"",placeholder:"Наименование модуля"},domProps:{value:t.moduleState.module.title},on:{input:function(e){e.target.composing||t.$set(t.moduleState.module,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleModuleDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleModuleDescription",editorToolbar:t.toolbar},model:{value:t.moduleState.module.description,callback:function(e){t.$set(t.moduleState.module,"description",e)},expression:"moduleState.module.description"}})],1)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.administratorModuleUpdate}},[t._v("Сохранить")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},Za=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Xa=a("5873"),Qa=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.toolbar=[["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([m["a"]],Qa.prototype,"administratorModuleUpdate",void 0),Object(d["a"])([Object(m["b"])("administratorModule")],Qa.prototype,"moduleState",void 0),Object(d["a"])([Object(p["e"])()],Qa.prototype,"toolbar",void 0),Qa=Object(d["a"])([Object(p["a"])({components:{VueEditor:Xa["a"]}})],Qa);var tr=Qa,er=tr,ar=Object(T["a"])(er,Ka,Za,!1,null,null,null),rr=ar.exports,nr=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorModuleGetAll();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить модуль?",text:'Вы уверены, что хотите удалить модуль "'.concat(t.title,'" из системы?'),action:function(){var a=Object(nt["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.administratorModuleSetSingle(t),a.next=3,e.administratorModuleDelete();case 3:e.administratorModuleUnsetSingle();case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}}]),e}(p["f"]);Object(d["a"])([m["a"]],nr.prototype,"administratorModuleGetAll",void 0),Object(d["a"])([m["a"]],nr.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],nr.prototype,"administratorModuleDelete",void 0),Object(d["a"])([m["a"]],nr.prototype,"administratorModuleSetSingle",void 0),Object(d["a"])([m["a"]],nr.prototype,"administratorModuleUnsetSingle",void 0),Object(d["a"])([Object(m["b"])("administratorModule")],nr.prototype,"moduleState",void 0),nr=Object(d["a"])([Object(p["a"])({components:{SingleModule:rr,SureModal:kt}})],nr);var sr=nr,or=sr,ir=Object(T["a"])(or,Ja,Ya,!1,null,null,null),lr=ir.exports,cr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Справочник картографических слоёв")]),a("button",{staticClass:"btn btn-info",attrs:{"test-tag":"singleLayerModal","data-toggle":"modal","data-target":"#singleLayerModal"},on:{click:t.createLayer}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.layerState.layers,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleLayerModal"},on:{click:function(a){return t.editLayer(e)}}},[t._v("Изменить\n                    ")]),a("button",{staticClass:"btn-info",on:{click:function(a){return t.copyLayer(e)}}},[t._v("Дублировать\n                    ")]),a("button",{staticClass:"btn-danger",attrs:{"test-tag":e.title+"_delete","data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.setSureModalContent(e)}}},[t._v("Удалить\n                    ")])])]),a("div",{staticClass:"col-3"},[a("label",{staticClass:"title"},[t._v(t._s(t.getGeometryTypeTitle(e.geometry_type)))])]),a("div",{staticClass:"col-3"},[a("label",{staticClass:"title"},[t._v(t._s(e.module.title))])])])})),t._m(1)],2),a("single-layer"),a("sure-modal")],1)},ur=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-3"},[t._v("Геотип")]),a("div",{staticClass:"col-3"},[t._v("Включен в модуль")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-3"},[t._v("Геотип")]),a("div",{staticClass:"col-3"},[t._v("Включен в модуль")])])}],dr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleLayerModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleLayerModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleLayerModalLabel"}},[0===t.layerState.layer.id?a("span",[t._v("Создание нового слоя")]):a("span",[t._v('Изменение слоя "'+t._s(t.layerState.layer.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("b-tabs",[a("b-tab",{attrs:{title:"Свойства",active:""}},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerAlias"}},[t._v("Алиас *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.alias,expression:"layerState.layer.alias"}],staticClass:"form-control",attrs:{type:"text",id:"singleLayerAlias",required:"",placeholder:"Алиас слоя"},domProps:{value:t.layerState.layer.alias},on:{input:function(e){e.target.composing||t.$set(t.layerState.layer,"alias",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.title,expression:"layerState.layer.title"}],staticClass:"form-control",attrs:{type:"text",id:"singleLayerTitle",required:"",placeholder:"Наименование слоя"},domProps:{value:t.layerState.layer.title},on:{input:function(e){e.target.composing||t.$set(t.layerState.layer,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleLayerDescription",editorToolbar:t.toolbar},model:{value:t.layerState.layer.description,callback:function(e){t.$set(t.layerState.layer,"description",e)},expression:"layerState.layer.description"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerModuleId"}},[t._v("Включить в модуль *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.module_id,expression:"layerState.layer.module_id"}],staticClass:"form-control",attrs:{id:"singleLayerModuleId",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.layerState.layer,"module_id",e.target.multiple?a:a[0])}}},t._l(t.moduleState.modules,(function(e){return a("option",{attrs:{title:e.description},domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.title)+"\n                                    ")])})),0)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerVisibility"}},[t._v("Видимость слоя *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.visibility,expression:"layerState.layer.visibility"}],staticClass:"form-control",attrs:{id:"singleLayerVisibility",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.layerState.layer,"visibility",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"false",title:"Скрытый слой"}},[t._v("Скрытый слой")]),a("option",{attrs:{value:"true",title:"Отображаемый слой"}},[t._v("Отображаемый слой")])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleLayerGeometryType"}},[t._v("Тип геометрии *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layerState.layer.geometry_type,expression:"layerState.layer.geometry_type"}],staticClass:"form-control",attrs:{id:"singleLayerGeometryType",required:"",disabled:0!==t.layerState.layer.id},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.layerState.layer,"geometry_type",e.target.multiple?a:a[0])},t.geometryTypeChanged]}},[a("option",{attrs:{value:"point"}},[t._v("Точечный элемент")]),a("option",{attrs:{value:"linestring"}},[t._v("Линейный элемент")]),a("option",{attrs:{value:"polygon"}},[t._v("Полигональный элемент")])])])])]),a("b-tab",{ref:"style-tab",attrs:{title:"Стиль"},on:{click:t.resizeMap}},[a("style-editor",{attrs:{geometryType:t.layerState.layer.geometry_type}})],1),a("b-tab",{ref:"style-tab",attrs:{title:"Форма"}},[a("resolved-field")],1)],1)],1),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","test-tag":"save","data-dismiss":"modal"},on:{click:t.updateSingleLayer}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},pr=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],mr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"style-editor"},[""!==t.styleEditorState.geometryType?a("div",{staticClass:"style-editor-fields"},[a("vue-scrollbar",{ref:"Scrollbar",staticClass:"scrollbar scrollbar-min"},["point"===t.styleEditorState.geometryType?a("point-fields"):t._e(),"linestring"===t.styleEditorState.geometryType?a("linestring-fields"):t._e(),"polygon"===t.styleEditorState.geometryType?a("polygon-fields"):t._e()],1)],1):t._e(),a("div",{staticClass:"style-editor-map clearfix"},[a("ol-map")],1)])},fr=[],vr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"map"}}),a("div",{attrs:{id:"mouse-position"}}),a("div",{attrs:{id:"current-zoom"}},[t._v(t._s(t.mapState.properties.zoom))]),a("div",{attrs:{id:"layers",title:"Выбрать подложку"}},[a("button",{on:{click:function(e){t.showLayersList=!t.showLayersList}}},[a("i",{staticClass:"fa fa-map-o"})]),t.showLayersList?a("ul",[a("li",[a("button",{on:{click:function(e){return t.changeTile("osm")}}},[t._v("Open Street Map")])]),a("li",[a("button",{on:{click:function(e){return t.changeTile("yandex")}}},[t._v("Яндекс Карты")])]),a("li",[a("button",{on:{click:function(e){return t.changeTile("gis")}}},[t._v("2GIS")])])]):t._e()])])},hr=[],br=a("64d9"),yr=a("2ce2"),gr=a("c807"),_r=a("ac29"),Or=(a("7514"),a("8449"),a("6c7b"),a("8682")),Cr=a("83a6"),jr=a("6cbf"),Sr=a("ce2c"),kr=a("35d8"),wr=a("8295"),xr=a("6c77"),Er=function(t,e){if(!e)return t;var a=Math.floor(255*e/100).toString(16);return t+(a.length%2?"0"+a:a)},Tr=function(t,e){var a={};if(t.stroke&&(a=Object.assign({},{stroke:new Or["a"]({color:Er(t.stroke.color,100-t.stroke.opacity),width:t.stroke.width})})),t.fill&&(a=Object.assign({},a,{fill:new Cr["a"]({color:Er(t.fill.color,100-t.fill.opacity)})})),"icon"===t.pointType&&t.icon)a=Object.assign({},a,{image:new jr["a"]({src:t.icon.src,anchor:t.icon.anchor,anchorXUnits:"pixels",anchorYUnits:"pixels",opacity:(100-t.icon.opacity)/100,scale:t.icon.scale,rotation:t.icon.rotation*Math.PI/180,rotateWithView:!0})});else if(t.shape){var r={fill:new Cr["a"]({color:Er(t.shape.fill.color,100-t.shape.fill.opacity)}),stroke:new Or["a"]({color:Er(t.shape.stroke.color,100-t.shape.stroke.opacity),width:t.shape.stroke.width}),radius:t.shape.radius};void 0!==t.shape.points&&t.shape.points>10?a=Object.assign({},a,{image:new Sr["a"](r)}):void 0!==t.shape.points&&(r=Object.assign({},r,{points:t.shape.points,rotation:t.shape.rotation}),a=Object.assign({},a,{image:new kr["a"](r)}))}if(!0===t.showTitle&&e){var n={text:e,font:t.font.font,textBaseline:t.font.textBaseline,fill:new Cr["a"](t.font.fill)};t.font.stroke&&(n=Object.assign({},n,{stroke:new Or["a"](t.font.stroke)})),t.font.offsetY&&(n=Object.assign({},n,{offsetY:t.font.offsetY})),t.font.placement&&(n=Object.assign({},n,{placement:t.font.placement})),a=Object.assign({},a,{text:new wr["a"](n),cursor:"pointer"})}return new xr["c"](a)},Pr=a("5eee"),Fr=a("a2c7"),$r=a("3e6b"),Mr=a("5831"),Lr=a("55bd"),Rr=a("020f"),Ir=a("a568"),Dr=a("256f"),Nr=a("bc81"),Ar=a("21bc"),zr=function(t,e,a,r,n){proj4.defs("EPSG:3395","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs"),Object(Nr["a"])(proj4),Object(Dr["j"])("EPSG:3395").setExtent([-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244]);var s=new Rr["a"]({coordinateFormat:Object(Ir["c"])(4),projection:"EPSG:4326",className:"map-mouse-position",target:document.getElementById("mouse-position"),undefinedHTML:"&nbsp;"});return new Pr["a"]({layers:r,target:n||"map",controls:Object(Ar["a"])().extend([s]),view:new Fr["a"]({center:Object(Dr["r"])([t,e],"EPSG:4326","EPSG:3395"),projection:"EPSG:3395",zoom:a,extent:Object(Dr["s"])([-180,-80,180,80],"EPSG:4326","EPSG:3395")})})},Gr=function(){return new Mr["a"]({})},Ur=function(t){var e={id:0,showTitle:!0,font:{fill:{color:"#ffffff"},font:"16px Calibri, sans-serif",textBaseline:"middle"},pointType:"shape",shape:{fill:{color:"#a42038",opacity:10},stroke:{color:"#ffffff",opacity:0,width:1},points:11,radius:16,rotation:0}};return new $r["a"]({source:new Lr["a"]({distance:100,source:t}),style:function(t){var a=t.get("features").length;return Tr(e,a.toString())}})},Br=function(t,e){var a={id:0,showTitle:!0,font:{fill:{color:"#ffffff"},font:"16px Calibri, sans-serif",textBaseline:"middle"},pointType:"shape",shape:{fill:{color:"#a42038",opacity:10},stroke:{color:"#ffffff",opacity:0,width:1},points:11,radius:16,rotation:0}};t.setStyle((function(t){var r=t.get("features").length;if(1===r){var n=t.get("features")[0].getProperties(),s=e.find((function(t){return t.id===n.layer_id}));return Tr(s||a,n.title)}return Tr(a,r.toString())}))},Vr=function(t,e){var a=e.getGeometry().getExtent();a[0]===a[2]&&a[1]===a[3]?t.getView().animate({center:[(a[0]+a[2])/2,(a[1]+a[3])/2],zoom:18,duration:300}):t.getView().fit(a,{padding:[0,180,0,0],minResolution:5,duration:300})},qr=function(t,e){if(0!==e.length){var a=e[0].getGeometry().getExtent();e.forEach((function(t){var e=t.getGeometry().getExtent();a[0]>e[0]&&(a[0]=e[0]),a[1]>e[1]&&(a[1]=e[1]),a[2]<e[2]&&(a[2]=e[2]),a[3]<e[3]&&(a[3]=e[3])})),a[0]===a[2]&&a[1]===a[3]?t.getView().animate({center:[(a[0]+a[2])/2,(a[1]+a[3])/2],duration:300}):t.getView().fit(a,{padding:[0,180,0,0],minResolution:5,duration:300})}},Wr=a("d0e9"),Hr=a("2ef1"),Jr=a("480c"),Yr=a("089b"),Kr=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.showLayersList=!1,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"selected",value:function(t){if(0!==t.selected.length){var e=t.selected[0].getProperties();if(1===e.features.length)return e.features[0].getProperties()}return this.mapState.interaction.select.getFeatures().clear(),!1}},{key:"modifyend",value:function(t){var e=t.features.getArray()[0],a=e.getProperties();return a=void 0===a.id?a.features[0].getProperties():a,{properties:a,geom:(new br["a"]).writeFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3395"})}}},{key:"drawend",value:function(t){return{properties:t.feature.getProperties(),geom:(new br["a"]).writeFeature(t.feature,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3395"})}}},{key:"onChangeInteractionDrawMode",value:function(){this.createInteractions(),this.mapState.map.render()}},{key:"mounted",value:function(){this.init()}},{key:"init",value:function(){var t=this;this.mapState.tiles={osm:new Jr["a"]({title:"Open Street Map",source:new Wr["a"]}),yandex:new Jr["a"]({title:"Яндекс Карты",type:"base",source:new Hr["a"]({url:"http://vec01.maps.yandex.net/tiles?l=map&x={x}&y={y}&z={z}",projection:"EPSG:3395",tileGrid:Object(Yr["a"])({extent:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244]})}),visible:!1}),gis:new Jr["a"]({title:"Дубль Гис",type:"base",source:new Hr["a"]({url:"http://tile2.maps.2gis.com/tiles?x={x}&y={y}&z={z}"}),visible:!1})};var e=zr(this.mapState.properties.longitude,this.mapState.properties.latitude,this.mapState.properties.zoom,[this.mapState.tiles.osm,this.mapState.tiles.yandex,this.mapState.tiles.gis],this.mapState.properties.selectorMapContainer);this.mapState.interaction.select=new yr["a"],this.mapState.interaction.select.on("select",this.selected),e.addInteraction(this.mapState.interaction.select),e.on("moveend",(function(){t.getMapCenter()}));var a=Gr(),r=Ur(a);e.addLayer(r),this.createMap({map:e,source:a,layer:r})}},{key:"createInteractions",value:function(){if(this.removeInteractions(),this.editor&&"select"!==this.mapState.interaction.mode)if("modify"===this.mapState.interaction.mode){if(0===this.mapState.interaction.select.getFeatures().getLength()){var t=this.mapState.source.getFeatureById(this.modifyElement.id);this.mapState.interaction.select.getFeatures().push(t)}this.mapState.interaction.draw=new gr["a"]({features:this.mapState.interaction.select.getFeatures()}),this.mapState.interaction.draw.on("modifyend",this.modifyend),this.mapState.map.addInteraction(this.mapState.interaction.draw)}else this.mapState.interaction.draw=new _r["a"]({source:this.mapState.source,type:this.mapState.interaction.mode}),this.mapState.interaction.draw.on("drawend",this.drawend),this.mapState.map.addInteraction(this.mapState.interaction.draw);else this.mapState.interaction.select.getFeatures().clear()}},{key:"removeInteractions",value:function(){!1!==this.mapState.interaction.draw&&(this.mapState.map.removeInteraction(this.mapState.interaction.draw),this.mapState.interaction.draw=!1)}},{key:"changeTile",value:function(t){switch(t){case"yandex":this.mapState.tiles.osm.setVisible(!1),this.mapState.tiles.yandex.setVisible(!0),this.mapState.tiles.gis.setVisible(!1);break;case"gis":this.mapState.tiles.osm.setVisible(!1),this.mapState.tiles.yandex.setVisible(!1),this.mapState.tiles.gis.setVisible(!0);break;default:this.mapState.tiles.osm.setVisible(!0),this.mapState.tiles.yandex.setVisible(!1),this.mapState.tiles.gis.setVisible(!1);break}this.showLayersList=!1}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("map")],Kr.prototype,"mapState",void 0),Object(d["a"])([Object(p["d"])(Boolean)],Kr.prototype,"editor",void 0),Object(d["a"])([Object(p["d"])()],Kr.prototype,"modifyElement",void 0),Object(d["a"])([m["a"]],Kr.prototype,"createMap",void 0),Object(d["a"])([m["a"]],Kr.prototype,"getMapCenter",void 0),Object(d["a"])([Object(p["e"])()],Kr.prototype,"showLayersList",void 0),Object(d["a"])([Object(p["b"])()],Kr.prototype,"selected",null),Object(d["a"])([Object(p["b"])()],Kr.prototype,"modifyend",null),Object(d["a"])([Object(p["b"])()],Kr.prototype,"drawend",null),Object(d["a"])([Object(p["g"])("mapState.interaction.mode")],Kr.prototype,"onChangeInteractionDrawMode",null),Kr=Object(d["a"])([Object(p["a"])({components:{}})],Kr);var Zr=Kr,Xr=Zr,Qr=Object(T["a"])(Xr,vr,hr,!1,null,null,null),tn=Qr.exports,en=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.pointType?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorShowTitle"}},[t._v("Отображать наименование?")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.showTitle,expression:"styleEditorState.style.showTitle"}],staticClass:"form-control",attrs:{id:"styleEditorShowTitle"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style,"showTitle",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Да")]),a("option",{attrs:{value:"false"}},[t._v("Нет")])])]):t._e(),t.styleEditorState.style.pointType?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointType"}},[t._v("Фигура или иконка")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.pointType,expression:"styleEditorState.style.pointType"}],staticClass:"form-control",attrs:{id:"styleEditorPointType"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style,"pointType",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"shape"}},[t._v("Фигура")]),a("option",{attrs:{value:"icon"}},[t._v("Иконка")])])]):t._e(),"shape"===t.styleEditorState.style.pointType?a("div",[t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет обводки")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.shape.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.shape.stroke,"color",e)},expression:"styleEditorState.style.shape.stroke.color"}})],1):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет заливки")]),a("color-picker",{on:{change:t.onChangeFillColor},model:{value:t.styleEditorState.style.shape.fill.color,callback:function(e){t.$set(t.styleEditorState.style.shape.fill,"color",e)},expression:"styleEditorState.style.shape.fill.color"}})],1):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeRadius"}},[t._v("Радиус фигуры")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.radius,expression:"styleEditorState.style.shape.radius"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeRadius",step:"1",min:"3",max:"20"},domProps:{value:t.styleEditorState.style.shape.radius},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape,"radius",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokePoints"}},[t._v("Количество вершин фигуры")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.points,expression:"styleEditorState.style.shape.points"}],staticClass:"form-control",attrs:{id:"styleEditorPointStrokePoints"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style.shape,"points",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"11"}},[t._v("Окружность")]),a("option",{attrs:{value:"3"}},[t._v("Треугольник")]),a("option",{attrs:{value:"4"}},[t._v("Квадрат")]),a("option",{attrs:{value:"5"}},[t._v("Пятиугольник (пентагон)")]),a("option",{attrs:{value:"6"}},[t._v("Шестиугольник (гексагон)")]),a("option",{attrs:{value:"7"}},[t._v("Семиугольник (гептагон)")]),a("option",{attrs:{value:"8"}},[t._v("Восьмиугольник (октагон)")]),a("option",{attrs:{value:"9"}},[t._v("Девятиугольник (нонагон)")]),a("option",{attrs:{value:"10"}},[t._v("Десятиугольник (декагон)")])])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeRotation"}},[t._v("Поворот")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.resolvedRotation,expression:"resolvedRotation"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeRotation",step:"5",min:"-180",max:"180"},domProps:{value:t.resolvedRotation},on:{input:function(e){e.target.composing||(t.resolvedRotation=e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeOpacity"}},[t._v("Прозрачность обводки")]),a("div",{staticClass:"input-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.stroke.opacity,expression:"styleEditorState.style.shape.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.shape.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointStrokeWidth"}},[t._v("Толщина обводки")]),a("div",{staticClass:"input-group"},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.stroke.width,expression:"styleEditorState.style.shape.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointStrokeWidth",step:"1",min:"0",max:"20"},domProps:{value:t.styleEditorState.style.shape.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.stroke,"width",e.target.value)}}})])]):t._e(),t.styleEditorState.style.shape?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointFillOpacity"}},[t._v("Прозрачность заливки")]),a("div",{staticClass:"input-group"},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.shape.fill.opacity,expression:"styleEditorState.style.shape.fill.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointFillOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.shape.fill.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.shape.fill,"opacity",e.target.value)}}})])]):t._e()]):t._e(),"icon"===t.styleEditorState.style.pointType?a("div",[a("div",{staticClass:"form-group file-upload"},[a("label",{attrs:{for:"styleEditorPointIconSrc"}},[t._v("Изображение")]),a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[a("img",{staticClass:"icon",attrs:{src:t.styleEditorState.style.icon.src}})])]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"styleEditorPointIconSrc",readonly:"",value:"Выбрать иконку"},on:{click:function(e){return t.$refs.icon.click()}}})]),a("input",{ref:"icon",staticClass:"form-control-file",attrs:{type:"file",accept:"image/jpeg,image/png,image/gif"},on:{change:t.uploadIcon}})]),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconAnchor0"}},[t._v("Смещение по горизонтали влево")]),a("div",{staticClass:"input-group"},[t._m(5),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.anchor[0],expression:"styleEditorState.style.icon.anchor[0]"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconAnchor0",step:"1",min:"-256",max:"256"},domProps:{value:t.styleEditorState.style.icon.anchor[0]},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon.anchor,0,e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconAnchor1"}},[t._v("Смещение по вертикали вверх")]),a("div",{staticClass:"input-group"},[t._m(6),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.anchor[1],expression:"styleEditorState.style.icon.anchor[1]"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconAnchor1",step:"1",min:"-256",max:"256"},domProps:{value:t.styleEditorState.style.icon.anchor[1]},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon.anchor,1,e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconOpacity"}},[t._v("Прозрачность")]),a("div",{staticClass:"input-group"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.opacity,expression:"styleEditorState.style.icon.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.icon.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconScale"}},[t._v("Масштаб")]),a("div",{staticClass:"input-group"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.scale,expression:"styleEditorState.style.icon.scale"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconScale",step:"0.05",min:"0",max:"5"},domProps:{value:t.styleEditorState.style.icon.scale},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"scale",e.target.value)}}})])]):t._e(),t.styleEditorState.style.icon?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointIconRotation"}},[t._v("Поворот")]),a("div",{staticClass:"input-group"},[t._m(9),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.icon.rotation,expression:"styleEditorState.style.icon.rotation"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointIconRotation",step:"5",min:"-180",max:"180"},domProps:{value:t.styleEditorState.style.icon.rotation},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.icon,"rotation",e.target.value)}}})])]):t._e()]):t._e(),a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointList"}},[t._v("Связывать элементы в список")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.list.hasList,expression:"styleEditorState.style.list.hasList"}],staticClass:"form-control",attrs:{id:"styleEditorPointList"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style.list,"hasList",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Да")]),a("option",{attrs:{value:"false"}},[t._v("Нет")])])]),t.styleEditorState.style.list.hasList?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointListVisibility"}},[t._v("Отображать связь на карте")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.list.visibility,expression:"styleEditorState.style.list.visibility"}],staticClass:"form-control",attrs:{id:"styleEditorPointListVisibility"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style.list,"visibility",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Отображать")]),a("option",{attrs:{value:"false"}},[t._v("Скрывать")])])]):t._e(),t.styleEditorState.style.list.visibility?a("div",{staticClass:"form-group list-color-style"},[a("label",[t._v("Цвет линии связи")]),a("color-picker",{on:{change:t.onChangeListColor},model:{value:t.styleEditorState.style.list.color,callback:function(e){t.$set(t.styleEditorState.style.list,"color",e)},expression:"styleEditorState.style.list.color"}})],1):t._e(),t.styleEditorState.style.list.visibility?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPointListOpacity"}},[t._v("Прозрачность линии связи")]),a("div",{staticClass:"input-group"},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.list.opacity,expression:"styleEditorState.style.list.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPointListOpacity",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.list.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.list,"opacity",e.target.value)}}})])]):t._e()])])},an=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("°")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("х")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("°")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])}],rn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.value?a("div",{staticClass:"color-picker"},[a("div",{staticClass:"input-group",on:{click:function(e){t.isShowModal=!t.isShowModal}}},[a("div",{staticClass:"input-group-prepend color-picker-input"},[a("div",{staticClass:"input-group-text",style:"background-color:"+t.color.hex+";"},[a("i",{staticClass:"fas fa-palette"})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.color.hex,expression:"color.hex"}],staticClass:"form-control color-picker-input",style:"background-color:"+t.color.hex+"30;",attrs:{type:"text",readonly:""},domProps:{value:t.color.hex},on:{input:function(e){e.target.composing||t.$set(t.color,"hex",e.target.value)}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowModal,expression:"isShowModal"}],staticClass:"color-picker-modal"},[a("div",{staticClass:"color-picker-modal-wrapper",on:{click:function(e){t.isShowModal=!1}}}),a("sketch-picker",{staticClass:"color-picker-sketch-picker",on:{input:t.Change},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)]):t._e()},nn=[],sn=a("c345"),on=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.isShowModal=!1,t.color={hex:t.value},t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeValue",value:function(){this.color={hex:this.value}}},{key:"Change",value:function(t){return t.hex}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],on.prototype,"value",void 0),Object(d["a"])([Object(p["e"])("Boolean")],on.prototype,"isShowModal",void 0),Object(d["a"])([Object(p["e"])()],on.prototype,"color",void 0),Object(d["a"])([Object(p["g"])("value",{deep:!0})],on.prototype,"onChangeValue",null),Object(d["a"])([Object(p["b"])()],on.prototype,"Change",null),on=Object(d["a"])([Object(p["a"])({components:{"sketch-picker":sn["Sketch"]}})],on);var ln=on,cn=ln,un=(a("a88d"),Object(T["a"])(cn,rn,nn,!1,null,null,null)),dn=un.exports,pn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.shape.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"onChangeFillColor",value:function(t){var e=this.styleEditorState.style;e.shape.fill.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"onChangeListColor",value:function(t){var e=this.styleEditorState.style;e.list.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"uploadIcon",value:function(){var t=this.$refs.icon;if(t&&t.files&&0!==t.files.length){var e=t.files[0];this.styleEditorUploadIcon({file:e})}}},{key:"resolvedRotation",get:function(){return Math.round(180*this.styleEditorState.style.shape.rotation/Math.PI)},set:function(t){var e=Object.assign({},this.styleEditorState.style.shape,{rotation:t*Math.PI/180});this.styleEditorState.style.shape=Object.assign({},e)}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("styleEditor")],pn.prototype,"styleEditorState",void 0),Object(d["a"])([m["a"]],pn.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],pn.prototype,"setMapElements",void 0),Object(d["a"])([m["a"]],pn.prototype,"setMapCenterDefault",void 0),Object(d["a"])([m["a"]],pn.prototype,"styleEditorUploadIcon",void 0),pn=Object(d["a"])([Object(p["a"])({components:{ColorPicker:dn}})],pn);var mn=pn,fn=mn,vn=Object(T["a"])(fn,en,an,!1,null,null,null),hn=vn.exports,bn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.pointType?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorShowTitle"}},[t._v("Отображать наименование?")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.showTitle,expression:"styleEditorState.style.showTitle"}],staticClass:"form-control",attrs:{id:"styleEditorShowTitle"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style,"showTitle",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Да")]),a("option",{attrs:{value:"false"}},[t._v("Нет")])])]):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет линии")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.stroke,"color",e)},expression:"styleEditorState.style.stroke.color"}})],1):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorLinestringStrokeOpacity"}},[t._v("Прозрачность линии")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.opacity,expression:"styleEditorState.style.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorLinestringStrokeOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorLinestringStrokeWidth"}},[t._v("Толщина линии")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.width,expression:"styleEditorState.style.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorLinestringStrokeWidth",required:"",step:"1",min:"1",max:"20"},domProps:{value:t.styleEditorState.style.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"width",e.target.value)}}})])]):t._e()])},yn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])}],gn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("styleEditor")],gn.prototype,"styleEditorState",void 0),Object(d["a"])([m["a"]],gn.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],gn.prototype,"setMapElements",void 0),Object(d["a"])([m["a"]],gn.prototype,"setMapCenterDefault",void 0),gn=Object(d["a"])([Object(p["a"])({components:{ColorPicker:dn}})],gn);var _n=gn,On=_n,Cn=Object(T["a"])(On,bn,yn,!1,null,null,null),jn=Cn.exports,Sn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[t.styleEditorState.style.pointType?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorShowTitle"}},[t._v("Отображать наименование?")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.showTitle,expression:"styleEditorState.style.showTitle"}],staticClass:"form-control",attrs:{id:"styleEditorShowTitle"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.styleEditorState.style,"showTitle",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Да")]),a("option",{attrs:{value:"false"}},[t._v("Нет")])])]):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет обводки")]),a("color-picker",{on:{change:t.onChangeStrokeColor},model:{value:t.styleEditorState.style.stroke.color,callback:function(e){t.$set(t.styleEditorState.style.stroke,"color",e)},expression:"styleEditorState.style.stroke.color"}})],1):t._e(),t.styleEditorState.style.fill?a("div",{staticClass:"form-group"},[a("label",[t._v("Цвет заливки")]),a("color-picker",{on:{change:t.onChangeFillColor},model:{value:t.styleEditorState.style.fill.color,callback:function(e){t.$set(t.styleEditorState.style.fill,"color",e)},expression:"styleEditorState.style.fill.color"}})],1):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonStrokeOpacity"}},[t._v("Прозрачность обводки")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.opacity,expression:"styleEditorState.style.stroke.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonStrokeOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.stroke.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"opacity",e.target.value)}}})])]):t._e(),t.styleEditorState.style.stroke?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonStrokeWidth"}},[t._v("Толщина обводки")]),a("div",{staticClass:"input-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.stroke.width,expression:"styleEditorState.style.stroke.width"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonStrokeWidth",required:"",step:"1",min:"1",max:"20"},domProps:{value:t.styleEditorState.style.stroke.width},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.stroke,"width",e.target.value)}}})])]):t._e(),t.styleEditorState.style.fill?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"styleEditorPolygonFillOpacity"}},[t._v("Прозрачность заливки")]),a("div",{staticClass:"input-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.styleEditorState.style.fill.opacity,expression:"styleEditorState.style.fill.opacity"}],staticClass:"form-control",attrs:{type:"number",id:"styleEditorPolygonFillOpacity",required:"",step:"5",min:"0",max:"100"},domProps:{value:t.styleEditorState.style.fill.opacity},on:{input:function(e){e.target.composing||t.$set(t.styleEditorState.style.fill,"opacity",e.target.value)}}})])]):t._e()])},kn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("px")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("%")])])}],wn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeStrokeColor",value:function(t){var e=this.styleEditorState.style;e.stroke.color=t,this.styleEditorState.style=Object.assign({},e)}},{key:"onChangeFillColor",value:function(t){var e=this.styleEditorState.style;e.fill.color=t,this.styleEditorState.style=Object.assign({},e)}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("styleEditor")],wn.prototype,"styleEditorState",void 0),Object(d["a"])([m["a"]],wn.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],wn.prototype,"setMapElements",void 0),Object(d["a"])([m["a"]],wn.prototype,"setMapCenterDefault",void 0),wn=Object(d["a"])([Object(p["a"])({components:{ColorPicker:dn}})],wn);var xn=wn,En=xn,Tn=Object(T["a"])(En,Sn,kn,!1,null,null,null),Pn=Tn.exports,Fn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeStyle",value:function(){this.setMapStyles({styles:[Object.assign({},{id:1},this.styleEditorState.style)]})}},{key:"onChangeGeometryType",value:function(t){this.removeFeatureFromMap({id:"style-editor"}),"point"===t?this.addFeatureToMap({id:"style-editor",layer_id:1,geom:"POINT(48.0355525016785 46.3538888154049)",property:{title:"Точечный геоэлемент",layer_id:1}}):"linestring"===t?this.addFeatureToMap({id:"style-editor",layer_id:1,geom:"LINESTRING(48.0336213111877 46.3516524398736,\n                    48.0339002609253 46.3519338431522,\n                    48.0376124382019 46.3529113380201,\n                    48.0377840995789 46.3535778017697,\n                    48.0348873138428 46.3541109669178,\n                    48.0343723297119 46.3535926119829,\n                    48.0333423614502 46.3540665366874,\n                    48.0337715148926 46.3544960274008,\n                    48.0353379249573 46.3547033665372)",property:{title:"Линейный геоэлемент",layer_id:1}}):this.addFeatureToMap({id:"style-editor",layer_id:1,geom:"POLYGON((48.0351877212524 46.3537110935444,\n                    48.0341362953186 46.3548810851708,\n                    48.0366039276123 46.3545256473257,\n                    48.0377197265625 46.3535629915525,\n                    48.0375909805298 46.3528817172203,\n                    48.0363893508911 46.3531631141696,\n                    48.0342864990234 46.3515043323028,\n                    48.0351877212524 46.3537110935444))",property:{title:"Полигональный геоэлемент",layer_id:1}}),this.setMapStyles({styles:[Object.assign({},{id:1},this.styleEditorState.style)]}),this.setMapCenterDefault(),this.$refs.Scrollbar&&this.$refs.Scrollbar.scrollToY(0)}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("styleEditor")],Fn.prototype,"styleEditorState",void 0),Object(d["a"])([m["a"]],Fn.prototype,"setMapStyles",void 0),Object(d["a"])([m["a"]],Fn.prototype,"removeFeatureFromMap",void 0),Object(d["a"])([m["a"]],Fn.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],Fn.prototype,"setMapCenterDefault",void 0),Object(d["a"])([Object(p["g"])("styleEditorState.style",{deep:!0})],Fn.prototype,"onChangeStyle",null),Object(d["a"])([Object(p["g"])("styleEditorState.geometryType")],Fn.prototype,"onChangeGeometryType",null),Fn=Object(d["a"])([Object(p["a"])({components:{LinestringFields:jn,PointFields:hn,PolygonFields:Pn,OlMap:tn}})],Fn);var $n=Fn,Mn=$n,Ln=Object(T["a"])(Mn,mr,fr,!1,null,null,null),Rn=Ln.exports,In=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-constructor"},[t.constructorState.tableFields.length?a("div",{staticClass:"alert alert-info"},[t._v('\n        Для добавления нового поля в группу нажмите "Добавить поле". Укажите тип поля, наименование и техническое наименование поля\n    ')]):a("div",{staticClass:"alert alert-info"},[t._v('\n        Для данного слоя дополнительные поля формы не заданы.\n        Для чтого, что бы создать дополнительные поля в конструкторе формы,\n        необходимо создать группу полей, нажав на кнопку "Добавить группу"\n    ')]),t._l(t.constructorState.tableFields,(function(e,r){return a("div",[a("div",{staticClass:"row align-items-center group-header"},[a("div",{staticClass:"col-2"},[t._v("\n                Группа:\n            ")]),a("div",{staticClass:"col-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"tableGroup.group"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Группа"},domProps:{value:e.group},on:{input:function(a){a.target.composing||t.$set(e,"group",a.target.value)}}})]),a("div",{staticClass:"col-3 action"},[a("button",{staticClass:"btn btn-primary",attrs:{"test-tag":"add_field_button",type:"button"},on:{click:function(a){return t.addField(r,e.group)}}},[t._v("Добавить\n                    поле\n                ")])])]),a("div",[t._m(0,!0),t._l(e.columns,(function(n,s){return a("div",{staticClass:"row constructor-table-fields",class:{deleted:n.is_deleted}},[a("div",{staticClass:"col-2 col col-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:n.group,expression:"tableField.group"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"group",e.target.multiple?a:a[0])},function(e){return t.changeGroup(n,s,r)}]}},t._l(t.constructorState.tableFields,(function(e){return a("option",{domProps:{value:e.group}},[t._v(t._s(e.group)+"\n                        ")])})),0)]),a("div",{staticClass:"col-2 col col-type"},[a("select",{directives:[{name:"model",rawName:"v-model",value:n.type,expression:"tableField.type"}],staticClass:"form-control",attrs:{disabled:n.id},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"type",e.target.multiple?a:a[0])},function(e){return t.changeFieldType(n)}]}},[a("option",{attrs:{value:"text_field"}},[t._v("Текстовое поле")]),a("option",{attrs:{value:"long_text_field"}},[t._v("Длинное текстовое поле")]),a("option",{attrs:{value:"number_field"}},[t._v("Числовое поле")]),a("option",{attrs:{value:"date_field"}},[t._v("Дата")]),a("option",{attrs:{value:"one_from_many_field"}},[t._v("Один из многих")]),a("option",{attrs:{value:"many_from_many_field"}},[t._v("Многие из многих")]),a("option",{attrs:{value:"doc_field"}},[t._v("Загрузка документа")]),a("option",{attrs:{value:"link_field"}},[t._v("Ссылка на геоэлемент")]),a("option",{attrs:{value:"directory_field"}},[t._v("Ссылка на справочник")])])]),a("div",{staticClass:"col-3 col col-title"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:n.title,expression:"tableField.title"}],staticClass:"form-control",attrs:{type:"text",name:"наименование группы "+e.group+" под номером "+s,"data-vv-validate-on":"change|blur","test-tag":"field_name_"+r+"_"+s,placeholder:"Наименование поля"},domProps:{value:n.title},on:{input:function(e){e.target.composing||t.$set(n,"title",e.target.value)}}}),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first("наименование группы "+e.group+" под номером "+s)))])]),a("div",{staticClass:"col-3 col col-tech"},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.tech_title,expression:"tableField.tech_title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",disabled:n.id,"data-vv-validate-on":"change|blur",id:"field_tech_name_"+r+"_"+s,"test-tag":"field_tech_name_"+r+"_"+s,name:"тех_наименование группы"+e.group+" под номером "+s,placeholder:"техническое наименование поля"},domProps:{value:n.tech_title},on:{input:function(e){e.target.composing||t.$set(n,"tech_title",e.target.value)}}}),n.id?t._e():a("span",{staticClass:"validation-error"},[t._v(t._s(t.validColumn(n.tech_title)))])]),a("div",{staticClass:"col-2 col col-required col-action"},[a("div",{staticClass:"input-container"},[a("select",{directives:[{name:"model",rawName:"v-model",value:n.required,expression:"tableField.required"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"required",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("Да")]),a("option",{attrs:{value:"false"}},[t._v("Нет")])])]),a("div",{staticClass:"btn-container"},[!0===n.is_deleted?a("button",{staticClass:"btn btn-warning btn-link",attrs:{type:"button"},on:{click:function(e){return t.undoColumn(n,s,r)}}},[a("i",{staticClass:"fas fa-trash-restore"})]):a("button",{staticClass:"btn btn-danger btn-link",attrs:{type:"button"},on:{click:function(e){return t.dropColumn(n,s,r)}}},[a("i",{staticClass:"far fa-trash-alt"})])])]),"many_from_many_field"===n.type?a("builder-many-from-many-field",{attrs:{tableField:n}}):t._e(),"one_from_many_field"===n.type?a("builder-one-from-many-field",{attrs:{"table-field":n}}):t._e(),"doc_field"===n.type?a("builder-doc-field",{attrs:{tableField:n}}):t._e(),"date_field"===n.type?a("builder-date-field",{attrs:{tableField:n}}):t._e(),"text_field"===n.type?a("builder-text-field",{attrs:{tableField:n}}):t._e(),"link_field"===n.type?a("builder-link-field",{attrs:{tableField:n}}):t._e(),"long_text_field"===n.type?a("builder-long-text-field",{attrs:{tableField:n}}):t._e(),"number_field"===n.type?a("builder-number-field",{attrs:{tableField:n}}):t._e(),"directory_field"===n.type?a("builder-directory-field",{attrs:{tableField:n}}):t._e()],1)})),a("hr")],2)])})),a("div",{staticClass:"action"},[a("button",{staticClass:"btn btn-primary btn-link",attrs:{type:"button","test-tag":"add-additional-fields-group-button"},on:{click:t.addGroup}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("Добавить группу")])])],2)},Dn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row no-gutters align-items-center constructor-table-fields-header"},[a("div",{staticClass:"col-2"},[a("p",[t._v("Группа")])]),a("div",{staticClass:"col-2"},[a("p",[t._v("Тип")])]),a("div",{staticClass:"col-3"},[a("p",[t._v("Наименование")])]),a("div",{staticClass:"col-3"},[a("p",[t._v("Тех. наименование")])]),a("div",{staticClass:"col-2"},[a("p",[t._v("Обязательное?")])])])}],Nn=(a("ac4d"),a("8a81"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["doc_field"===t.tableField.type?a("div",{staticClass:"col-12 col col-enums last-in-row"},[a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),t._m(1),a("div",{staticClass:"col-12 col last-in-row"},[a("tag-selector",{attrs:{name:"enums"},model:{value:t.tableField.enums,callback:function(e){t.$set(t.tableField,"enums",e)},expression:"tableField.enums"}})],1),t._m(2),a("div",{staticClass:"col-12 col last-in-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.quantity,expression:"tableField.options.quantity"}],staticClass:"form-control",attrs:{type:"number",min:"1",placeholder:"Кол-во"},domProps:{value:t.tableField.options.quantity},on:{input:function(e){e.target.composing||t.$set(t.tableField.options,"quantity",e.target.value)}}})])])]):t._e()])}),An=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v('\n                    Дополнительные ограничения по типу поля: при необходимости укажите формат файлов, которые может загрузить пользователь и максимальное количество файлов.\n                    Форматы файлов необходимо разделять пробелами, например: "pdf doc docx"\n                ')])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Типы файлов (через пробел):")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Максимальное количество файлов:")])])}],zn=a("b25c"),Gn=a.n(zn),Un=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){0===this.tableField.options.length&&(this.tableField.options={quantity:1})}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],Un.prototype,"tableField",void 0),Un=Object(d["a"])([Object(p["a"])({components:{TagSelector:Gn.a}})],Un);var Bn=Un,Vn=Bn,qn=Object(T["a"])(Vn,Nn,An,!1,null,null,null),Wn=qn.exports,Hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col col-enums last-in-row"},["many_from_many_field"===t.tableField.type?a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),a("div",{staticClass:"col-12 col last-in-row"},[a("tag-selector",{attrs:{name:"enums"},model:{value:t.tableField.enums,callback:function(e){t.$set(t.tableField,"enums",e)},expression:"tableField.enums"}})],1),t._m(1),a("div",{staticClass:"col-12 col last-in-row"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.default,expression:"tableField.options.default"}],staticClass:"form-control multiple-select",attrs:{id:"cars",multiple:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tableField.options,"default",e.target.multiple?a:a[0])}}},t._l(t.tableField.enums,(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)]),t._m(2),t._m(3),a("div",{staticClass:"col-6 col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.min,expression:"tableField.options.min"}],staticClass:"form-control",attrs:{type:"number",min:"1",placeholder:"Кол-во"},domProps:{value:t.tableField.options.min},on:{input:function(e){e.target.composing||t.$set(t.tableField.options,"min",e.target.value)}}})]),a("div",{staticClass:"col-6 col last-in-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.maxCount,expression:"maxCount"}],staticClass:"form-control",attrs:{type:"number",min:"1",placeholder:"Кол-во"},domProps:{value:t.maxCount},on:{input:function(e){e.target.composing||(t.maxCount=e.target.value)}}})])]):t._e()])},Jn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v("\n                Дополнительные настройки поля: необходимо перечислить значения, из которых пользовать может выбрать несколько вариантов. Значения необходимо разделять пробелом.\n                При необходимости укажите минимально и максимально допустимое количество вариантов, которые может выбрать пользователь.\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Значения, выбранные по умолчанию (можно указать несколько значений):")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col"},[a("label",{staticClass:"label-form-control"},[t._v("Минимальное количество вариантов:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Максимальное количество вариантов:")])])}],Yn=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeEnums",value:function(){this.autoSelectDefaultValue()}},{key:"onChangeRequired",value:function(){this.autoSelectDefaultValue()}},{key:"mounted",value:function(){0===this.tableField.options.length&&(this.tableField.options={min:1,max:1,default:[]}),Array.isArray(this.tableField.options.default)||(this.tableField.options.default=[])}},{key:"autoSelectDefaultValue",value:function(){if(!0===this.tableField.required&&0!==this.tableField.enums.length&&0===this.tableField.options.default.length){var t={default:[this.tableField.enums[0]]};this.tableField.options=Object.assign({},t)}}},{key:"maxCount",get:function(){return this.tableField.enums&&this.tableField.options.max>=this.tableField.enums.length?this.tableField.enums.length:this.tableField.options.max},set:function(t){this.tableField.options.max=t}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],Yn.prototype,"tableField",void 0),Object(d["a"])([Object(p["g"])("tableField.enums",{deep:!0})],Yn.prototype,"onChangeEnums",null),Object(d["a"])([Object(p["g"])("tableField.required")],Yn.prototype,"onChangeRequired",null),Yn=Object(d["a"])([Object(p["a"])({components:{TagSelector:Gn.a}})],Yn);var Kn=Yn,Zn=Kn,Xn=Object(T["a"])(Zn,Hn,Jn,!1,null,null,null),Qn=Xn.exports,ts=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col col-enums last-in-row"},["one_from_many_field"===t.tableField.type?a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),a("div",{staticClass:"col-12 col last-in-row"},[a("tag-selector",{attrs:{name:"enums"},model:{value:t.tableField.enums,callback:function(e){t.$set(t.tableField,"enums",e)},expression:"tableField.enums"}})],1),t._m(1),a("div",{staticClass:"col-12 col last-in-row"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.default,expression:"tableField.options.default"}],staticClass:"form-control",attrs:{id:"cars"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tableField.options,"default",e.target.multiple?a:a[0])}}},t._l(t.tableField.enums,(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)])]):t._e()])},es=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v("Дополнительные настройки поля: необходимо перечислить значения, из которых пользовать может выбрать один вариант. Значения необходимо разделять пробелом")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Значение, выбранное по умолчанию:")])])}],as=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){0===this.tableField.options.length&&(this.tableField.options.default="")}},{key:"onChangeEnums",value:function(){this.autoSelectDefaultValue()}},{key:"onChangeRequired",value:function(){this.autoSelectDefaultValue()}},{key:"autoSelectDefaultValue",value:function(){if(!0===this.tableField.required&&0!==this.tableField.enums.length&&-1===this.tableField.enums.indexOf(this.tableField.options.default)){var t={default:this.tableField.enums[0]};this.tableField.options=Object.assign({},t)}else if(0!==this.tableField.enums.length&&""!==this.tableField.options.default&&-1===this.tableField.enums.indexOf(this.tableField.options.default)){var e={default:this.tableField.enums[0]};this.tableField.options=Object.assign({},e)}}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],as.prototype,"tableField",void 0),Object(d["a"])([Object(p["g"])("tableField.enums",{deep:!0})],as.prototype,"onChangeEnums",null),Object(d["a"])([Object(p["g"])("tableField.required")],as.prototype,"onChangeRequired",null),as=Object(d["a"])([Object(p["a"])({components:{TagSelector:Gn.a}})],as);var rs=as,ns=rs,ss=Object(T["a"])(ns,ts,es,!1,null,null,null),os=ss.exports,is=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"date_field"===t.tableField.type?a("div",{staticClass:"col-12 col col-enums last-in-row"},[a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),t._m(1),t._m(2),a("div",{staticClass:"col-6 col"},[a("datepicker",{attrs:{placeholder:"Выбрать дату",language:t.ru,"input-class":"form-control"},model:{value:t.tableField.options.minDate,callback:function(e){t.$set(t.tableField.options,"minDate",e)},expression:"tableField.options.minDate"}})],1),a("div",{staticClass:"col-6 col last-in-row"},[a("datepicker",{attrs:{placeholder:"Выбрать дату",language:t.ru,"input-class":"form-control"},model:{value:t.tableField.options.maxDate,callback:function(e){t.$set(t.tableField.options,"maxDate",e)},expression:"tableField.options.maxDate"}})],1)])]):t._e()},ls=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v("Дополнительные ограничения по типу поля: минимальное и максимальное значение даты, которое может выбрать пользователь")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col"},[a("label",{staticClass:"label-form-control"},[t._v("Минимальная дата:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Максимальная дата:")])])}],cs=a("2430"),us=a("fa33"),ds=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.ru=cs["ru"],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){0===this.tableField.options.length&&(this.tableField.options={minDate:"",maxDate:""})}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],ds.prototype,"tableField",void 0),Object(d["a"])([Object(p["e"])()],ds.prototype,"ru",void 0),ds=Object(d["a"])([Object(p["a"])({components:{Datepicker:us["a"]}})],ds);var ps=ds,ms=ps,fs=Object(T["a"])(ms,is,ls,!1,null,null,null),vs=fs.exports,hs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"text_field"===t.tableField.type?a("div",{staticClass:"col-12 col col-enums last-in-row"},[a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),t._m(1),t._m(2),a("div",{staticClass:"col-6 col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.min,expression:"tableField.options.min"}],staticClass:"form-control",attrs:{type:"number",min:"1",placeholder:"Минимальное количество"},domProps:{value:t.tableField.options.min},on:{input:function(e){e.target.composing||t.$set(t.tableField.options,"min",e.target.value)}}})]),a("div",{staticClass:"col-6 col last-in-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.max,expression:"tableField.options.max"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"255",placeholder:"Максимальное количество"},domProps:{value:t.tableField.options.max},on:{change:t.validate,input:function(e){e.target.composing||t.$set(t.tableField.options,"max",e.target.value)}}})])])]):t._e()},bs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v("Дополнительные ограничения по типу поля: минимальное и максимальное количество вводимых символов")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col"},[a("label",{staticClass:"label-form-control"},[t._v("Минимальное количество символов:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Максимальное количество символов:")])])}],ys=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){0===this.tableField.options.length&&(this.tableField.options={min:1,max:100})}},{key:"validate",value:function(){this.tableField.options.max>255&&(this.tableField.options.max=255)}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],ys.prototype,"tableField",void 0),ys=Object(d["a"])([p["a"]],ys);var gs=ys,_s=gs,Os=Object(T["a"])(_s,hs,bs,!1,null,null,null),Cs=Os.exports,js=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["link_field"===t.tableField.type?a("div",{staticClass:"col-12 col col-enums last-in-row"},[a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),a("div",{staticClass:"col-2 col"},[t._v("\n                Элементы слоёв:\n            ")]),a("div",{staticClass:"col-10 col last-in-row"},t._l(t.tableField.options.layers,(function(e,r){return a("label",{staticClass:"alert alert-info alert-layer"},[t._v(t._s(e.title)+"\n                    "),a("button",{staticClass:"btn btn-link btn-sm btn-cross",on:{click:function(e){return t.deleteLayer(r)}}},[t._v("x")])])})),0),a("div",{staticClass:"col-10 col"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectLayer,expression:"selectLayer"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectLayer=e.target.multiple?a:a[0]}}},t._l(t.allLayers(),(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.title))])})),0)]),a("div",{staticClass:"col-2 col action last-in-row"},[a("button",{staticClass:"btn btn-link btn-sm",on:{click:t.addLayer}},[t._v("Добавить")])])])]):t._e()])},Ss=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v("\n                    Дополнительные ограничения по типу поля: слои, элементы которых можно выбрать в качестве ссылки\n                ")])])}],ks=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.selectLayer="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){0===this.tableField.options.length&&(this.tableField.options={layers:[]})}},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorLayerGetAll();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"allLayers",value:function(){var t=this;return this.layerState.layers.filter((function(e){return!t.tableField.options.layers.some((function(t){return t.id===e.id}))}))}},{key:"addLayer",value:function(){var t=Object.assign({},this.tableField.options);t.layers.push(Object.assign({},this.selectLayer)),this.tableField.options=Object.assign({},t)}},{key:"deleteLayer",value:function(t){var e=Object.assign({},this.tableField.options);e.layers.splice(t,1),this.tableField.options=Object.assign({},e)}}]),e}(p["f"]);Object(d["a"])([m["a"]],ks.prototype,"administratorLayerGetAll",void 0),Object(d["a"])([Object(m["b"])("administratorLayer")],ks.prototype,"layerState",void 0),Object(d["a"])([Object(p["d"])()],ks.prototype,"tableField",void 0),Object(d["a"])([Object(p["e"])()],ks.prototype,"selectLayer",void 0),ks=Object(d["a"])([p["a"]],ks);var ws=ks,xs=ws,Es=Object(T["a"])(xs,js,Ss,!1,null,null,null),Ts=Es.exports,Ps=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"long_text_field"===t.tableField.type?a("div",{staticClass:"col-12 col col-enums last-in-row"},[a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),t._m(1),t._m(2),a("div",{staticClass:"col-6 col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.min,expression:"tableField.options.min"}],staticClass:"form-control",attrs:{type:"number",min:"1",placeholder:"Минимальное количество"},domProps:{value:t.tableField.options.min},on:{input:function(e){e.target.composing||t.$set(t.tableField.options,"min",e.target.value)}}})]),a("div",{staticClass:"col-6 col last-in-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.max,expression:"tableField.options.max"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"65535",placeholder:"Максимальное количество"},domProps:{value:t.tableField.options.max},on:{change:t.validate,input:function(e){e.target.composing||t.$set(t.tableField.options,"max",e.target.value)}}})])])]):t._e()},Fs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v("Дополнительные ограничения по типу поля: минимальное и максимальное количество вводимых символов")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col"},[a("label",{staticClass:"label-form-control"},[t._v("Минимальное количество символов:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Максимальное количество символов:")])])}],$s=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){0===this.tableField.options.length&&(this.tableField.options={min:1,max:1e3})}},{key:"validate",value:function(){this.tableField.options.max>65535&&(this.tableField.options.max=65535)}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],$s.prototype,"tableField",void 0),$s=Object(d["a"])([p["a"]],$s);var Ms=$s,Ls=Ms,Rs=Object(T["a"])(Ls,Ps,Fs,!1,null,null,null),Is=Rs.exports,Ds=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"number_field"===t.tableField.type?a("div",{staticClass:"col-12 col col-enums last-in-row"},[a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),t._m(1),t._m(2),a("div",{staticClass:"col-6 col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.min,expression:"tableField.options.min"}],staticClass:"form-control",attrs:{type:"number",min:"1",placeholder:"Минимальное значение"},domProps:{value:t.tableField.options.min},on:{input:function(e){e.target.composing||t.$set(t.tableField.options,"min",e.target.value)}}})]),a("div",{staticClass:"col-6 col last-in-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableField.options.max,expression:"tableField.options.max"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"2147483646",placeholder:"Максимальное значение"},domProps:{value:t.tableField.options.max},on:{change:t.validate,input:function(e){e.target.composing||t.$set(t.tableField.options,"max",e.target.value)}}})])])]):t._e()},Ns=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v("Дополнительные ограничения по типу поля: минимально и максимально допустимое числовое значение")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col"},[a("label",{staticClass:"label-form-control"},[t._v("Минимально допустимое значение:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col last-in-row"},[a("label",{staticClass:"label-form-control"},[t._v("Максимально допустимое значение:")])])}],As=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){0===this.tableField.options.length&&(this.tableField.options={min:1,max:100})}},{key:"validate",value:function(){this.tableField.options.max>2147483646&&(this.tableField.options.max=2147483646)}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],As.prototype,"tableField",void 0),As=Object(d["a"])([p["a"]],As);var zs=As,Gs=zs,Us=Object(T["a"])(Gs,Ds,Ns,!1,null,null,null),Bs=Us.exports,Vs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"directory_field"===t.tableField.type?a("div",{staticClass:"col-12 col col-enums last-in-row"},[a("div",{staticClass:"row no-gutters addition-setting-fields"},[t._m(0),a("div",{staticClass:"col-6 col"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.defaultLinkedDirectory,expression:"defaultLinkedDirectory"}],staticClass:"form-control",attrs:{id:"singleUserRole"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.defaultLinkedDirectory=e.target.multiple?a:a[0]}}},t._l(t.directoryState.directories,(function(e){return a("option",{domProps:{value:e.name}},[t._v(t._s(e.name))])})),0)])])]):t._e()},qs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col last-in-row"},[a("div",{staticClass:"alert alert-info"},[t._v("Связанный справочник")])])}],Ws=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){this.getAllDirectories()}},{key:"defaultLinkedDirectory",get:function(){return""!==this.tableField.options.linkedDirectory?this.tableField.options.linkedDirectory:this.directoryState.directories[0].name},set:function(t){this.tableField.options.linkedDirectory=t}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("directoryForConstructor")],Ws.prototype,"directoryState",void 0),Object(d["a"])([m["a"]],Ws.prototype,"getAllDirectories",void 0),Object(d["a"])([Object(p["d"])()],Ws.prototype,"tableField",void 0),Ws=Object(d["a"])([p["a"]],Ws);var Hs=Ws,Js=Hs,Ys=Object(T["a"])(Js,Vs,qs,!1,null,null,null),Ks=Ys.exports,Zs=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"addGroup",value:function(){this.constructorState.tableFields.push({group:"Группа",columns:[{type:"text_field",title:"",tech_title:"name1",required:!1,enums:void 0,group:"Группа",is_deleted:!1,options:{}}]})}},{key:"changeGroup",value:function(t,e,a){var r=!0,n=!1,s=void 0;try{for(var o,i=this.constructorState.tableFields[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value;l.group===t.group&&(l.columns.push(t),this.constructorState.tableFields[a].columns.splice(e,1))}}catch(c){n=!0,s=c}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}}},{key:"changeFieldType",value:function(t){switch(t.type){case"many_from_many_field":t.options.min=1,t.options.max=1,t.options.default=[];break;case"one_from_many_field":t.options.default="";break;case"doc_field":t.options.quantity=1;break;case"date_field":t.options.minDate="",t.options.maxDate="";break;case"text_field":t.options.min=1,t.options.max=100;break;case"long_text_field":t.options.min=1,t.options.max=1e3;break;case"link_field":t.options.layers=[];break;case"number_field":t.options.min=1,t.options.max=100;break;case"directory_field":t.options.linkedDirectory="";break;default:t.options={};break}}},{key:"addField",value:function(t,e){this.constructorState.tableFields[t].columns.push({type:"text_field",title:"",tech_title:"name1",required:!1,enums:void 0,group:e,is_deleted:!1,options:{}})}},{key:"dropColumn",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a,r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object.assign({},this.constructorState.tableFields[r]),n.columns[a].is_deleted=!0,this.constructorState.tableFields[r]=Object.assign({},n);case 3:case"end":return t.stop()}}),t,this)})));function e(e,a,r){return t.apply(this,arguments)}return e}()},{key:"undoColumn",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a,r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object.assign({},this.constructorState.tableFields[r]),n.columns[a].is_deleted=!1,this.constructorState.tableFields[r]=Object.assign({},n);case 3:case"end":return t.stop()}}),t,this)})));function e(e,a,r){return t.apply(this,arguments)}return e}()},{key:"validColumn",value:function(t){if(""===t)return'Поле "Тех. Наименование" обязательно для заполнения';var e=0;for(var a in this.constructorState.tableFields)for(var r in this.constructorState.tableFields[a].columns)this.constructorState.tableFields[a].columns[r].tech_title===t&&e++;return e>1?'Поле "Тех. Наименование" должно быть уникальным':""}}]),e}(p["f"]);Object(d["a"])([m["a"]],Zs.prototype,"administratorConstructorGetByLayer",void 0),Object(d["a"])([Object(m["b"])("administratorConstructor")],Zs.prototype,"constructorState",void 0),Zs=Object(d["a"])([Object(p["a"])({components:{BuilderNumberField:Bs,BuilderLongTextField:Is,BuilderTextField:Cs,BuilderDateField:vs,BuilderOneFromManyField:os,BuilderManyFromManyField:Qn,BuilderDocField:Wn,BuilderLinkField:Ts,BuilderDirectoryField:Ks}})],Zs);var Xs=Zs,Qs=Xs,to=Object(T["a"])(Qs,In,Dn,!1,null,null,null),eo=to.exports,ao=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.toolbar=[["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeJsonStyle",value:function(){this.layerState.layer.style=Object.assign({},this.styleEditorState.style)}},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorModuleGetAll();case 2:return t.next=4,this.administratorConstructorGetByLayer({layerId:this.layerState.layer.id});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"geometryTypeChanged",value:function(){this.styleEditorSetGeometryType({geometryType:this.layerState.layer.geometry_type}),this.styleEditorSetDefaultStyle()}},{key:"resizeMap",value:function(){this.mapUpdateSize()}},{key:"updateSingleLayer",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorLayerUpdate();case 2:this.administratorConstructorUpdate({layerId:this.layerState.layer.id});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(p["f"]);Object(d["a"])([Object(p["e"])()],ao.prototype,"toolbar",void 0),Object(d["a"])([m["a"]],ao.prototype,"administratorModuleGetAll",void 0),Object(d["a"])([m["a"]],ao.prototype,"administratorLayerUpdate",void 0),Object(d["a"])([m["a"]],ao.prototype,"mapUpdateSize",void 0),Object(d["a"])([m["a"]],ao.prototype,"styleEditorSetGeometryType",void 0),Object(d["a"])([m["a"]],ao.prototype,"styleEditorSetDefaultStyle",void 0),Object(d["a"])([m["a"]],ao.prototype,"administratorConstructorGetByLayer",void 0),Object(d["a"])([m["a"]],ao.prototype,"administratorConstructorUpdate",void 0),Object(d["a"])([Object(m["b"])("administratorModule")],ao.prototype,"moduleState",void 0),Object(d["a"])([Object(m["b"])("administratorLayer")],ao.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("styleEditor")],ao.prototype,"styleEditorState",void 0),Object(d["a"])([Object(p["g"])("styleEditorState.style",{deep:!0})],ao.prototype,"onChangeJsonStyle",null),ao=Object(d["a"])([Object(p["a"])({components:{StyleEditor:Rn,VueEditor:Xa["a"],ResolvedField:eo}})],ao);var ro=ao,no=ro,so=Object(T["a"])(no,dr,pr,!1,null,null,null),oo=so.exports,io=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorLayerGetAll();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить слой?",text:'Вы уверены, что хотите удалить слой "'.concat(t.title,'" из системы?'),action:function(){var a=Object(nt["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.administratorLayerSetSingle(t),a.next=3,e.administratorLayerDelete();case 3:e.administratorLayerUnsetSingle();case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}},{key:"createLayer",value:function(){this.administratorLayerUnsetSingle(),this.administratorConstructorUnsetSingle(),this.styleEditorSetGeometryType({geometryType:this.layerState.layer.geometry_type}),this.styleEditorSetDefaultStyle(),this.setMapCenterDefault()}},{key:"copyLayer",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.layerState.layer=Object.assign({},e,{id:0}),t.next=3,this.administratorLayerUpdate();case 3:return t.next=5,this.administratorConstructorGetByLayer({layerId:e.id});case 5:this.constructorState.isTableExists=!1,this.administratorConstructorUpdate({layerId:this.layerState.layer.id});case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"editLayer",value:function(t){this.administratorConstructorGetByLayer({layerId:t.id}),this.administratorLayerSetSingle(t),this.styleEditorSetGeometryType({geometryType:this.layerState.layer.geometry_type}),this.styleEditorSetStyle({style:this.layerState.layer.style}),this.setMapCenterDefault()}},{key:"getGeometryTypeTitle",value:function(t){switch(t){case"point":return"Точечные элементы";case"linestring":return"Линейные элементы";case"polygon":return"Полигональные элементы"}}}]),e}(p["f"]);Object(d["a"])([m["a"]],io.prototype,"administratorLayerGetAll",void 0),Object(d["a"])([m["a"]],io.prototype,"setSureModal",void 0),Object(d["a"])([m["a"]],io.prototype,"administratorLayerDelete",void 0),Object(d["a"])([m["a"]],io.prototype,"administratorLayerSetSingle",void 0),Object(d["a"])([m["a"]],io.prototype,"administratorLayerUnsetSingle",void 0),Object(d["a"])([m["a"]],io.prototype,"styleEditorSetGeometryType",void 0),Object(d["a"])([m["a"]],io.prototype,"styleEditorSetStyle",void 0),Object(d["a"])([m["a"]],io.prototype,"setMapCenterDefault",void 0),Object(d["a"])([m["a"]],io.prototype,"styleEditorSetDefaultStyle",void 0),Object(d["a"])([m["a"]],io.prototype,"administratorConstructorGetByLayer",void 0),Object(d["a"])([m["a"]],io.prototype,"administratorConstructorUnsetSingle",void 0),Object(d["a"])([m["a"]],io.prototype,"administratorLayerUpdate",void 0),Object(d["a"])([m["a"]],io.prototype,"administratorConstructorUpdate",void 0),Object(d["a"])([Object(m["b"])("administratorLayer")],io.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("administratorConstructor")],io.prototype,"constructorState",void 0),io=Object(d["a"])([Object(p["a"])({components:{SingleLayer:oo,SureModal:kt}})],io);var lo=io,co=lo,uo=Object(T["a"])(co,cr,ur,!1,null,null,null),po=uo.exports,mo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container"},[a("h1",[t._v("Импорт KMZ-файла")]),a("div",{staticClass:"content"},[a("div",{staticClass:"alert alert-info"},[t._v("\n            Данный инструмент позволяет произвести импорт данных из файла формата .kmz.\n            Данные в файле должны принадлежать одному слою и являться точечными геоэлементами. Геоэлементы другого типа будут игнорироваться.\n            Перед началом импорта необходимо выбрать слой, на который будут выгружены все данные, после чего запустить импорт.\n        ")]),a("div",{staticClass:"step"},[a("h2",[t._v("Шаг 1. Выберите файл для импорта")]),a("button",{staticClass:"btn btn-info",on:{click:function(e){return t.$refs.file.click()}}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n                Выбрать файл\n            ")]),a("input",{ref:"file",attrs:{id:"file",hidden:"",type:"file",accept:".kmz"},on:{change:function(e){return t.selectFile()}}})]),""!==t.fileName?a("div",{staticClass:"step"},[a("h2",[t._v("Шаг 2. Выберите слой, куда необходимо загрузить все данные из файла")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layer,expression:"layer"}],staticClass:"form-control",attrs:{id:"layers",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.layer=e.target.multiple?a:a[0]}}},t._l(t.layerState.layers,(function(e){return a("option",{attrs:{title:e.title},domProps:{value:e}},[t._v("\n                    "+t._s(e.title)+"\n                ")])})),0)]):t._e(),0!==t.layer.id?a("div",{staticClass:"step"},[a("h2",[t._v("Шаг 3. Запустите импорт")]),a("button",{staticClass:"btn btn-info",on:{click:function(e){return t.start()}}},[a("i",{staticClass:"fa fa-play"}),t._v("\n                Запустить импорт\n            ")])]):t._e()])])},fo=[],vo=function(){function t(){Object(o["a"])(this,t)}return Object(i["a"])(t,null,[{key:"notify",value:function(t,e){r["default"].prototype.$notify({title:t,text:e})}}]),t}(),ho=vo,bo=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.layer={id:0,alias:"",title:"",description:"",parent_id:0,module_id:0,visibility:!1,geometry_type:""},t.fileName="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorLayerGetByType({type:"point"});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectFile",value:function(){var t=this.$refs.file;this.fileName=t.files[0].name}},{key:"start",value:function(){this.uploadParsedFile({fileres:this.$refs.file,layerId:this.layer.id,parseType:"kmz"}).then((function(){ho.notify("Импорт завершен","Данные файла были успешно выгружены в систему")}))}}]),e}(p["f"]);Object(d["a"])([m["a"]],bo.prototype,"uploadParsedFile",void 0),Object(d["a"])([m["a"]],bo.prototype,"administratorLayerGetByType",void 0),Object(d["a"])([Object(m["b"])("administratorLayer")],bo.prototype,"layerState",void 0),Object(d["a"])([Object(p["e"])()],bo.prototype,"layer",void 0),Object(d["a"])([Object(p["e"])()],bo.prototype,"fileName",void 0),bo=Object(d["a"])([p["a"]],bo);var yo=bo,go=yo,_o=Object(T["a"])(go,mo,fo,!1,null,null,null),Oo=_o.exports,Co=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Импорт XLS-файла")]),t._m(0),a("div",{staticClass:"step"},[a("h2",[t._v("Шаг 1. Выберите файл для импорта")]),a("button",{staticClass:"btn btn-info",on:{click:function(e){return t.$refs.file.click()}}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n            Выбрать файл\n        ")]),a("input",{ref:"file",attrs:{id:"file",hidden:"",type:"file",accept:".xls, .xlsx"},on:{change:function(e){return t.selectFile()}}})]),""!==t.fileName?a("div",{staticClass:"step"},[a("h2",[t._v("Шаг 2. Выберите слой, в элементы которого необходимо загрузить данные")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.layer,expression:"layer"}],staticClass:"form-control",attrs:{id:"layers",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.layer=e.target.multiple?a:a[0]}}},t._l(t.resolveLayers,(function(e){return a("option",{attrs:{title:e.title},domProps:{value:e}},[t._v("\n                "+t._s(e.title)+"\n            ")])})),0)]):t._e(),0!==t.layer.id?a("div",{staticClass:"step"},[a("h2",[t._v("Шаг 3. Запустите импорт")]),a("button",{staticClass:"btn btn-info",on:{click:function(e){return t.start()}}},[a("i",{staticClass:"fa fa-play"}),t._v("\n            Запустить импорт\n        ")])]):t._e()])},jo=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"alert alert-info"},[t._v("\n            Данный инструмент позволяет произвести импорт данных из файла формата .xls.\n            "),a("hr"),a("b",[t._v("Инструмент находится в разработке.")]),a("hr"),t._v("\n            Правила импорта имеют строгий формат и правила:\n            "),a("br"),t._v('\n            1. Производиться импорт данных для уже созданных элементов слоя "Опоры"'),a("br"),t._v('\n            2. Поиск элемента осуществляется по наименованию и наименованию родительского элемента ("Питающий Пункт")'),a("br"),t._v("\n            3. Каждая ячейка таблицы импортируется в поле, строго соответствующее названию:"),a("br"),t._v('\n            - Данные стобца "A" - "organization_name" (Наименование организации)'),a("br"),t._v('\n            - Данные стобца "B" - "combined_title" (№ ПП)'),a("br"),t._v('\n            - Данные стобца "C" - "title" (№ опор по схеме)'),a("br"),t._v('\n            - Данные стобца "E" - "address" (Адрес расположения)'),a("br"),t._v('\n            - Данные стобца "F" - "allocation_type" (Вид размещения)'),a("br"),t._v('\n            - Данные стобца "G" - "places_for_nodes_quantity" (Количество мест на опоре под узлы креплений для данного вида размещений, шт.)'),a("br"),t._v('\n            - Данные стобца "H" - "allocations_quantity" (Количество размещений данного вида на опоре, шт.)'),a("br"),t._v('\n            - Данные стобца "I" - "transfered_places_quantity" (Количество переданных мест на опоре (узлов креплений), шт. Всего)'),a("br"),t._v('\n            - Данные стобца "J" - "transfered_places_quantity_before_2018" (Количество переданных мест на опоре (узлов креплений), шт. В том числе по договорам заключенным до 01.01.2018)'),a("br"),t._v('\n            - Данные стобца "K" - "transfered_places_quantity_after_2019" (Количество переданных мест на опоре (узлов креплений), шт. В том числе по договорам заключенным после 01.01.2019)'),a("br"),t._v('\n            - Данные стобца "L" - "status" (Статус)'),a("br"),t._v('\n            - Данные стобца "M" - "changes_impl_month" (Месяц внесения изменений в договор)\n        ')])])}],So=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.layer={id:0,alias:"",title:"Опоры",description:"",parent_id:0,module_id:0,visibility:!1,geometry_type:""},t.fileName="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.administratorLayerGetByType({type:"point"});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectFile",value:function(){var t=this.$refs.file;this.fileName=t.files[0].name}},{key:"start",value:function(){this.uploadParsedFile({fileres:this.$refs.file,layerId:this.layer.id,parseType:"xls"}).then((function(){ho.notify("Импорт завершен","Данные файла были успешно выгружены в систему")}))}},{key:"resolveLayers",get:function(){return this.layerState.layers.filter((function(t){return"Опоры"===t.title}))}}]),e}(p["f"]);Object(d["a"])([m["a"]],So.prototype,"uploadParsedFile",void 0),Object(d["a"])([m["a"]],So.prototype,"administratorLayerGetByType",void 0),Object(d["a"])([Object(m["b"])("administratorLayer")],So.prototype,"layerState",void 0),Object(d["a"])([Object(p["e"])()],So.prototype,"layer",void 0),Object(d["a"])([Object(p["e"])()],So.prototype,"fileName",void 0),So=Object(d["a"])([p["a"]],So);var ko=So,wo=ko,xo=Object(T["a"])(wo,Co,jo,!1,null,null,null),Eo=xo.exports,To=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container manager-cabinet content modal-dialog-user"},[a("h1",[t._v("Профиль пользователя")]),t.userState.user.person?a("div",{staticClass:"content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[t.userState.user.person.photo?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.imageModal",modifiers:{imageModal:!0}}]},[a("img",{staticClass:"photo",attrs:{src:t.photoThumbnailSrc}})]):t._e()],1),a("div",{staticClass:"col-10"},[a("div",{staticClass:"row bg"},[a("div",{staticClass:"col-3"},[t._v("Фамилия:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.person?t.userState.user.person.lastname:"-"))])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[t._v("Имя:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.person?t.userState.user.person.firstname:"-"))])]),a("div",{staticClass:"row bg"},[a("div",{staticClass:"col-3"},[t._v("Отчество:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.person?t.userState.user.person.middlename:"-"))])])])]),a("div",{staticClass:"row bg"},[a("div",{staticClass:"col-3"},[t._v("Адрес электронной почты:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.email))])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[t._v("Роль пользователя:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.resolvedRole))])]),t.userState.user.contractor?a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[t._v("Место работы:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.contractor.name))])]):t._e(),t.userState.user.person?a("div",{staticClass:"row bg"},[a("div",{staticClass:"col-3"},[t._v("Занимаемая должность:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.post))])]):t._e(),t.userState.user.contractor?a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("img",{staticClass:"photo",attrs:{src:t.resolvedLogoSrc}})]),a("div",{staticClass:"col-10"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[t._v("Полное наименование:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.contractor.full_name))])]),a("div",{staticClass:"row bg"},[a("div",{staticClass:"col-3"},[t._v("ИНН:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.contractor.inn))])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[t._v("КПП:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.userState.user.contractor.kpp))])]),a("div",{staticClass:"row bg"},[a("div",{staticClass:"col-3"},[t._v("Адрес:")]),a("div",{staticClass:"col-9"},[t._v(t._s(t.resolvedAddress))])])])]):t._e(),a("image-modal",{model:{value:t.photoSrc,callback:function(e){t.photoSrc=e},expression:"photoSrc"}})],1):a("div",{staticClass:"content"},[a("div",{staticClass:"alert alert-info"},[t._v("\n            Для пользователя не задано Физическое Лицо\n        ")])])])},Po=[],Fo=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"resolvedRole",get:function(){return"superadmin"===this.userState.user.role?"Администратор":"Управляющий"}},{key:"photoThumbnailSrc",get:function(){return this.userState.user.person?""===this.userState.user.person.photo||null===this.userState.user.person.photo?"/images/social.png":"".concat(_,"/storage/").concat(this.userState.user.person.photo):"/images/social.png"}},{key:"photoSrc",get:function(){return this.userState.user.person?""===this.userState.user.person.photo||null===this.userState.user.person.photo?"/images/social.png":"".concat(_,"/storage/").concat(this.userState.user.person.photo):"/images/social.png"}},{key:"resolvedLogoSrc",get:function(){return""===this.userState.user.contractor.logo||null===this.userState.user.contractor.logo?"/images/logo.png":this.userState.user.contractor.logo}},{key:"resolvedAddress",get:function(){var t=this.userState.user.contractor_address;if(null===t||void 0===t)return"";var e=[];return null!==t.index&&""!==t.index&&e.push(t.index),null!==t.city&&""!==t.city&&e.push(t.city),null!==t.street&&""!==t.street&&e.push(t.street),null!==t.build&&""!==t.build&&e.push(t.build),e.join(", ")}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("user")],Fo.prototype,"userState",void 0),Object(d["a"])([m["a"]],Fo.prototype,"logout",void 0),Fo=Object(d["a"])([Object(p["a"])({components:{ImageModal:Ut}})],Fo);var $o=Fo,Mo=$o,Lo=Object(T["a"])(Mo,To,Po,!1,null,null,null),Ro=Lo.exports,Io=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-container content"},[a("h1",[t._v("Панель редактирования данных")]),a("div",{staticClass:"grid-data"},[t._m(0),a("div",t._l(t.layerState.layers,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-7"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",on:{click:function(a){return t.showLayer(e)}}},[t._v("Редактор данных")]),a("button",{staticClass:"btn-info",on:{click:function(a){return t.showMap(e)}}},[t._v("Картографический редактор")])])]),a("div",{staticClass:"col-5"},[a("label",{staticClass:"title"},[t._v(t._s(e.module.title))]),a("label",{staticClass:"description",domProps:{innerHTML:t._s(e.module.description)}})])])})),0),t._m(1)])])},Do=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-7"},[t._v("Доступные данные")]),a("div",{staticClass:"col-5"},[t._v("Наименование модуля")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-7"},[t._v("Доступные данные")]),a("div",{staticClass:"col-5"},[t._v("Наименование модуля")])])}],No=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){this.managerLayerGetByContractor()}},{key:"showLayer",value:function(t){this.$router.push("/manager/elements/".concat(t.id))}},{key:"showMap",value:function(t){this.$router.push("/manager/gis")}}]),e}(p["f"]);Object(d["a"])([Object(m["a"])("managerLayerGetByContractor")],No.prototype,"managerLayerGetByContractor",void 0),Object(d["a"])([Object(m["b"])("managerLayer")],No.prototype,"layerState",void 0),No=Object(d["a"])([p["a"]],No);var Ao=No,zo=Ao,Go=Object(T["a"])(zo,Io,Do,!1,null,null,null),Uo=Go.exports,Bo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager manager-container content"},[a("h1",[t._v('Редактор открытых данных слоя "'+t._s(t.layerState.layer.title)+'"')]),a("button",{staticClass:"btn btn-info",attrs:{"data-toggle":"modal","data-target":"#singleInformationModal"},on:{click:t.createElement}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("\n        Создать новый элемент\n    ")]),a("button",{staticClass:"btn btn-info btn-right",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("\n        Назад\n    ")]),a("div",{staticClass:"grid-data"},[t._m(0),t._l(t.elementState.elements,(function(e){return a("div",{staticClass:"row row-body"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"title"},[t._v(t._s(e.title))]),a("label",{staticClass:"description"}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn-info",attrs:{"data-toggle":"modal","data-target":"#singleInformationModal"},on:{click:function(a){return t.showElementInfo(e)}}},[t._v("Изменить")]),a("button",{staticClass:"btn-danger",attrs:{"data-toggle":"modal","data-target":"#sureModal"},on:{click:function(a){return t.setSureModalContent(e)}}},[t._v("Удалить")])])]),a("div",{staticClass:"col-6"},[a("label",{domProps:{innerHTML:t._s(e.description)}})])])})),t._m(1)],2),a("single-element"),a("sure-modal")],1)},Vo=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-header"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Описание")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-footer"},[a("div",{staticClass:"col-6"},[t._v("Наименование")]),a("div",{staticClass:"col-6"},[t._v("Описание")])])}],qo=function(t){return t>=1e3?(t/=1e3,"".concat(t.toFixed(2)," км")):"".concat(t.toFixed(2)," м")},Wo=function(t){return t},Ho=function(t){if(t>=1e6){var e=(t/1e6).toFixed(2),a=(t/1e3).toFixed(2);return"".concat(e," км<sup>2</sup> (").concat(a," Га)")}var r=(t/1).toFixed(2),n=(t/1e3).toFixed(2);return"".concat(r," м<sup>2</sup> (").concat(n," Га)")},Jo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"singleInformationModal",tabindex:"-1",role:"dialog","aria-labelledby":"singleInformationModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"singleInformationModalLabel"}},[0===t.elementState.element.id?a("span",[t._v("Создание нового элемента")]):a("span",[t._v('Изменение элемента "'+t._s(t.elementState.element.title)+'"')])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("additional-group-tabs"),a("additional-information")],1),a("div",{staticClass:"modal-footer"},[t.fieldsNonCompleteness?a("span",{staticClass:"validation-error",staticStyle:{color:"#ff0000","font-size":"10pt"}},[t._v("Проверьте заполненность полей во всех вкладках")]):t._e(),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.update}},[t._v("\n                    Сохранить\n                ")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])])])])},Yo=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ko=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-tabs",attrs:{id:"tabs",role:"tablist"}},[t._m(0),t._l(t.constructorState.tableFields,(function(e){return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:e.groupTechName+"-tab","data-toggle":"tab",href:"#"+e.groupTechName,role:"tab","aria-controls":e.groupTechName,"aria-selected":"false"}},[t._v(t._s(e.group))])])}))],2)},Zo=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{id:"main-tab","data-toggle":"tab",href:"#main",role:"tab","aria-controls":"main","aria-selected":"true"}},[t._v("Главная")])])}],Xo=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerConstructor")],Xo.prototype,"constructorState",void 0),Xo=Object(d["a"])([p["a"]],Xo);var Qo=Xo,ti=Qo,ei=Object(T["a"])(ti,Ko,Zo,!1,null,null,null),ai=ei.exports,ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-content",attrs:{id:"mainContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"main",role:"tabpanel","aria-labelledby":"main-tab"}},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleInformationTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.elementState.element.title,expression:"elementState.element.title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"singleInformationTitle",required:"",placeholder:"Наименование элемента",name:"main-name","data-vv-validate-on":"change|blur"},domProps:{value:t.elementState.element.title},on:{input:function(e){e.target.composing||t.$set(t.elementState.element,"title",e.target.value)}}})]),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first("main-name")))]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"singleInformationDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleInformationDescription",editorToolbar:t.toolbar},model:{value:t.elementState.element.description,callback:function(e){t.$set(t.elementState.element,"description",e)},expression:"elementState.element.description"}})],1)])]),t._l(t.constructorState.tableFields,(function(e){return t.constructorState.isTableExists?a("div",{staticClass:"tab-pane addition-information-tab fade",attrs:{role:"tabpanel","aria-labelledby":e.groupTechName+"-tab",id:e.groupTechName}},t._l(e.columns,(function(e){return a("div",{staticClass:"form-group"},[a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"col-3 col"},[a("label",{attrs:{for:e.tech_title}},[t._v(t._s(e.title)+"\n                        "),e.required?a("span",[t._v("*")]):t._e()])]),a("div",{staticClass:"col-9 col last-in-row"},[a("resolved-field",{attrs:{field:e}})],1)])])})),0):t._e()}))],2)},ni=[],si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["text_field"===t.field.type?a("text-field",{attrs:{field:t.field}}):t._e(),"number_field"===t.field.type?a("number-field",{attrs:{field:t.field}}):t._e(),"long_text_field"===t.field.type?a("long-text-field",{attrs:{field:t.field}}):t._e(),"date_field"===t.field.type?a("date-field",{attrs:{field:t.field}}):t._e(),"one_from_many_field"===t.field.type?a("one-from-many-field",{attrs:{field:t.field}}):t._e(),"many_from_many_field"===t.field.type?a("many-from-many-field",{attrs:{field:t.field}}):t._e(),"doc_field"===t.field.type?a("doc-field",{attrs:{field:t.field}}):t._e(),"link_field"===t.field.type?a("link-field",{attrs:{field:t.field}}):t._e(),"directory_field"===t.field.type?a("directory-field",{attrs:{field:t.field}}):t._e()],1)},oi=[],ii=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:t.getValidateRules,expression:"getValidateRules"}],staticClass:"form-control",attrs:{type:"text",id:t.field.tech_title,"data-vv-validate-on":"change|blur","data-vv-as":"'"+t.field.title+"'",placeholder:t.field.title,name:t.field.tech_title},domProps:{value:t.field.value},on:{input:function(e){e.target.composing||t.$set(t.field,"value",e.target.value)}}}),a("span",{staticClass:"value-length"},[t.valueMinLength>0&&t.valueMaxLength>0?a("label",[t._v("Осталось ввести от "+t._s(t.valueMinLength)+" до "+t._s(t.valueMaxLength)+" симв.")]):t.valueMinLength>0?a("label",[t._v("Осталось ввести ещё минимум "+t._s(t.valueMinLength)+" симв.")]):t.valueMaxLength>0?a("label",[t._v("Можно ввести ещё максимум "+t._s(t.valueMaxLength)+" симв.")]):t._e()]),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first(t.field.tech_title)))])])},li=[],ci=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"getValidateRules",get:function(){var t=[];return!1!==this.field.required&&t.push("required"),this.field.options.max&&t.push("max:".concat(this.field.options.max)),this.field.options.min&&t.push("min:".concat(this.field.options.min)),t.join("|")}},{key:"valueMaxLength",get:function(){return this.field.value||(this.field.value=""),this.field.options.max?this.field.options.max-this.field.value.length:-1}},{key:"valueMinLength",get:function(){return this.field.value||(this.field.value=""),this.field.options.min?this.field.options.min-this.field.value.length:-1}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],ci.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],ci.prototype,"$validator",void 0),ci=Object(d["a"])([p["a"]],ci);var ui=ci,di=ui,pi=Object(T["a"])(di,ii,li,!1,null,null,null),mi=pi.exports,fi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vue-editor",{ref:"wysiwygContents",attrs:{id:t.field.tech_title,editorToolbar:t.toolbar},model:{value:t.field.value,callback:function(e){t.$set(t.field,"value",e)},expression:"field.value"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cleanText,expression:"cleanText"},{name:"validate",rawName:"v-validate",value:t.getValidateRules,expression:"getValidateRules"}],attrs:{type:"hidden",name:t.field.tech_title,"data-vv-validate-on":"change|blur","data-vv-as":"'"+t.field.title+"'"},domProps:{value:t.cleanText},on:{input:function(e){e.target.composing||(t.cleanText=e.target.value)}}}),a("span",{staticClass:"value-length"},[t.valueMinLength>0&&t.valueMaxLength>0?a("label",[t._v("Осталось ввести от "+t._s(t.valueMinLength)+" до "+t._s(t.valueMaxLength)+" симв.")]):t.valueMinLength>0?a("label",[t._v("Осталось ввести ещё минимум "+t._s(t.valueMinLength)+" симв.")]):t.valueMaxLength>0?a("label",[t._v("Можно ввести ещё максимум "+t._s(t.valueMaxLength)+" симв.")]):t._e()]),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first(t.field.tech_title)))])],1)},vi=[],hi=(a("a481"),function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.toolbar=[["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"getValidateRules",get:function(){var t=[];return!1!==this.field.required&&t.push("required"),this.field.options.max&&t.push("max:".concat(this.field.options.max)),this.field.options.min&&t.push("min:".concat(this.field.options.min)),t.join("|")}},{key:"cleanText",get:function(){this.field.value||(this.field.value="");var t=/<[^<>]+>/g;return this.field.value.replace(t,"")}},{key:"valueMaxLength",get:function(){this.field.value||(this.field.value="");var t=/<[^<>]+>/g;return this.field.options.max?this.field.options.max-this.field.value.replace(t,"").length:-1}},{key:"valueMinLength",get:function(){this.field.value||(this.field.value="");var t=/<[^<>]+>/g;return this.field.options.min?this.field.options.min-this.field.value.replace(t,"").length:-1}}]),e}(p["f"]));Object(d["a"])([Object(p["d"])()],hi.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],hi.prototype,"$validator",void 0),Object(d["a"])([Object(p["e"])()],hi.prototype,"toolbar",void 0),hi=Object(d["a"])([Object(p["a"])({components:{VueEditor:Xa["a"]}})],hi);var bi=hi,yi=bi,gi=Object(T["a"])(yi,fi,vi,!1,null,null,null),_i=gi.exports,Oi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"},{name:"validate",rawName:"v-validate",value:t.getValidateRules,expression:"getValidateRules"}],staticClass:"form-control",attrs:{type:"number",id:t.field.tech_title,"data-vv-validate-on":"change|blur","data-vv-as":"'"+t.field.title+"'",placeholder:t.field.title,name:t.field.tech_title,step:"1"},domProps:{value:t.field.value},on:{input:function(e){e.target.composing||t.$set(t.field,"value",e.target.value)}}}),a("span",{staticClass:"value-length"},[t.field.options.min&&t.field.options.max?a("label",[t._v("Введите числовое значение от "+t._s(t.field.options.min)+" до "+t._s(t.field.options.max))]):t.field.options.min?a("label",[t._v("Введите числовое значение не меньше "+t._s(t.field.options.min))]):t.field.options.max?a("label",[t._v("Введите числовое значение не больше "+t._s(t.field.options.max))]):t._e()]),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first(t.field.tech_title)))])])},Ci=[],ji=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"getValidateRules",get:function(){var t=[];return!1!==this.field.required&&t.push("required"),this.field.options.max&&t.push("max_value:".concat(this.field.options.max)),this.field.options.min&&t.push("min_value:".concat(this.field.options.min)),t.push("regex:^[0-9]+"),t.join("|")}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],ji.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],ji.prototype,"$validator",void 0),ji=Object(d["a"])([p["a"]],ji);var Si=ji,ki=Si,wi=Object(T["a"])(ki,Oi,Ci,!1,null,null,null),xi=wi.exports,Ei=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("datepicker",{attrs:{id:t.field.tech_title,"input-class":"form-control",placeholder:"Выбрать дату",language:t.ru,"disabled-dates":t.disabledDates},model:{value:t.resolvedDate,callback:function(e){t.resolvedDate=e},expression:"resolvedDate"}})],1)},Ti=[],Pi=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.ru=cs["ru"],t.disabledDates={ranges:t.getDisabledDates()},t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"getDisabledDates",value:function(){var t=[];return this.field.options.minDate&&t.push({from:new Date(-99999,0,0),to:new Date(this.field.options.minDate)}),this.field.options.maxDate&&t.push({from:new Date(this.field.options.maxDate),to:new Date(99999,0,0)}),t}},{key:"resolvedDate",get:function(){return this.field.value?this.field.value:""},set:function(t){this.field.value=t}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],Pi.prototype,"field",void 0),Object(d["a"])([Object(p["e"])()],Pi.prototype,"ru",void 0),Object(d["a"])([Object(p["e"])()],Pi.prototype,"disabledDates",void 0),Object(d["a"])([Object(p["c"])("validator")],Pi.prototype,"$validator",void 0),Pi=Object(d["a"])([Object(p["a"])({components:{Datepicker:us["a"]}})],Pi);var Fi=Pi,$i=Fi,Mi=Object(T["a"])($i,Ei,Ti,!1,null,null,null),Li=Mi.exports,Ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.field.enums,(function(e){return a("div",{staticClass:"one-from-many-div"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.resolvedValue,expression:"resolvedValue"}],staticClass:"form-control",attrs:{type:"radio",id:e},domProps:{value:e,checked:t._q(t.resolvedValue,e)},on:{change:function(a){t.resolvedValue=e}}}),a("label",{attrs:{for:e}},[t._v(t._s(e))])])})),0)},Ii=[],Di=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"resolvedValue",get:function(){return this.field.value||(this.field.value=this.field.options.default),this.field.value},set:function(t){this.field.value=t}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],Di.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],Di.prototype,"$validator",void 0),Di=Object(d["a"])([p["a"]],Di);var Ni=Di,Ai=Ni,zi=Object(T["a"])(Ai,Ri,Ii,!1,null,null,null),Gi=zi.exports,Ui=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.field.enums,(function(e){return a("div",{staticClass:"many-from-many-div"},[a("label",{attrs:{for:e}},[t._v(t._s(e))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.resolvedValue,expression:"resolvedValue"}],staticClass:"form-control",attrs:{type:"checkbox",id:e},domProps:{value:e,checked:Array.isArray(t.resolvedValue)?t._i(t.resolvedValue,e)>-1:t.resolvedValue},on:{change:function(a){var r=t.resolvedValue,n=a.target,s=!!n.checked;if(Array.isArray(r)){var o=e,i=t._i(r,o);n.checked?i<0&&(t.resolvedValue=r.concat([o])):i>-1&&(t.resolvedValue=r.slice(0,i).concat(r.slice(i+1)))}else t.resolvedValue=s}}})])})),a("span",{staticClass:"value-length"},[a("label",[t._v("Необходимо выбрать от "+t._s(t.field.options.min)+" до "+t._s(t.field.options.max)+" знач.")])]),t.resolvedValue.length<t.field.options.min?a("span",{staticClass:"validation-error"},[t._v("Необходимо выбрать минимум "+t._s(t.field.options.min)+" знач.")]):t.resolvedValue.length>t.field.options.max?a("span",{staticClass:"validation-error"},[t._v("Необходимо выбрать максимум "+t._s(t.field.options.max)+" знач.")]):t._e()],2)},Bi=[],Vi=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"resolvedValue",get:function(){return this.field.value?this.field.value:this.field.options.default},set:function(t){this.field.value=t}}]),e}(p["f"]);Object(d["a"])([Object(p["d"])()],Vi.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],Vi.prototype,"$validator",void 0),Vi=Object(d["a"])([p["a"]],Vi);var qi=Vi,Wi=qi,Hi=Object(T["a"])(Wi,Ui,Bi,!1,null,null,null),Ji=Hi.exports,Yi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"files-uploader",class:{drag:t.isDragover},on:{drop:function(e){return e.preventDefault(),t.dropFiles(e)},dragover:function(e){return e.preventDefault(),t.dragoverFiles(e)},dragleave:function(e){return e.preventDefault(),t.dragleaveFiles(e)}}},[null!==t.field.value&&0!==t.field.value||0!==t.uploadsErrors.length?a("div",{staticClass:"files-list"},[t._l(t.field.value,(function(e,r){return a("div",{staticClass:"file-item-extension",class:{deleted:e.isDeleted},attrs:{title:e.title}},[a("div",{staticClass:"file-item-container"},[t.isImage(e)?a("a",{staticClass:"image",style:"background-image:url('"+e.path+"')",attrs:{target:"_blank",href:e.path}}):a("div",{staticClass:"image"},[a("a",{attrs:{href:e.path,target:"_blank"}},[a("img",{attrs:{src:t.getDocumentSrc(e)}})])]),a("label",{staticClass:"file-title"},[t._v(t._s(e.title))]),!0===e.isDeleted?a("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(e){return t.restoreFile(r)}}},[a("label",[t._v("восстановить файл")])]):a("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(e){return t.deleteFile(r)}}},[a("label",[t._v("удалить файл")])])])])})),t._l(t.uploadsErrors,(function(e,r){return a("div",{staticClass:"file-item error-file-item",attrs:{title:e.title}},[a("label",{staticClass:"file-title"},[t._v('Ошибка при загрузке "'+t._s(e.title)+'": '+t._s(e.error))])])}))],2):a("label",{staticClass:"add-file-info"},[t._v('\n            Перетащите файлы в данную зону или нажмите кнопку "Добавить Файлы", что бы выбрать файлы в проводнике\n        ')]),a("button",{staticClass:"add-file btn btn-primary",attrs:{title:t.buttonText},on:{click:t.selectFiles}},[t._v(t._s(t.buttonText))]),a("input",{ref:"files",staticClass:"files",attrs:{type:"file",multiple:"true",accept:t.resolvedAccept},on:{change:t.uploadFiles}})])])},Ki=[],Zi=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.buttonText="Добавить файлы",t.isDragover=!1,t.uploadsErrors=[],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"selectFiles",value:function(){this.$el.querySelector("input.files").click()}},{key:"uploadFiles",value:function(){var t=this;null===this.field.value&&(this.field.value=[]),this.buttonText="Загрузка ...";var e=this.$refs.files;if(e&&e.files&&0!==e.files.length){var a=new FormData,r=!0,n=!1,s=void 0;try{for(var o,i=e.files[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value;a.append("files[]",l,l.name)}}catch(c){n=!0,s=c}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}a.append("metadata_id",this.field.id),a.append("current_count",this.field.value.length),y.a.post("".concat(g,"files/upload"),a).then((function(e){t.field.value=t.field.value.concat(e.data.result),t.uploadsErrors=e.data.errors,t.buttonText="Добавить файлы"})).catch((function(e){k.notify(),t.buttonText="Добавить файлы"}))}}},{key:"dropFiles",value:function(t){var e=this,a=t.dataTransfer.files;if(a){null===this.field.value&&(this.field.value=[]);var r=new FormData,n=!0,s=!1,o=void 0;try{for(var i,l=a[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var c=i.value;r.append("files[]",c,c.name)}}catch(u){s=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(s)throw o}}r.append("metadata_id",this.field.id),r.append("current_count",this.field.value.length),y.a.post("".concat(g,"files/upload"),r).then((function(t){e.field.value=e.field.value.concat(t.data.result),e.uploadsErrors=t.data.errors,e.buttonText="Добавить файлы"})).catch((function(t){k.notify(),e.buttonText="Добавить файлы"})),this.isDragover=!1}}},{key:"dragoverFiles",value:function(){this.isDragover=!0}},{key:"dragleaveFiles",value:function(){this.isDragover=!1}},{key:"deleteFile",value:function(t){var e=Object.assign({},this.field.value[t],{isDeleted:!0});this.field.value.splice(t,1,e)}},{key:"restoreFile",value:function(t){var e=Object.assign({},this.field.value[t],{isDeleted:!1});this.field.value.splice(t,1,e)}},{key:"isImage",value:function(t){return-1!==["jpg","jpeg","png","gif","bmp"].indexOf(t.extension)}},{key:"getDocumentSrc",value:function(t){return-1!==["jpg","jpeg","png","gif","bmp"].indexOf(t.extension)?t.path:-1!==["doc","docx"].indexOf(t.extension)?"/images/word.png":-1!==["xls","xlsx"].indexOf(t.extension)?"/images/excel.png":-1!==["ppt","pptx"].indexOf(t.extension)?"/images/powerpoint.png":-1!==["psd"].indexOf(t.extension)?"/images/photoshop.png":-1!==["ai","svg"].indexOf(t.extension)?"/images/program.png":-1!==["3g2","3gp","avi","flv","f4v","m4v","mkv","mov","mp4","webm","wmv","vod"].indexOf(t.extension)?"/images/vlc.png":"/images/window.png"}},{key:"resolvedAccept",get:function(){return this.field.enums.map((function(t){return"."+t})).join(",")}}]),e}(p["f"]);Object(d["a"])([Object(p["e"])()],Zi.prototype,"buttonText",void 0),Object(d["a"])([Object(p["e"])()],Zi.prototype,"isDragover",void 0),Object(d["a"])([Object(p["e"])()],Zi.prototype,"uploadsErrors",void 0),Object(d["a"])([Object(p["d"])()],Zi.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],Zi.prototype,"$validator",void 0),Zi=Object(d["a"])([p["a"]],Zi);var Xi=Zi,Qi=Xi,tl=Object(T["a"])(Qi,Yi,Ki,!1,null,null,null),el=tl.exports,al=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedElementTitle,expression:"selectedElementTitle"},{name:"validate",rawName:"v-validate",value:t.getValidateRules,expression:"getValidateRules"}],staticClass:"form-control",attrs:{type:"text",id:t.field.tech_title,placeholder:t.field.title,name:t.field.title,readonly:"","data-vv-validate-on":"change|blur","data-vv-as":"'"+t.field.title+"'","data-toggle":"modal","data-target":"#layerSelectModal-"+t.field.tech_title},domProps:{value:t.selectedElementTitle},on:{input:function(e){e.target.composing||(t.selectedElementTitle=e.target.value)}}}),a("div",{staticClass:"actions"},[a("button",{staticClass:"btn btn-link btn-danger",on:{click:t.clean}},[t._v("Очистить")])]),a("span",{staticClass:"value-length"}),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first(t.field.title)))])]),a("div",{staticClass:"modal fade",attrs:{id:"layerSelectModal-"+t.field.tech_title,tabindex:"-1",role:"dialog","aria-labelledby":"linkFieldLayersListLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Начните ввод для поиска"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("div",{staticClass:"layer-items"},t._l(t.layers,(function(e){return 0!==t.elementsFilter(e.elements).length?a("div",{staticClass:"layer-item"},[a("h4",[t._v(t._s(e.title))]),t._l(t.elementsFilter(e.elements),(function(e){return a("button",{staticClass:"btn btn-link",attrs:{"data-dismiss":"modal"},on:{click:function(a){return t.selectElement(e)}}},[t._v("\n                                "+t._s(e.title)+"\n                            ")])}))],2):t._e()})),0),t.isEmptyList?a("div",{staticClass:"alert alert-info"},[t._v("Список элементов пуст.")]):t._e()])])])])])},rl=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Поиск необходимого Элемента")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],nl=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.search="",t.selectedElementTitle="",t.layers=[],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeFieldValue",value:function(){this.selectedElementTitle=null!==this.field.value?this.field.value.title:""}},{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.selectedElementTitle=null!==this.field.value?this.field.value.title:"",e=this.field.options.layers.map((function(t){return t.id})),t.next=4,y.a.post("".concat(g,"gis/layer/few"),{layers:e});case 4:a=t.sent,this.layers=a.data;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"elementsFilter",value:function(t){var e=this;return t.filter((function(t){return t.title.toLowerCase().indexOf(e.search.toLowerCase())+1}))}},{key:"selectElement",value:function(t){this.field.value=t,this.selectedElementTitle=t.title}},{key:"clean",value:function(){this.field.value=null}},{key:"getValidateRules",get:function(){var t=[];return!1!==this.field.required&&t.push("required"),t.join("|")}},{key:"isEmptyList",get:function(){var t=this,e=!0;return this.layers.forEach((function(a){0!==t.elementsFilter(a.elements).length&&(e=!1)})),e}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerElement")],nl.prototype,"elementState",void 0),Object(d["a"])([Object(p["e"])()],nl.prototype,"search",void 0),Object(d["a"])([Object(p["e"])()],nl.prototype,"selectedElementTitle",void 0),Object(d["a"])([Object(p["e"])()],nl.prototype,"layers",void 0),Object(d["a"])([Object(p["d"])()],nl.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],nl.prototype,"$validator",void 0),Object(d["a"])([Object(p["g"])("field.value",{deep:!0})],nl.prototype,"onChangeFieldValue",null),nl=Object(d["a"])([p["a"]],nl);var sl=nl,ol=sl,il=Object(T["a"])(ol,al,rl,!1,null,null,null),ll=il.exports,cl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"col-6 col"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{id:"singleUserRole"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.field,"value",e.target.multiple?a:a[0])}}},t._l(t.directoryState.entities,(function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.value))])})),0)])])},ul=[],dl=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){this.getAllDirectoryEntities(this.field.options.linkedDirectory)}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("directoryForConstructor")],dl.prototype,"directoryState",void 0),Object(d["a"])([m["a"]],dl.prototype,"getAllDirectoryEntities",void 0),Object(d["a"])([Object(p["d"])()],dl.prototype,"field",void 0),Object(d["a"])([Object(p["c"])("validator")],dl.prototype,"$validator",void 0),dl=Object(d["a"])([p["a"]],dl);var pl=dl,ml=pl,fl=Object(T["a"])(ml,cl,ul,!1,null,null,null),vl=fl.exports,hl=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(p["f"]);Object(d["a"])([Object(p["d"])()],hl.prototype,"field",void 0),hl=Object(d["a"])([Object(p["a"])({components:{ManyFromManyField:Ji,OneFromManyField:Gi,TextField:mi,LongTextField:_i,NumberField:xi,DateField:Li,DocField:el,LinkField:ll,DirectoryField:vl}})],hl);var bl=hl,yl=bl,gl=Object(T["a"])(yl,si,oi,!1,null,null,null),_l=gl.exports,Ol=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.style={},t.toolbar=[["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerLayerGetById({id:this.$route.params.id});case 2:this.style=Object.assign({},this.layerState.layer.style);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(p["f"]);Object(d["a"])([m["a"]],Ol.prototype,"managerLayerGetById",void 0),Object(d["a"])([Object(m["b"])("managerConstructor")],Ol.prototype,"constructorState",void 0),Object(d["a"])([Object(m["b"])("managerLayer")],Ol.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],Ol.prototype,"elementState",void 0),Object(d["a"])([Object(p["e"])("style")],Ol.prototype,"style",void 0),Object(d["a"])([Object(p["e"])()],Ol.prototype,"toolbar",void 0),Object(d["a"])([Object(p["c"])("validator")],Ol.prototype,"$validator",void 0),Ol=Object(d["a"])([Object(p["a"])({components:{ResolvedField:_l,VueEditor:Xa["a"]}})],Ol);var Cl=Ol,jl=Cl,Sl=(a("8cf1"),Object(T["a"])(jl,ri,ni,!1,null,null,null)),kl=Sl.exports,wl=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.$validator=t.$validator,t.fieldsNonCompleteness=!1,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"update",value:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.fieldsNonCompleteness=!1,t.managerElementUpdate(),$("#singleInformationModal").modal("hide")):t.fieldsNonCompleteness=!0}))}}]),e}(p["f"]);Object(d["a"])([Object(p["e"])("validator")],wl.prototype,"$validator",void 0),Object(d["a"])([m["a"]],wl.prototype,"managerElementUpdate",void 0),Object(d["a"])([Object(m["b"])("managerElement")],wl.prototype,"elementState",void 0),Object(d["a"])([Object(p["e"])()],wl.prototype,"fieldsNonCompleteness",void 0),wl=Object(d["a"])([Object(p["a"])({components:{AdditionalInformation:kl,AdditionalGroupTabs:ai,VueEditor:Xa["a"]}})],wl);var xl=wl,El=xl,Tl=Object(T["a"])(El,Jo,Yo,!1,null,null,null),Pl=Tl.exports,Fl=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerLayerGetById({id:this.$route.params.id});case 2:return this.managerElementGetByLayer({layerId:this.$route.params.id}),t.next=5,this.managerConstructorGetByLayer({layerId:this.$route.params.id});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setSureModalContent",value:function(t){var e=this;this.setSureModal({title:"Удалить элемент?",text:'Вы уверены, что хотите удалить элемент "'.concat(t.title,'" из системы?'),action:function(){var a=Object(nt["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.managerElementDelete({element_id:t.id,element_title:t.title});case 2:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})}},{key:"createElement",value:function(){this.managerElementUnsetSingle({layer_id:this.$route.params.id}),this.managerConstructorUnsetAdditionalData(),this.managerConstructorGetAdditionalData({layerId:this.$route.params.id})}},{key:"showElementInfo",value:function(t){this.constructorState.element=Object.assign({},t),this.managerConstructorGetAdditionalData({layerId:this.layerState.layer.id}),this.managerElementSetSingle(t)}},{key:"setLength",value:function(t){return qo(t)}},{key:"setPerimeter",value:function(t){return Wo(t)}},{key:"setArea",value:function(t){return Ho(t)}}]),e}(p["f"]);Object(d["a"])([m["a"]],Fl.prototype,"managerLayerGetById",void 0),Object(d["a"])([m["a"]],Fl.prototype,"managerElementGetByLayer",void 0),Object(d["a"])([m["a"]],Fl.prototype,"managerElementSetSingle",void 0),Object(d["a"])([m["a"]],Fl.prototype,"managerElementUnsetSingle",void 0),Object(d["a"])([m["a"]],Fl.prototype,"managerElementDelete",void 0),Object(d["a"])([m["a"]],Fl.prototype,"managerConstructorGetByLayer",void 0),Object(d["a"])([m["a"]],Fl.prototype,"managerConstructorGetAdditionalData",void 0),Object(d["a"])([m["a"]],Fl.prototype,"managerConstructorUnsetAdditionalData",void 0),Object(d["a"])([m["a"]],Fl.prototype,"setSureModal",void 0),Object(d["a"])([Object(m["b"])("managerLayer")],Fl.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],Fl.prototype,"elementState",void 0),Object(d["a"])([Object(m["b"])("managerConstructor")],Fl.prototype,"constructorState",void 0),Fl=Object(d["a"])([Object(p["a"])({components:{SingleElement:Pl,SureModal:kt}})],Fl);var $l=Fl,Ml=$l,Ll=Object(T["a"])(Ml,Bo,Vo,!1,null,null,null),Rl=Ll.exports,Il=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manager-geom-data-container"},[a("div",{staticClass:"geom-data manager"},[a("ol-map",{attrs:{editor:!0,modifyElement:t.elementState.element},on:{selected:t.onSelected,modifyend:t.onModifyend,drawend:t.onDrawend}}),a("div",{staticClass:"geom-data-list"},[0===t.layerState.layer.id?a("layers-list"):0===t.elementState.element.id&&!1===t.elementState.magicElement.active&&""===t.elementState.search?a("elements-list"):0===t.elementState.element.id&&!1===t.elementState.magicElement.active?a("search-elements-list"):!1===t.elementState.magicElement.active?a("single-element"):a("magic-element")],1)],1),a("sure-modal"),a("search-address")],1)},Dl=[],Nl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"layers-list",staticClass:"layers-list"},[a("div",{staticClass:"header"},[a("h2",[t._v("Картографические слои")]),a("div",{staticClass:"search-panel"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",name:"element-search",placeholder:"поиск элементов по имени или описанию"},domProps:{value:t.search},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchInit(e)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("button",{on:{click:t.searchInit}},[a("i",{staticClass:"fa fa-search"})])])]),a("ul",{staticClass:"data-list layers-list"},t._l(t.layerState.layers,(function(e,r){return a("li",{key:e.id,staticClass:"layer-item"},[a("span",{staticClass:"layer-item-content",attrs:{title:"К элементам слоя "+e.title},on:{click:function(a){return t.managerLayerSetSingle({layer:e})}}},[a("label",[t._v(t._s(e.title))]),a("i",{staticClass:"fa fa-angle-right"})])])})),0)])},Al=[],zl=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.search="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerLayerGetByContractor();case 2:this.setMapStyles({styles:this.layerState.styles}),e=JSON.parse(localStorage.getItem("layerState.layer")),null!==e&&this.managerLayerSetSingle({layer:e});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"searchInit",value:function(){this.search.length<3?k.notifyWithCustomMessage("Для поиска введите минимум три символа"):this.elementState.search=this.search}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerLayer")],zl.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],zl.prototype,"elementState",void 0),Object(d["a"])([m["a"]],zl.prototype,"managerLayerGetByContractor",void 0),Object(d["a"])([m["a"]],zl.prototype,"managerLayerSetSingle",void 0),Object(d["a"])([m["a"]],zl.prototype,"setMapStyles",void 0),Object(d["a"])([Object(p["e"])()],zl.prototype,"search",void 0),zl=Object(d["a"])([Object(p["a"])({components:{}})],zl);var Gl=zl,Ul=Gl,Bl=Object(T["a"])(Ul,Nl,Al,!1,null,null,null),Vl=Bl.exports,ql=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"elements-list",staticClass:"elements-list"},[a("div",{staticClass:"header"},[a("div",{staticClass:"btn",attrs:{title:"Вернуться к списку слоёв"},on:{click:function(e){return t.getLayersList()}}},[a("i",{staticClass:"fa fa-angle-left"})]),a("div",{staticClass:"btn-checked",class:{checked:t.checkedAll},attrs:{title:"Отобразить все элементы на карте"},on:{click:function(e){return t.selectLayer()}}}),a("h2",[t._v(t._s(t.layerState.layer.title))]),a("div",{staticClass:"btn btn-action btn-magic-element",attrs:{title:"Массовое создание Элементов"},on:{click:function(e){return t.managerMagicElementSetSingle({layer_id:t.layerState.layer.id})}}},[a("i",{staticClass:"fas fa-magic"})]),a("div",{staticClass:"btn btn-action btn-add-element",attrs:{title:"Создать элемент"},on:{click:function(e){return t.createElement()}}},[a("i",{staticClass:"fas fa-plus-circle"})]),t.resolvedDeleteAllButtonShow?a("div",{staticClass:"btn btn-action btn-delete-element",attrs:{"data-toggle":"modal","data-target":"#sureModal",title:"Удалить все отмеченные Элементы"},on:{click:function(e){return t.setSureModalContentDeleteAll()}}},[a("i",{staticClass:"fas fa-trash"})]):t._e(),a("div",{staticClass:"search-panel"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",name:"element-search",placeholder:"поиск элементов по имени или описанию"},domProps:{value:t.search},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchInit(e)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("button",{on:{click:t.searchInit}},[a("i",{staticClass:"fa fa-search"})])])]),a("div",{staticClass:"scroll-container",class:{pages:t.elementState.paginator.count>1}},[a("vue-scrollbar",{ref:"scrollbar",staticClass:"scrollbar scrollbar-min"},[a("ul",{staticClass:"data-list elements-list"},t._l(t.elementState.elements,(function(e,r){return a("li",{key:e.id,staticClass:"element-item"},[a("span",{staticClass:"element-item-content"},[e.geometry?a("div",{staticClass:"btn-checked element-item-select",class:{checked:e.checked},attrs:{title:"Отобразить на карте"},on:{click:function(e){return t.selectElement(r)}}}):a("i",{staticClass:"fa fa-exclamation-triangle",on:{click:function(e){return t.addGeomery(r)}}}),!0===e.checked?a("label",{attrs:{title:"Показать элемент"},on:{click:function(a){return t.focusOfFeature({id:e.id})}}},[t._v(t._s(e.title))]):a("label",{attrs:{title:"Показать элемент"},on:{click:function(e){return t.selectElement(r)}}},[t._v(t._s(e.title))]),void 0!==e.next&&0!==e.next.length?a("button",{staticClass:"btn-action btn-show-link",class:{active:e.showGraph},attrs:{title:"Отобразить связанные элементы"},on:{click:function(e){return t.showLinkElements(r)}}},[a("i",{staticClass:"fa fa-link"})]):t._e(),a("button",{staticClass:"btn-action btn-edit",attrs:{title:"Редактировать элемент"},on:{click:function(e){return t.getSingleElement(r)}}},[a("i",{staticClass:"fa fa-pen"})]),a("button",{staticClass:"btn-action btn-delete",attrs:{title:"Удалить элемент","data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent(r)}}},[a("i",{staticClass:"fas fa-trash"})])])])})),0)])],1),t.elementState.paginator.count>20?a("div",{staticClass:"pages-container"},t._l(t.elementState.paginator.count,(function(e){return e<=3||Math.abs(t.elementState.paginator.current-e)<=3||t.elementState.paginator.count-e<=3?a("span",{key:e,staticClass:"page",class:{current:e===t.elementState.paginator.current,delimiter:t.elementState.paginator.count-e===3||t.elementState.paginator.current-e===3}},[t.elementState.paginator.count-e===3||t.elementState.paginator.current-e===3?a("label",[t._v("...")]):e===t.elementState.paginator.current?a("label",[t._v(t._s(e))]):a("button",{on:{click:function(a){t.elementState.paginator.current=e}}},[t._v(t._s(e))])]):t._e()})),0):t.elementState.paginator.count>1?a("div",{staticClass:"pages-container"},t._l(t.elementState.paginator.count,(function(e){return a("span",{key:e,staticClass:"page",class:{current:e===t.elementState.paginator.current}},[a("button",{on:{click:function(a){t.elementState.paginator.current=e}}},[t._v(t._s(e))])])})),0):t._e()])},Wl=[],Hl=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.checkedAll=!1,t.search="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.elementState.paginator.current=1,this.managerElementGetCountByLayer({layerId:this.layerState.layer.id}),localStorage.setItem("layerState.layer",JSON.stringify(this.layerState.layer)),t.next=5,this.managerElementGetLimitByLayer({layerId:this.layerState.layer.id});case 5:this.localStorageCheckedElements();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onChangeCurrentPage",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerElementGetLimitByLayer({layerId:this.layerState.layer.id});case 2:this.localStorageCheckedElements(),this.$nextTick((function(){e.$refs.scrollbar.scrollToY(0)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getLayersList",value:function(){localStorage.removeItem("layerState.layer"),this.managerLayerUnsetSingle()}},{key:"selectLayer",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.checkedAll=!this.checkedAll,this.elementState.elements.forEach((function(t,e){!0===a.checkedAll?(a.check(e),a.localStorageAddElement(t)):(a.uncheck(e),a.localStorageRemoveElement(t))})),!0===this.checkedAll&&(e=this.elementState.elements.map((function(t){return t.id})),this.focusOfFeatures({ids:e}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectElement",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=!this.elementState.elements[e].checked,r=Object.assign({},this.elementState.elements[e],{checked:!0}),!0===a?(this.check(e),this.localStorageAddElement(r),this.focusOfFeature({id:r.id})):(this.uncheck(e),this.localStorageRemoveElement(r));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"check",value:function(t){var e=Object.assign({},this.elementState.elements[t],{checked:!0});this.elementState.elements.splice(t,1,e),this.drawElement(e)}},{key:"uncheck",value:function(t){var e=Object.assign({},this.elementState.elements[t],{checked:!1,showGraph:!1});this.elementState.elements.splice(t,1,e),this.eraseElement(e),this.checkedAll=!1}},{key:"createElement",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.managerElementUnsetSingle({layer_id:this.layerState.layer.id}),t.next=3,this.managerElementUpdate();case 3:this.setInteraction({mode:this.layerState.layer.geometry_type});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addGeomery",value:function(t){var e=Object.assign({},this.elementState.elements[t]);this.managerElementSetSingle({element:e}),e.geometry||this.setInteraction({mode:this.layerState.layer.geometry_type})}},{key:"getSingleElement",value:function(t){var e=Object.assign({},this.elementState.elements[t]);void 0===e.checked||!1===e.checked?this.selectElement(t):this.focusOfFeature({id:e.id}),this.managerElementSetSingle({element:e}),this.setInteraction({mode:null!==e.geometry?"modify":this.layerState.layer.geometry_type})}},{key:"showLinkElements",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){var a,r,n,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=!this.elementState.elements[e].showGraph,!0!==a){t.next=9;break}return t.next=4,this.managerElementGetGraph({i:e});case 4:r=Object.assign({},this.elementState.elements[e],{showGraph:a}),this.elementState.elements.splice(e,1,r),this.drawElement(r),t.next=12;break;case 9:n=Object.assign({},this.elementState.elements[e],{showGraph:a}),this.elementState.elements.splice(e,1,n),n.next.forEach((function(t){s.removeFeaturesArrowFromMap({first:n,second:t.next_element}),s.eraseElement(t.next_element)}));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"drawElement",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addFeatureToMap({id:t.id,layer_id:t.layer_id,geom:t.geometry,property:{id:t.id,layer_id:t.layer_id,title:t.title,description:t.description,lenght:t.lenght,area:t.area,perimeter:t.perimeter,revision:3}}),void 0===t.next||0===t.next.lenght||!0!==t.showGraph&&!0!==a||t.next.forEach((function(a){void 0!==a.next_element&&(e.addFeaturesArrowToMap({first:t,second:a.next_element}),e.drawElement(a.next_element,!0))}))}},{key:"eraseElement",value:function(t){var e=this;this.removeFeatureFromMap({id:t.id}),void 0!==t.next&&0!==t.next.length&&t.next.forEach((function(a){void 0!==a.next_element&&(e.removeFeaturesArrowFromMap({first:t,second:a.next_element}),e.eraseElement(a.next_element))}))}},{key:"setSureModalContent",value:function(t){var e=this,a=Object.assign({},this.elementState.elements[t]);this.setSureModal({title:"Удалить элемент?",text:"Вы уверены, что хотите удалить элемент '".concat(a.title,"' из системы?"),action:function(){var r=Object(nt["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.managerElementDelete({element_id:a.id,element_title:a.title});case 2:a.geometry&&e.eraseElement(a),e.elementState.elements.splice(t,1);case 4:case"end":return r.stop()}}),r)})));function n(){return r.apply(this,arguments)}return n}()})}},{key:"setSureModalContentDeleteAll",value:function(){var t=this;this.setSureModal({title:"Удалить элементы?",text:"Вы уверены, что хотите удалить все отмеченные элементы из системы?",action:function(){var e=Object(nt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.managerElementDeleteChecked({layer_id:t.layerState.layer.id});case 2:t.elementState.elements.forEach((function(e,a){!0===e.checked&&t.eraseElement(e)})),t.elementState.elements=t.elementState.elements.filter((function(t){return!0!==t.checked})),t.checkedAll=!1;case 5:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}()})}},{key:"localStorageCheckedElements",value:function(){var t=this,e=JSON.parse(localStorage.getItem("elementState.checked"));null!==e&&(this.checkedAll=0!==this.elementState.elements.length,this.elementState.elements.forEach((function(a,r){-1!==e.indexOf(a.id)?t.check(r):t.checkedAll=!1})))}},{key:"localStorageAddElement",value:function(t){var e=JSON.parse(localStorage.getItem("elementState.checked"));null===e&&(e=[]),e.push(t.id),localStorage.setItem("elementState.checked",JSON.stringify(e))}},{key:"localStorageRemoveElement",value:function(t){var e=JSON.parse(localStorage.getItem("elementState.checked"));e=null===e?[]:e.filter((function(e){return t.id!==e})),localStorage.setItem("elementState.checked",JSON.stringify(e))}},{key:"searchInit",value:function(){this.search.length<3?k.notifyWithCustomMessage("Для поиска введите минимум три символа"):this.elementState.search=this.search}},{key:"resolvedDeleteAllButtonShow",get:function(){return 0!==this.elementState.elements.filter((function(t){return!0===t.checked})).length}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerLayer")],Hl.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],Hl.prototype,"elementState",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerElementGetLimitByLayer",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerElementGetCountByLayer",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerElementSetSingle",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerElementUnsetSingle",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerElementUpdate",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerElementDelete",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerElementDeleteChecked",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerElementGetGraph",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerMagicElementSetSingle",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerMagicElementUnsetSingle",void 0),Object(d["a"])([m["a"]],Hl.prototype,"managerLayerUnsetSingle",void 0),Object(d["a"])([m["a"]],Hl.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],Hl.prototype,"addFeaturesArrowToMap",void 0),Object(d["a"])([m["a"]],Hl.prototype,"removeFeatureFromMap",void 0),Object(d["a"])([m["a"]],Hl.prototype,"removeFeaturesArrowFromMap",void 0),Object(d["a"])([m["a"]],Hl.prototype,"focusOfFeature",void 0),Object(d["a"])([m["a"]],Hl.prototype,"focusOfFeatures",void 0),Object(d["a"])([m["a"]],Hl.prototype,"setInteraction",void 0),Object(d["a"])([Object(p["e"])()],Hl.prototype,"checkedAll",void 0),Object(d["a"])([Object(p["e"])()],Hl.prototype,"search",void 0),Object(d["a"])([m["a"]],Hl.prototype,"setSureModal",void 0),Object(d["a"])([Object(p["g"])("elementState.paginator.current")],Hl.prototype,"onChangeCurrentPage",null),Hl=Object(d["a"])([Object(p["a"])({})],Hl);var Jl=Hl,Yl=Jl,Kl=Object(T["a"])(Yl,ql,Wl,!1,null,null,null),Zl=Kl.exports,Xl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"elements-list",staticClass:"elements-list"},[a("div",{staticClass:"header"},[a("div",{staticClass:"btn",attrs:{title:"Вернуться к списку слоёв"},on:{click:function(e){return t.getLayersList()}}},[a("i",{staticClass:"fa fa-angle-left"})]),a("div",{staticClass:"btn-checked",class:{checked:t.checkedAll},attrs:{title:"Отобразить все элементы на карте"},on:{click:function(e){return t.selectAllElement()}}}),a("h2",[t._v('Поиск: "'+t._s(t.elementState.search)+'"')]),a("div",{staticClass:"search-panel"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",name:"element-search",placeholder:"поиск элементов по имени или описанию"},domProps:{value:t.search},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchInit(e)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("button",{on:{click:t.searchInit}},[a("i",{staticClass:"fa fa-search"})])])]),a("div",{staticClass:"scroll-container",class:{pages:t.elementState.paginator.count>1}},[a("vue-scrollbar",{ref:"scrollbar",staticClass:"scrollbar scrollbar-min"},[a("ul",{staticClass:"data-list elements-list"},t._l(t.elementState.elements,(function(e,r){return a("li",{key:e.id,staticClass:"element-item"},[a("span",{staticClass:"element-item-content"},[e.geometry?a("div",{staticClass:"btn-checked element-item-select",class:{checked:e.checked},attrs:{title:"Отобразить на карте"},on:{click:function(e){return t.selectElement(r)}}}):a("i",{staticClass:"fa fa-exclamation-triangle",on:{click:function(e){return t.addGeomery(r)}}}),!0===e.checked?a("label",{attrs:{title:"Показать элемент"},on:{click:function(a){return t.focusOfFeature({id:e.id})}}},[t._v(t._s(e.title))]):a("label",{attrs:{title:"Показать элемент"},on:{click:function(e){return t.selectElement(r)}}},[t._v(t._s(e.title))]),void 0!==e.next&&0!==e.next.length?a("button",{staticClass:"btn-action btn-show-link",class:{active:e.showGraph},attrs:{title:"Отобразить связанные элементы"},on:{click:function(e){return t.showLinkElements(r)}}},[a("i",{staticClass:"fa fa-link"})]):t._e(),a("button",{staticClass:"btn-action btn-edit",attrs:{title:"Редактировать элемент"},on:{click:function(e){return t.getSingleElement(r)}}},[a("i",{staticClass:"fa fa-pen"})]),a("button",{staticClass:"btn-action btn-delete",attrs:{title:"Удалить элемент","data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent(r)}}},[a("i",{staticClass:"fas fa-trash"})])])])})),0)])],1),t.elementState.paginator.count>20?a("div",{staticClass:"pages-container"},t._l(t.elementState.paginator.count,(function(e){return e<=3||Math.abs(t.elementState.paginator.current-e)<=3||t.elementState.paginator.count-e<=3?a("span",{key:e,staticClass:"page",class:{current:e===t.elementState.paginator.current,delimiter:t.elementState.paginator.count-e===3||t.elementState.paginator.current-e===3}},[t.elementState.paginator.count-e===3||t.elementState.paginator.current-e===3?a("label",[t._v("...")]):e===t.elementState.paginator.current?a("label",[t._v(t._s(e))]):a("button",{on:{click:function(a){t.elementState.paginator.current=e}}},[t._v(t._s(e))])]):t._e()})),0):t.elementState.paginator.count>1?a("div",{staticClass:"pages-container"},t._l(t.elementState.paginator.count,(function(e){return a("span",{key:e,staticClass:"page",class:{current:e===t.elementState.paginator.current}},[a("button",{on:{click:function(a){t.elementState.paginator.current=e}}},[t._v(t._s(e))])])})),0):t._e()])},Ql=[],tc=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.checkedAll=!1,t.search="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.search=this.elementState.search,this.elementState.paginator.current=1,this.managerElementGetCountBySearch(),t.next=5,this.managerElementGetLimitBySearch();case 5:this.localStorageCheckedElements();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onChangeCurrentPage",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerElementGetLimitBySearch();case 2:this.localStorageCheckedElements(),this.$nextTick((function(){e.$refs.scrollbar.scrollToY(0)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getLayersList",value:function(){this.elementState.search=""}},{key:"selectAllElement",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.checkedAll=!this.checkedAll,this.elementState.elements.forEach((function(t,e){!0===a.checkedAll?(a.check(e),a.localStorageAddElement(t)):(a.uncheck(e),a.localStorageRemoveElement(t))})),!0===this.checkedAll&&(e=this.elementState.elements.map((function(t){return t.id})),this.focusOfFeatures({ids:e}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectElement",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=!this.elementState.elements[e].checked,r=Object.assign({},this.elementState.elements[e],{checked:!0}),!0===a?(this.check(e),this.localStorageAddElement(r),this.focusOfFeature({id:r.id})):(this.uncheck(e),this.localStorageRemoveElement(r));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"check",value:function(t){var e=Object.assign({},this.elementState.elements[t],{checked:!0});this.elementState.elements.splice(t,1,e),this.drawElement(e)}},{key:"uncheck",value:function(t){var e=Object.assign({},this.elementState.elements[t],{checked:!1,showGraph:!1});this.elementState.elements.splice(t,1,e),this.eraseElement(e),this.checkedAll=!1}},{key:"getSingleElement",value:function(t){var e=Object.assign({},this.elementState.elements[t]);void 0===e.checked||!1===e.checked?this.selectElement(t):this.focusOfFeature({id:e.id}),this.managerElementSetSingle({element:e});var a=this.layerState.layers.find((function(t){return t.id===e.layer_id}));this.setInteraction({mode:null!==e.geometry?"modify":a.geometry_type})}},{key:"showLinkElements",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){var a,r,n,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=!this.elementState.elements[e].showGraph,!0!==a){t.next=9;break}return t.next=4,this.managerElementGetGraph({i:e});case 4:r=Object.assign({},this.elementState.elements[e],{showGraph:a}),this.elementState.elements.splice(e,1,r),this.drawElement(r),t.next=12;break;case 9:n=Object.assign({},this.elementState.elements[e],{showGraph:a}),this.elementState.elements.splice(e,1,n),n.next.forEach((function(t){s.removeFeaturesArrowFromMap({first:n,second:t.next_element}),s.eraseElement(t.next_element)}));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"drawElement",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addFeatureToMap({id:t.id,layer_id:t.layer_id,geom:t.geometry,property:{id:t.id,layer_id:t.layer_id,title:t.title,description:t.description,lenght:t.lenght,area:t.area,perimeter:t.perimeter,revision:3}}),void 0===t.next||0===t.next.lenght||!0!==t.showGraph&&!0!==a||t.next.forEach((function(a){void 0!==a.next_element&&(e.addFeaturesArrowToMap({first:t,second:a.next_element}),e.drawElement(a.next_element,!0))}))}},{key:"eraseElement",value:function(t){var e=this;this.removeFeatureFromMap({id:t.id}),void 0!==t.next&&0!==t.next.length&&t.next.forEach((function(a){void 0!==a.next_element&&(e.removeFeaturesArrowFromMap({first:t,second:a.next_element}),e.eraseElement(a.next_element))}))}},{key:"setSureModalContent",value:function(t){var e=this,a=Object.assign({},this.elementState.elements[t]);this.setSureModal({title:"Удалить элемент?",text:"Вы уверены, что хотите удалить элемент '".concat(a.title,"' из системы?"),action:function(){var r=Object(nt["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.managerElementDelete({element_id:a.id,element_title:a.title});case 2:a.geometry&&e.eraseElement(a),e.elementState.elements.splice(t,1);case 4:case"end":return r.stop()}}),r)})));function n(){return r.apply(this,arguments)}return n}()})}},{key:"setSureModalContentDeleteAll",value:function(){}},{key:"localStorageCheckedElements",value:function(){var t=this,e=JSON.parse(localStorage.getItem("elementState.checked"));null!==e&&(this.checkedAll=0!==this.elementState.elements.length,this.elementState.elements.forEach((function(a,r){-1!==e.indexOf(a.id)?t.check(r):t.checkedAll=!1})))}},{key:"localStorageAddElement",value:function(t){var e=JSON.parse(localStorage.getItem("elementState.checked"));null===e&&(e=[]),e.push(t.id),localStorage.setItem("elementState.checked",JSON.stringify(e))}},{key:"localStorageRemoveElement",value:function(t){var e=JSON.parse(localStorage.getItem("elementState.checked"));e=null===e?[]:e.filter((function(e){return t.id===e})),localStorage.setItem("elementState.checked",JSON.stringify(e))}},{key:"searchInit",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.search.length<3)){t.next=4;break}k.notifyWithCustomMessage("Для поиска введите минимум три символа"),t.next=10;break;case 4:return this.elementState.search=this.search,this.elementState.paginator.current=1,this.managerElementGetCountBySearch(),t.next=9,this.managerElementGetLimitBySearch();case 9:this.localStorageCheckedElements();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"resolvedDeleteAllButtonShow",get:function(){return 0!==this.elementState.elements.filter((function(t){return!0===t.checked})).length}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerLayer")],tc.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],tc.prototype,"elementState",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerElementGetLimitBySearch",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerElementGetCountBySearch",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerElementSetSingle",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerElementUnsetSingle",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerElementUpdate",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerElementDelete",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerElementDeleteChecked",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerElementGetGraph",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerMagicElementSetSingle",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerMagicElementUnsetSingle",void 0),Object(d["a"])([m["a"]],tc.prototype,"managerLayerUnsetSingle",void 0),Object(d["a"])([m["a"]],tc.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],tc.prototype,"addFeaturesArrowToMap",void 0),Object(d["a"])([m["a"]],tc.prototype,"removeFeatureFromMap",void 0),Object(d["a"])([m["a"]],tc.prototype,"removeFeaturesArrowFromMap",void 0),Object(d["a"])([m["a"]],tc.prototype,"focusOfFeature",void 0),Object(d["a"])([m["a"]],tc.prototype,"focusOfFeatures",void 0),Object(d["a"])([m["a"]],tc.prototype,"setInteraction",void 0),Object(d["a"])([Object(p["e"])()],tc.prototype,"checkedAll",void 0),Object(d["a"])([Object(p["e"])()],tc.prototype,"search",void 0),Object(d["a"])([m["a"]],tc.prototype,"setSureModal",void 0),Object(d["a"])([Object(p["g"])("elementState.paginator.current")],tc.prototype,"onChangeCurrentPage",null),tc=Object(d["a"])([Object(p["a"])({})],tc);var ec=tc,ac=ec,rc=Object(T["a"])(ac,Xl,Ql,!1,null,null,null),nc=rc.exports,sc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"single-element",staticClass:"single-element"},[a("div",{staticClass:"header"},[t.isChanged?a("div",{staticClass:"btn",attrs:{title:"Вернуться к списку элементов","data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent()}}},[a("i",{staticClass:"fa fa-angle-left"})]):a("div",{staticClass:"btn",attrs:{title:"Вернуться к списку элементов"},on:{click:function(e){return t.getElementsList()}}},[a("i",{staticClass:"fa fa-angle-left"})]),a("h2",[t._v(t._s(t.elementState.element.title))]),a("div",{staticClass:"btn btn-action btn-update-element",attrs:{title:"Сохранить элемент"},on:{click:function(e){return t.update()}}},[a("i",{staticClass:"fa fa-floppy-o"})])]),a("div",[a("additional-group-tabs"),a("additional-information",{ref:"tabs"})],1)])},oc=[],ic=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addition-group-tabs"},[a("ul",{ref:"tablist",staticClass:"nav nav-tabs",style:"margin-left: "+t.leftMargin+"px!important",attrs:{id:"tabs",role:"tablist"}},[t._m(0),t._l(t.constructorState.tableFields,(function(e){return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:e.groupTechName+"-tab","data-toggle":"tab",href:"#"+e.groupTechName,role:"tab","aria-controls":e.groupTechName,"aria-selected":"false"}},[t._v(t._s(e.group))])])}))],2),t.showLeftButton?a("div",{staticClass:"btn btn-nav-tabs-scroll left",on:{click:function(e){return t.scrollLeft()}}},[a("i",{staticClass:"fa fa-angle-right"})]):t._e(),t.showRightButton?a("div",{staticClass:"btn btn-nav-tabs-scroll right",on:{click:function(e){return t.scrollRight()}}},[a("i",{staticClass:"fa fa-angle-left"})]):t._e()])},lc=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{id:"main-tab","data-toggle":"tab",href:"#main",role:"tab","aria-controls":"main","aria-selected":"true"}},[t._v("Главная")])])}],cc=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.leftMargin=0,t.showLeftButton=!1,t.showRightButton=!1,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeTableFields",value:function(){var t=this.$refs.tablist;if(void 0===this.$refs.tablist)return!1;this.showLeftButton=t.clientWidth-400>0}},{key:"scrollLeft",value:function(){var t=this.$refs.tablist,e=-1*(t.clientWidth-400),a=this.leftMargin-200;this.leftMargin=a<e?e:a,this.leftMargin===e&&(this.showLeftButton=!1),this.showRightButton=!0}},{key:"scrollRight",value:function(){var t=this.leftMargin+200;this.leftMargin=t>0?0:t,0===this.leftMargin&&(this.showRightButton=!1),this.showLeftButton=!0}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerConstructor")],cc.prototype,"constructorState",void 0),Object(d["a"])([Object(p["e"])()],cc.prototype,"leftMargin",void 0),Object(d["a"])([Object(p["e"])()],cc.prototype,"showLeftButton",void 0),Object(d["a"])([Object(p["e"])()],cc.prototype,"showRightButton",void 0),Object(d["a"])([Object(p["g"])("constructorState.tableFields",{deep:!0})],cc.prototype,"onChangeTableFields",null),cc=Object(d["a"])([p["a"]],cc);var uc=cc,dc=uc,pc=Object(T["a"])(dc,ic,lc,!1,null,null,null),mc=pc.exports,fc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-content",attrs:{id:"mainContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"main",role:"tabpanel","aria-labelledby":"main-tab"}},[a("form",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"title",attrs:{for:"singleInformationTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.elementState.element.title,expression:"elementState.element.title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"singleInformationTitle",required:"",placeholder:"Наименование элемента",name:"main-name","data-vv-validate-on":"change|blur"},domProps:{value:t.elementState.element.title},on:{input:function(e){e.target.composing||t.$set(t.elementState.element,"title",e.target.value)}}}),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first("main-name")))])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"title",attrs:{for:"singleInformationDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleInformationDescription",editorToolbar:t.toolbar},model:{value:t.elementState.element.description,callback:function(e){t.$set(t.elementState.element,"description",e)},expression:"elementState.element.description"}})],1),a("div",{staticClass:"form-group"},[a("label",{staticClass:"title",attrs:{for:"singleInformationPrevious"}},[t._v("Предыдущий Элемент")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.resolvedPreviousElement,expression:"resolvedPreviousElement"}],staticClass:"form-control",attrs:{type:"text",id:"singleInformationPrevious",readonly:"",placeholder:"Предыдущий Элемент",name:"previous-element","data-toggle":"modal","data-target":"#selectPreviousElementModal"},domProps:{value:t.resolvedPreviousElement},on:{input:function(e){e.target.composing||(t.resolvedPreviousElement=e.target.value)}}}),a("div",{staticClass:"actions"},[a("a",{staticClass:"btn btn-link btn-danger",on:{click:t.managerElementPreviousUnsetSingle}},[t._v("Очистить")])])])])]),t._l(t.constructorState.tableFields,(function(e){return t.constructorState.isTableExists?a("div",{staticClass:"tab-pane addition-information-tab fade",attrs:{role:"tabpanel","aria-labelledby":e.groupTechName+"-tab",id:e.groupTechName}},[a("div",{staticClass:"scroll-container"},[a("vue-scrollbar",{ref:"Scrollbar",refInFor:!0,staticClass:"scrollbar scrollbar-min"},[a("div",t._l(e.columns,(function(e){return a("div",{staticClass:"form-group"},[a("label",{staticClass:"title",attrs:{for:e.tech_title}},[t._v("\n                            "+t._s(e.title)+"\n                            "),e.required?a("span",[t._v("*")]):t._e()]),a("resolved-field",{attrs:{field:e}})],1)})),0)])],1)]):t._e()})),a("div",{staticClass:"modal fade",attrs:{id:"selectPreviousElementModal",tabindex:"-1",role:"dialog","aria-labelledby":"selectPreviousElementModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Начните ввод для поиска"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("div",{staticClass:"layer-items"},t._l(t.layers,(function(e){return 0!==t.elementsFilter(e.elements).length?a("div",{staticClass:"layer-item"},[a("h4",[t._v(t._s(e.title))]),t._l(t.elementsFilter(e.elements),(function(e){return a("button",{staticClass:"btn btn-link",attrs:{"data-dismiss":"modal"},on:{click:function(a){return t.selectElement(e)}}},[t._v("\n                                "+t._s(e.title)+"\n                            ")])}))],2):t._e()})),0),t.resolvedLayersList?a("div",{staticClass:"alert alert-info"},[t._v("Список элементов пуст.")]):t._e()])])])])],2)},vc=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Выбор предыдущего Элемента")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],hc=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.style={},t.toolbar=[["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t.layers=[],t.search="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("".concat(g,"manager/layer/contractor/get"));case 2:e=t.sent,this.layers=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"elementsFilter",value:function(t){var e=this;return t.filter((function(t){return t.title.toLowerCase().indexOf(e.search.toLowerCase())+1}))}},{key:"selectElement",value:function(t){this.elementState.element.previous={id:this.elementState.element.previous.id,element_id:t.id,next_element_id:this.elementState.element.id,element:t}}},{key:"resolvedPreviousElement",get:function(){return void 0===this.elementState.element.previous||null===this.elementState.element.previous.element?"":this.elementState.element.previous.element.title}},{key:"resolvedLayersList",get:function(){var t=this,e=!0;return this.layers.forEach((function(a){0!==t.elementsFilter(a.elements).length&&(e=!1)})),e}}]),e}(p["f"]);Object(d["a"])([m["a"]],hc.prototype,"managerLayerGetById",void 0),Object(d["a"])([m["a"]],hc.prototype,"managerElementPreviousUnsetSingle",void 0),Object(d["a"])([Object(m["b"])("managerConstructor")],hc.prototype,"constructorState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],hc.prototype,"elementState",void 0),Object(d["a"])([Object(p["e"])("style")],hc.prototype,"style",void 0),Object(d["a"])([Object(p["e"])()],hc.prototype,"toolbar",void 0),Object(d["a"])([Object(p["e"])()],hc.prototype,"layers",void 0),Object(d["a"])([Object(p["e"])()],hc.prototype,"search",void 0),Object(d["a"])([Object(p["c"])("validator")],hc.prototype,"$validator",void 0),hc=Object(d["a"])([Object(p["a"])({components:{ResolvedField:_l,VueEditor:Xa["a"]}})],hc);var bc=hc,yc=bc,gc=Object(T["a"])(yc,fc,vc,!1,null,null,null),_c=gc.exports,Oc=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.$validator=t.$validator,t.isChanged=!1,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeElement",value:function(){this.isChanged=!0}},{key:"mounted",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.managerElementById({id:this.elementState.element.id});case 2:this.constructorState.element=Object.assign({},this.elementState.element),this.managerConstructorGetAdditionalData({layerId:this.layerState.layer.id}),this.isChanged=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getElementsList",value:function(){this.setInteraction({mode:"select"});var t=Object.assign({},this.elementState.element);this.managerElementUnsetSingle({layer_id:this.layerState.layer.id}),this.removeFeatureFromMap({id:t.id}),this.addFeatureToMap({id:t.id,layer_id:this.layerState.layer.id,geom:t.geometry,property:{id:t.id,layer_id:this.layerState.layer.id,title:t.title,description:t.description,length:t.length,area:t.area,perimeter:t.perimeter,revision:3}})}},{key:"setSureModalContent",value:function(){var t=this;this.setSureModal({title:"Сохранить изменения?",text:'Сохранить изменения элемента "'.concat(this.elementState.element.title,'"?'),buttonOk:"Сохранить и закрыть",buttonCansel:"Выйти без сохранения",action:function(){var e=Object(nt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.update(!0);case 1:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}(),actionCansel:function(){var e=Object(nt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getElementsList();case 1:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}()})}},{key:"update",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$validator.validateAll().then((function(a){a?(t.managerElementUpdate(),!0===e&&t.getElementsList(),t.isChanged=!1):k.notifyWithCustomMessage("Проверьте заполненность полей во всех вкладках")}))}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerLayer")],Oc.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],Oc.prototype,"elementState",void 0),Object(d["a"])([Object(m["b"])("managerConstructor")],Oc.prototype,"constructorState",void 0),Object(d["a"])([m["a"]],Oc.prototype,"managerElementById",void 0),Object(d["a"])([m["a"]],Oc.prototype,"managerElementUpdate",void 0),Object(d["a"])([m["a"]],Oc.prototype,"managerElementUnsetSingle",void 0),Object(d["a"])([m["a"]],Oc.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],Oc.prototype,"setInteraction",void 0),Object(d["a"])([m["a"]],Oc.prototype,"removeFeatureFromMap",void 0),Object(d["a"])([m["a"]],Oc.prototype,"updateFeatureTitle",void 0),Object(d["a"])([m["a"]],Oc.prototype,"managerConstructorGetAdditionalData",void 0),Object(d["a"])([m["a"]],Oc.prototype,"setSureModal",void 0),Object(d["a"])([Object(p["e"])("validator")],Oc.prototype,"$validator",void 0),Object(d["a"])([Object(p["e"])()],Oc.prototype,"isChanged",void 0),Object(d["a"])([Object(p["g"])("elementState.element",{deep:!0})],Oc.prototype,"onChangeElement",null),Oc=Object(d["a"])([Object(p["a"])({components:{AdditionalGroupTabs:mc,AdditionalInformation:_c}})],Oc);var Cc=Oc,jc=Cc,Sc=Object(T["a"])(jc,sc,oc,!1,null,null,null),kc=Sc.exports,wc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"single-element",staticClass:"single-element"},[a("div",{staticClass:"header"},[t.isChanged||t.isStart?a("div",{staticClass:"btn",attrs:{title:"Вернуться к списку элементов","data-toggle":"modal","data-target":"#sureModal"},on:{click:function(e){return t.setSureModalContent()}}},[a("i",{staticClass:"fa fa-angle-left"})]):a("div",{staticClass:"btn",attrs:{title:"Вернуться к списку элементов"},on:{click:function(e){return t.getElementsList()}}},[a("i",{staticClass:"fa fa-angle-left"})]),a("h2",[t._v("Шаблон")]),t.isStart?a("div",{staticClass:"btn btn-action btn-update-element",attrs:{title:"Остановить создание цепочки элементов"},on:{click:function(e){return t.stop()}}},[a("i",{staticClass:"fa fa-stop"})]):a("div",{staticClass:"btn btn-action btn-update-element",attrs:{title:"Запустить создание цепочки элементов"},on:{click:function(e){return t.start()}}},[a("i",{staticClass:"fa fa-play"})])]),a("div",[a("additional-group-tabs"),a("additional-information",{ref:"tabs"})],1)])},xc=[],Ec=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addition-group-tabs"},[a("ul",{ref:"tablist",staticClass:"nav nav-tabs",style:"margin-left: "+t.leftMargin+"px!important",attrs:{id:"tabs",role:"tablist"}},[t._m(0),t._l(t.constructorState.tableFields,(function(e){return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:e.groupTechName+"-tab","data-toggle":"tab",href:"#"+e.groupTechName,role:"tab","aria-controls":e.groupTechName,"aria-selected":"false"}},[t._v(t._s(e.group))])])}))],2),t.showLeftButton?a("div",{staticClass:"btn btn-nav-tabs-scroll left",on:{click:function(e){return t.scrollLeft()}}},[a("i",{staticClass:"fa fa-angle-right"})]):t._e(),t.showRightButton?a("div",{staticClass:"btn btn-nav-tabs-scroll right",on:{click:function(e){return t.scrollRight()}}},[a("i",{staticClass:"fa fa-angle-left"})]):t._e()])},Tc=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{id:"main-tab","data-toggle":"tab",href:"#main",role:"tab","aria-controls":"main","aria-selected":"true"}},[t._v("Главная")])])}],Pc=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.leftMargin=0,t.showLeftButton=!1,t.showRightButton=!1,t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeTableFields",value:function(){var t=this.$refs.tablist;if(void 0===this.$refs.tablist)return!1;this.showLeftButton=t.clientWidth-400>0}},{key:"scrollLeft",value:function(){var t=this.$refs.tablist,e=-1*(t.clientWidth-400),a=this.leftMargin-200;this.leftMargin=a<e?e:a,this.leftMargin===e&&(this.showLeftButton=!1),this.showRightButton=!0}},{key:"scrollRight",value:function(){var t=this.leftMargin+200;this.leftMargin=t>0?0:t,0===this.leftMargin&&(this.showRightButton=!1),this.showLeftButton=!0}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerConstructor")],Pc.prototype,"constructorState",void 0),Object(d["a"])([Object(p["e"])()],Pc.prototype,"leftMargin",void 0),Object(d["a"])([Object(p["e"])()],Pc.prototype,"showLeftButton",void 0),Object(d["a"])([Object(p["e"])()],Pc.prototype,"showRightButton",void 0),Object(d["a"])([Object(p["g"])("constructorState.tableFields",{deep:!0})],Pc.prototype,"onChangeTableFields",null),Pc=Object(d["a"])([p["a"]],Pc);var Fc=Pc,$c=Fc,Mc=Object(T["a"])($c,Ec,Tc,!1,null,null,null),Lc=Mc.exports,Rc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-content",attrs:{id:"mainContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"main",role:"tabpanel","aria-labelledby":"main-tab"}},[a("form",[t._m(0),a("div",{staticClass:"form-group"},[a("label",{staticClass:"title",attrs:{for:"singleInformationTitle"}},[t._v("Наименование *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.elementState.magicElement.element.title,expression:"elementState.magicElement.element.title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"singleInformationTitle",required:"",placeholder:"Наименование элемента",name:"main-name","data-vv-validate-on":"change|blur"},domProps:{value:t.elementState.magicElement.element.title},on:{input:function(e){e.target.composing||t.$set(t.elementState.magicElement.element,"title",e.target.value)}}}),a("span",{staticClass:"validation-error"},[t._v(t._s(t.errors.first("main-name")))])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"title",attrs:{for:"singleInformationDescription"}},[t._v("Описание")]),a("vue-editor",{ref:"wysiwygContents",attrs:{id:"singleInformationDescription",editorToolbar:t.toolbar},model:{value:t.elementState.magicElement.element.description,callback:function(e){t.$set(t.elementState.magicElement.element,"description",e)},expression:"elementState.magicElement.element.description"}})],1),a("div",{staticClass:"form-group"},[a("label",{staticClass:"title",attrs:{for:"singleInformationPrevious"}},[t._v("Предыдущий Элемент для первого")]),a("div",{staticClass:"alert alert-info"},[t._v("\n                    Алгоритм массового нанесения объектов предполагает, что элементы будут автоматически связываться между собой (поочередно).\n                    Необходимо указать, к какому элементу должен быть привязан первый элемент в цепочке.\n                ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.resolvedPreviousElement,expression:"resolvedPreviousElement"}],staticClass:"form-control",attrs:{type:"text",id:"singleInformationPrevious",readonly:"",placeholder:"Предыдущий Элемент",name:"previous-element","data-toggle":"modal","data-target":"#selectPreviousElementModal"},domProps:{value:t.resolvedPreviousElement},on:{input:function(e){e.target.composing||(t.resolvedPreviousElement=e.target.value)}}}),a("div",{staticClass:"actions"},[a("a",{staticClass:"btn btn-link btn-danger",on:{click:t.managerElementPreviousUnsetSingle}},[t._v("Очистить")])])])])]),t._l(t.constructorState.tableFields,(function(e){return t.constructorState.isTableExists?a("div",{staticClass:"tab-pane addition-information-tab fade",attrs:{role:"tabpanel","aria-labelledby":e.groupTechName+"-tab",id:e.groupTechName}},[a("div",{staticClass:"scroll-container"},[a("vue-scrollbar",{ref:"Scrollbar",refInFor:!0,staticClass:"scrollbar scrollbar-min"},[a("div",t._l(e.columns,(function(e){return a("div",{staticClass:"form-group"},[a("label",{staticClass:"title",attrs:{for:e.tech_title}},[t._v("\n                            "+t._s(e.title)+"\n                            "),e.required?a("span",[t._v("*")]):t._e()]),a("resolved-field",{attrs:{field:e}})],1)})),0)])],1)]):t._e()})),a("div",{staticClass:"modal fade",attrs:{id:"selectPreviousElementModal",tabindex:"-1",role:"dialog","aria-labelledby":"selectPreviousElementModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Начните ввод для поиска"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("div",{staticClass:"layer-items"},t._l(t.layers,(function(e){return 0!==t.elementsFilter(e.elements).length?a("div",{staticClass:"layer-item"},[a("h4",[t._v(t._s(e.title))]),t._l(t.elementsFilter(e.elements),(function(e){return a("button",{staticClass:"btn btn-link",attrs:{"data-dismiss":"modal"},on:{click:function(a){return t.selectElement(e)}}},[t._v("\n                                "+t._s(e.title)+"\n                            ")])}))],2):t._e()})),0),t.resolvedLayersList?a("div",{staticClass:"alert alert-info"},[t._v("Список элементов пуст.")]):t._e()])])])])],2)},Ic=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alert alert-info"},[t._v("\n                Необходимо заполнить только те поля, которые будут одинаковые для всех элементов в цепочке, а также поля, обязательные для заполнения.\n                "),a("br"),t._v("\n                В наименовании элемента можно использовать специальный символ "),a("b",[t._v("%i")]),t._v(", который будет заменен на порядковый номер элемента в цепочке.\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Выбор предыдущего Элемента")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Dc=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.style={},t.toolbar=[["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]],t.layers=[],t.search="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("".concat(g,"manager/layer/contractor/get"));case 2:e=t.sent,this.layers=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"elementsFilter",value:function(t){var e=this;return t.filter((function(t){return t.title.toLowerCase().indexOf(e.search.toLowerCase())+1}))}},{key:"selectElement",value:function(t){this.elementState.magicElement.element.previous={id:this.elementState.magicElement.element.previous.id,element_id:t.id,next_element_id:this.elementState.magicElement.element.id,element:t}}},{key:"resolvedPreviousElement",get:function(){return null===this.elementState.magicElement.element.previous.element?"":this.elementState.magicElement.element.previous.element.title}},{key:"resolvedLayersList",get:function(){var t=this,e=!0;return this.layers.forEach((function(a){0!==t.elementsFilter(a.elements).length&&(e=!1)})),e}}]),e}(p["f"]);Object(d["a"])([m["a"]],Dc.prototype,"managerLayerGetById",void 0),Object(d["a"])([m["a"]],Dc.prototype,"managerElementPreviousUnsetSingle",void 0),Object(d["a"])([Object(m["b"])("managerConstructor")],Dc.prototype,"constructorState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],Dc.prototype,"elementState",void 0),Object(d["a"])([Object(p["e"])("style")],Dc.prototype,"style",void 0),Object(d["a"])([Object(p["e"])()],Dc.prototype,"toolbar",void 0),Object(d["a"])([Object(p["e"])()],Dc.prototype,"layers",void 0),Object(d["a"])([Object(p["e"])()],Dc.prototype,"search",void 0),Object(d["a"])([Object(p["c"])("validator")],Dc.prototype,"$validator",void 0),Dc=Object(d["a"])([Object(p["a"])({components:{ResolvedField:_l,VueEditor:Xa["a"]}})],Dc);var Nc=Dc,Ac=Nc,zc=Object(T["a"])(Ac,Rc,Ic,!1,null,null,null),Gc=zc.exports,Uc=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.$validator=t.$validator,t.isChanged=!1,t.isStart=!1,t.features=[],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onChangeMagic",value:function(){this.isChanged=!0}},{key:"onChangeMagicElementId",value:function(){-1===this.features.indexOf(this.elementState.magicElement.element.id)&&this.features.push(this.elementState.magicElement.element.id)}},{key:"mounted",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.constructorState.element=Object.assign({},this.elementState.magicElement.element),this.managerConstructorGetAdditionalData({layerId:this.layerState.layer.id}),this.isChanged=!1;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getElementsList",value:function(){this.managerMagicElementUnsetSingle({layer_id:this.layerState.layer.id})}},{key:"setSureModalContent",value:function(){var t=this;this.setSureModal({title:"Выйти?",text:"Процедура массового создания элементов закончится, шаблон будет удален",buttonOk:"Выйти",buttonCansel:"Остаться в редакторе шаблона",action:function(){var e=Object(nt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.stop(),t.getElementsList(),t.features.forEach((function(e,a){0!==a&&0!==e&&0!==t.features[a-1]&&t.removeFeaturesArrowFromMap({first:{id:t.features[a-1]},second:{id:e}})}));case 3:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}()})}},{key:"start",value:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.setInteraction({mode:t.layerState.layer.geometry_type}),t.isStart=!0):k.notifyWithCustomMessage("Проверьте заполненность полей во всех вкладках")}))}},{key:"stop",value:function(){this.setInteraction({mode:"select"}),this.isChanged=!1,this.isStart=!1}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerLayer")],Uc.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],Uc.prototype,"elementState",void 0),Object(d["a"])([Object(m["b"])("managerConstructor")],Uc.prototype,"constructorState",void 0),Object(d["a"])([m["a"]],Uc.prototype,"managerMagicElementUnsetSingle",void 0),Object(d["a"])([m["a"]],Uc.prototype,"setInteraction",void 0),Object(d["a"])([m["a"]],Uc.prototype,"removeFeaturesArrowFromMap",void 0),Object(d["a"])([m["a"]],Uc.prototype,"managerConstructorGetAdditionalData",void 0),Object(d["a"])([m["a"]],Uc.prototype,"setSureModal",void 0),Object(d["a"])([Object(p["e"])("validator")],Uc.prototype,"$validator",void 0),Object(d["a"])([Object(p["e"])()],Uc.prototype,"isChanged",void 0),Object(d["a"])([Object(p["e"])()],Uc.prototype,"isStart",void 0),Object(d["a"])([Object(p["e"])()],Uc.prototype,"features",void 0),Object(d["a"])([Object(p["g"])("elementState.magicElement.element",{deep:!0})],Uc.prototype,"onChangeMagic",null),Object(d["a"])([Object(p["g"])("elementState.magicElement.element.id",{deep:!0})],Uc.prototype,"onChangeMagicElementId",null),Uc=Object(d["a"])([Object(p["a"])({components:{AdditionalGroupTabs:Lc,AdditionalInformation:Gc}})],Uc);var Bc=Uc,Vc=Bc,qc=Object(T["a"])(Vc,wc,xc,!1,null,null,null),Wc=qc.exports,Hc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"search-address-form"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],attrs:{type:"text",name:"address",placeholder:"Введите адрес для поиска"},domProps:{value:t.address},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},input:function(e){e.target.composing||(t.address=e.target.value)}}}),a("button",{staticClass:"btn btn-success"},[a("i",{staticClass:"fa fa-search",on:{click:t.search}})])])},Jc=[],Yc=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.address="",t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"search",value:function(t){var e=this;""!==this.address&&ymaps.geocode(this.address,{results:1}).then((function(t){var a=t.geoObjects.get(0),r=a.geometry.getCoordinates();e.setMapCenter({latitude:r[0],longitude:r[1]})}))}}]),e}(p["f"]);Object(d["a"])([m["a"]],Yc.prototype,"setMapCenter",void 0),Object(d["a"])([Object(p["e"])()],Yc.prototype,"address",void 0),Yc=Object(d["a"])([Object(p["a"])({})],Yc);var Kc=Yc,Zc=Kc,Xc=Object(T["a"])(Zc,Hc,Jc,!1,null,null,null),Qc=Xc.exports,tu=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"onSelected",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==e&&!0!==this.elementState.magicElement.active){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.managerElementById({id:e.id});case 4:this.setInteraction({mode:"modify"}),this.layerState.layer.id!==e.layer_id&&this.managerLayerSetSingle({layer:this.layerState.layers.find((function(t){return t.id===e.layer_id}))});case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onModifyend",value:function(t){this.managerElementUpdateGeometry({id:t.properties.id,geometry:t.geom}),this.elementState.element.geometry=t.geom,this.elementState.elements=this.elementState.elements.map((function(e){return e.id===t.properties.id&&(e.geometry=t.geom),e}))}},{key:"onDrawend",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){var a,r,n,s,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==this.elementState.magicElement.active){t.next=12;break}this.elementState.element.geometry=e.geom,this.managerElementUpdateGeometry({id:this.elementState.element.id,geometry:e.geom}),this.setInteraction({mode:"modify"}),this.addFeatureToMap({id:this.elementState.element.id,layer_id:this.elementState.element.layer_id,geom:this.elementState.element.geometry,property:{id:this.elementState.element.id,layer_id:this.elementState.element.layer_id,title:this.elementState.element.title,description:this.elementState.element.description,lenght:this.elementState.element.length,area:this.elementState.element.area,perimeter:this.elementState.element.perimeter,revision:3}}),this.elementState.elements=this.elementState.elements.map((function(t){return t.id===o.elementState.element.id&&(t.checked=!0,t.geometry=e.geom),t})),a=JSON.parse(localStorage.getItem("elementState.checked")),null===a&&(a=[]),a.push(this.elementState.element.id),localStorage.setItem("elementState.checked",JSON.stringify(a)),t.next=24;break;case 12:return r=Object.assign({},this.elementState.magicElement.element),this.elementState.magicElement.element.geometry=e.geom,t.next=16,this.managerMagicElementUpdate();case 16:n=this.elementState.magicElement.index-1,this.addFeatureToMap({id:this.elementState.magicElement.element.id,layer_id:this.elementState.magicElement.element.layer_id,geom:this.elementState.magicElement.element.geometry,property:{id:this.elementState.magicElement.element.id,layer_id:this.elementState.magicElement.element.layer_id,title:this.elementState.magicElement.element.title.replace("%i",n.toString()),description:this.elementState.magicElement.element.description,lenght:this.elementState.magicElement.element.length,area:this.elementState.magicElement.element.area,perimeter:this.elementState.magicElement.element.perimeter,revision:3}}),s=JSON.parse(localStorage.getItem("elementState.checked")),null===s&&(s=[]),s.push(this.elementState.magicElement.element.id),localStorage.setItem("elementState.checked",JSON.stringify(s)),void 0!==r&&0!==r.id&&this.addFeaturesArrowToMap({first:r,second:this.elementState.magicElement.element}),this.setInteraction({mode:this.layerState.layer.geometry_type});case 24:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("managerLayer")],tu.prototype,"layerState",void 0),Object(d["a"])([Object(m["b"])("managerElement")],tu.prototype,"elementState",void 0),Object(d["a"])([m["a"]],tu.prototype,"managerLayerSetSingle",void 0),Object(d["a"])([m["a"]],tu.prototype,"setInteraction",void 0),Object(d["a"])([m["a"]],tu.prototype,"addFeatureToMap",void 0),Object(d["a"])([m["a"]],tu.prototype,"addFeaturesArrowToMap",void 0),Object(d["a"])([m["a"]],tu.prototype,"managerElementUpdateGeometry",void 0),Object(d["a"])([m["a"]],tu.prototype,"managerMagicElementUpdate",void 0),Object(d["a"])([m["a"]],tu.prototype,"managerElementSetSingle",void 0),Object(d["a"])([m["a"]],tu.prototype,"managerElementById",void 0),tu=Object(d["a"])([Object(p["a"])({components:{OlMap:tn,LayersList:Vl,ElementsList:Zl,SearchElementsList:nc,SingleElement:kc,MagicElement:Wc,SureModal:kt,SearchAddress:Qc}})],tu);var eu=tu,au=eu,ru=Object(T["a"])(au,Il,Dl,!1,null,null,null),nu=ru.exports;r["default"].use(f["a"]);var su=new f["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:F,meta:{roles:[]}},{path:"/manager",name:"manager",component:Q,children:[{path:"/administrator/contractors",name:"administrator-contractors",component:$t,meta:{roles:["superadmin"]}},{path:"/administrator/contractor/:id",name:"administrator-single-contractor",component:Yt,meta:{roles:["superadmin"]}},{path:"/administrator/mo",name:"administrator-contractors-mo",component:ae,meta:{roles:["superadmin"]}},{path:"/administrator/mo/:id",name:"administrator-single-contractors-mo",component:ce,meta:{roles:["superadmin"]}},{path:"/administrator/tos",name:"administrator-contractors-tos",component:ye,meta:{roles:["superadmin"]}},{path:"/administrator/tos/:id",name:"administrator-single-contractors-tos",component:Le,meta:{roles:["superadmin"]}},{path:"/administrator/tszh",name:"administrator-contractors-tszh",component:Be,meta:{roles:["superadmin"]}},{path:"/administrator/tszh/:id",name:"administrator-single-contractors-tszh",component:Xe,meta:{roles:["superadmin"]}},{path:"/administrator/contractors/users/:id",name:"administrator-users",component:Ha,meta:{roles:["superadmin"]}},{path:"/administrator/persons",name:"administrator-persons",component:la,meta:{roles:["superadmin"]}},{path:"/administrator/person/:id",name:"administrator-single-person",component:$a,meta:{roles:["superadmin"]}},{path:"/administrator/modules",name:"administrator-modules",component:lr,meta:{roles:["superadmin"]}},{path:"/administrator/layers",name:"administrator-layers",component:po,meta:{roles:["superadmin"]}},{path:"/administrator/parse/kmz",name:"administrator-parse-kmz",component:Oo,meta:{roles:["superadmin"]}},{path:"/administrator/parse/xls",name:"administrator-parse-xls",component:Eo,meta:{roles:["superadmin"]}},{path:"/manager/desktop",name:"desktop",component:ft,meta:{roles:["superadmin","admin"]}},{path:"/manager/cabinet",name:"manager-cabinet",component:Ro,meta:{roles:["superadmin","admin"]}},{path:"/manager/layers",name:"manager-layers",component:Uo,meta:{roles:["superadmin","admin"]}},{path:"/manager/elements/:id",name:"manager-elements",component:Rl,meta:{roles:["superadmin","admin"]}},{path:"/manager/gis",name:"manager-gis",component:nu,meta:{roles:["superadmin","admin"]}}]}]}),ou=function(t){function e(){return Object(o["a"])(this,e),Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){""!==this.userState.token?this.getUser():su.push({name:"home"})}}]),e}(p["f"]);Object(d["a"])([Object(m["b"])("user")],ou.prototype,"userState",void 0),Object(d["a"])([m["a"]],ou.prototype,"getUser",void 0),ou=Object(d["a"])([Object(p["a"])({})],ou);var iu=ou,lu=iu,cu=(a("5c0b"),Object(T["a"])(lu,n,s,!1,null,null,null)),uu=cu.exports,du=a("2f62"),pu=a("0e44"),mu=a("6ee6"),fu={user:{id:0,email:"",post:"",role:"admin",password:""},users:[],token:"",role:""},vu={getUser:function(t,e){t.user=e,"home"===su.currentRoute.name&&su.push({name:"desktop"})}},hu={getUser:function(t){var e=t.commit,a=t.state;t.dispatch;y.a.get("".concat(g,"user")).then((function(t){var r=t.data;a.role=t.data.role,e("getUser",r)}),(function(){a.token="",su.push({name:"home"})}))},getNewToken:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,r="".concat(g,"refresh"),t.next=5,y.a.post(r,fu.user);case 5:n=t.sent,fu.token="Bearer "+n.data.token,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"logout"));case 4:t.sent,fu.user={id:0,email:"",post:"",role:"admin",password:""},fu.users=[],fu.token="",fu.role="",su.push({name:"home"}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),su.push({name:"home"});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));function e(e,a){return t.apply(this,arguments)}return e}()},bu={state:fu,mutations:vu,actions:hu},yu={regions:[]},gu={getRegions:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(mu["a"])(e),y.a.get("".concat(g,"regions")).then((function(t){yu.regions=t.data}),(function(){k.notify()}));case 2:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},_u={state:yu,actions:gu},Ou=function(t,e){return t.map((function(t){return t.id===e.id&&(t=Object.assign({},t,e)),t}))},Cu=function(t,e){return t.filter((function(t){return t.id!==e.id}))},ju={module:{id:0,title:"",description:"",layers:[],contractors:[]},modules:[]},Su={administratorModuleGetAll:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"manager/module"));case 3:e=t.sent,ju.modules=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),k.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),administratorModuleUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===ju.module.id){t.next=9;break}return t.next=4,y.a.put("".concat(g,"manager/module/").concat(ju.module.id),ju.module);case 4:t.sent,ho.notify("Данные сохранены",'Модуль "'.concat(ju.module.title,'" изменен')),ju.modules=Ou(ju.modules,ju.module),t.next=14;break;case 9:return t.next=11,y.a.post("".concat(g,"manager/module"),ju.module);case 11:e=t.sent,ho.notify("Данные сохранены",'Модуль "'.concat(ju.module.title,'" создан')),ju.modules.push(Object.assign({},ju.module,e.data));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),k.notify();case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),administratorModuleDelete:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===ju.module.id){t.next=7;break}return t.next=4,y.a.delete("".concat(g,"manager/module/").concat(ju.module.id));case 4:t.sent,ho.notify("Данные удалены",'Модуль "'.concat(ju.module.title,'" удален')),ju.modules=Cu(ju.modules,ju.module);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),k.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),administratorModuleSetSingle:function(t,e){Object(mu["a"])(t),ju.module=Object.assign({},ju.module,e)},administratorModuleUnsetSingle:function(){ju.module={id:0,title:"",description:"",layers:[],contractors:[]}}},ku={state:ju,actions:Su},wu={layer:{id:0,alias:"",title:"",description:"",parent_id:0,module_id:0,visibility:!1,geometry_type:"point"},layers:[]},xu={administratorLayerGetAll:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"manager/layer"));case 3:e=t.sent,a=[],e.data.forEach((function(t){a.push(Object.assign({},t,{style:JSON.parse(t.style)}))})),wu.layers=a,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),k.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),administratorLayerGetByType:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"manager/layer/type/").concat(a.type));case 4:r=t.sent,wu.layers=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorLayerUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===wu.layer.id){t.next=9;break}return t.next=4,y.a.put("".concat(g,"manager/layer/").concat(wu.layer.id),Object.assign({},wu.layer,{style:JSON.stringify(wu.layer.style)}));case 4:e=t.sent,ho.notify("Данные сохранены",'Слой "'.concat(wu.layer.title,'" изменен')),wu.layers=Ou(wu.layers,Object.assign({},e.data,{style:JSON.parse(e.data.style)})),t.next=15;break;case 9:return t.next=11,y.a.post("".concat(g,"manager/layer"),Object.assign({},wu.layer,{style:JSON.stringify(wu.layer.style)}));case 11:a=t.sent,ho.notify("Данные сохранены",'Слой "'.concat(wu.layer.title,'" создан')),wu.layer=Object.assign({},a.data,{style:JSON.parse(a.data.style)}),wu.layers.push(wu.layer);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),k.notify();case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}(),administratorLayerDelete:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===wu.layer.id){t.next=7;break}return t.next=4,y.a.delete("".concat(g,"manager/layer/").concat(wu.layer.id));case 4:t.sent,ho.notify("Данные удалены",'Слой "'.concat(wu.layer.title,'" удален')),wu.layers=Cu(wu.layers,wu.layer);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),k.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),administratorLayerSetSingle:function(t,e){Object(mu["a"])(t),wu.layer=Object.assign({},wu.layer,e)},administratorLayerUnsetSingle:function(){wu.layer={id:0,alias:"",title:"",description:"",parent_id:0,module_id:0,visibility:!1,geometry_type:"point"}}},Eu={state:wu,actions:xu},Tu={contractor:{id:0,name:"",full_name:"",inn:"",kpp:"",fias_address_id:0,address:{id:0,unrestricted_value:""},logo:"",parent_id:0},contractors:[]},Pu={administratorContractorGetAll:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"contractor"));case 3:e=t.sent,Tu.contractors=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),k.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),administratorContractorGetById:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"contractor/").concat(a.id));case 4:r=t.sent,Tu.contractor=Object.assign({},r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Tu.contractor.id){t.next=9;break}return t.next=4,y.a.put("".concat(g,"contractor"),Tu.contractor);case 4:e=t.sent,ho.notify("Данные сохранены",'Контрагент "'.concat(Tu.contractor.name,'" изменен')),Tu.contractors=Ou(Tu.contractors,e.data),t.next=14;break;case 9:return t.next=11,y.a.post("".concat(g,"contractor"),Tu.contractor);case 11:a=t.sent,ho.notify("Данные сохранены",'Контрагент "'.concat(Tu.contractor.name,'" создан')),Tu.contractors.push(a.data);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),k.notify();case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),administratorContractorDelete:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Tu.contractor.id){t.next=7;break}return t.next=4,y.a.delete("".concat(g,"contractor/").concat(Tu.contractor.id));case 4:t.sent,ho.notify("Данные удалены",'Контрагент "'.concat(Tu.contractor.name,'" удален')),Tu.contractors=Cu(Tu.contractors,Tu.contractor);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),k.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),administratorContractorSetSingle:function(t,e){Object(mu["a"])(t),Tu.contractor=Object.assign({},Tu.contractor,e)},administratorContractorUnsetSingle:function(){Tu.contractor={id:0,name:"",full_name:"",inn:"",kpp:"",fias_address_id:0,address:{id:0,unrestricted_value:""},logo:""}},administratorContractorAttachToModule:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"contractor/").concat(a.parent,"/attach/module/").concat(a.item));case 3:t.sent,ho.notify("","Модуль подключен к контрагенту"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),k.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorDetachToModule:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"contractor/").concat(a.parent,"/detach/module/").concat(a.item));case 3:t.sent,ho.notify("","Модуль отключен от контрагента"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),k.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorUploadLogo:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),r=new FormData,r.append("file",a.file),t.prev=3,t.next=6,y.a.post("".concat(g,"contractor/upload"),r,{headers:{"Content-Type":"multipart/form-data"}});case 6:n=t.sent,Tu.contractor.logo="".concat(_).concat(n.data.filename),ho.notify("Загрузка завершена",'Изображение "'.concat(a.file.name,'" загружено на сервер')),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),k.notify();case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));function e(e,a){return t.apply(this,arguments)}return e}()},Fu={state:Tu,actions:Pu},$u={contractorTos:{id:0,contractor_id:0,contractor:{id:0,name:"",full_name:""}},contractorsTos:[]},Mu={administratorContractorTosGetAll:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"tos"));case 3:e=t.sent,$u.contractorsTos=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),k.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),administratorContractorTosGetById:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"tos/").concat(a.id));case 4:r=t.sent,$u.contractorTos=Object.assign({},r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorTosUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(mu["a"])(e),t.prev=1,0===$u.contractorTos.id){t.next=10;break}return t.next=5,y.a.put("".concat(g,"tos/").concat($u.contractorTos.id),$u.contractorTos);case 5:r=t.sent,ho.notify("Данные сохранены","ТОС изменён"),$u.contractorsTos=Ou($u.contractorsTos,r.data),t.next=15;break;case 10:return t.next=12,y.a.post("".concat(g,"tos"),$u.contractorTos);case 12:n=t.sent,ho.notify("Данные сохранены","Создан новый ТОС"),$u.contractorsTos.push(n.data);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),k.notify();case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorTosAddAddress:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.post("".concat(g,"tos/address/").concat($u.contractorTos.id),{address:a.address});case 4:r=t.sent,$u.contractorTos.addresses.push(r.data),ho.notify("Адрес добавлен","Адрес добавлен в список адресов ТОС"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorTosDeleteAddress:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.delete("".concat(g,"tos/address/").concat($u.contractorTos.id,"/").concat(a.address.id));case 4:t.sent,$u.contractorTos.addresses=Cu($u.contractorTos.addresses,a.address),ho.notify("Адрес удален","Адрес удален из списка адресов ТОС"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorTosDelete:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===$u.contractorTos.id){t.next=7;break}return t.next=4,y.a.delete("".concat(g,"tos/").concat($u.contractorTos.id));case 4:t.sent,ho.notify("Данные удалены","ТОС удалён"),$u.contractorsTos=Cu($u.contractorsTos,$u.contractorTos);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),k.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),administratorContractorTosSetSingle:function(t,e){Object(mu["a"])(t),$u.contractorTos=Object.assign({},$u.contractorTos,e)},administratorContractorTosUnsetSingle:function(){$u.contractorTos={id:0,contractor_id:0,contractor:{id:0,name:"",full_name:""}}}},Lu={state:$u,actions:Mu},Ru={contractorTszh:{id:0,contractor_id:0,contractor:{id:0,name:"",full_name:""}},contractorsTszh:[]},Iu={administratorContractorTszhGetAll:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"tszh"));case 3:e=t.sent,Ru.contractorsTszh=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),k.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),administratorContractorTszhGetById:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"tszh/").concat(a.id));case 4:r=t.sent,Ru.contractorTszh=Object.assign({},r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorTszhUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(mu["a"])(e),t.prev=1,0===Ru.contractorTszh.id){t.next=10;break}return t.next=5,y.a.put("".concat(g,"tszh/").concat(Ru.contractorTszh.id),Ru.contractorTszh);case 5:r=t.sent,ho.notify("Данные сохранены","ТСЖ изменено"),Ru.contractorsTszh=Ou(Ru.contractorsTszh,r.data),t.next=15;break;case 10:return t.next=12,y.a.post("".concat(g,"tszh"),Ru.contractorTszh);case 12:n=t.sent,ho.notify("Данные сохранены","Создано новое ТСЖ"),Ru.contractorsTszh.push(n.data);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),k.notify();case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorContractorTszhDelete:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Ru.contractorTszh.id){t.next=7;break}return t.next=4,y.a.delete("".concat(g,"tszh/").concat(Ru.contractorTszh.id));case 4:t.sent,ho.notify("Данные удалены","ТСЖ удалёно"),Ru.contractorsTszh=Cu(Ru.contractorsTszh,Ru.contractorTszh);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),k.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),administratorContractorTszhSetSingle:function(t,e){Object(mu["a"])(t),Ru.contractorTszh=Object.assign({},Ru.contractorTszh,e)},administratorContractorTszhUnsetSingle:function(){Ru.contractorTszh={id:0,contractor_id:0,contractor:{id:0,name:"",full_name:""}}}},Du={state:Ru,actions:Iu},Nu={person:{id:0,firstname:"",lastname:"",middlename:"",date_of_birth:"",phones:"",post:"",photo:"",fias_address_id:0,address:{id:0,unrestricted_value:""}},persons:[]},Au={administratorPersonGetAll:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"person"));case 3:e=t.sent,Nu.persons=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),k.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),administratorPersonGetById:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"person/").concat(a.id));case 4:r=t.sent,Nu.person=Object.assign({},r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorPersonUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Nu.person.id){t.next=9;break}return t.next=4,y.a.put("".concat(g,"person/").concat(Nu.person.id),Nu.person);case 4:e=t.sent,ho.notify("Данные сохранены",'Физическое Лицо "'.concat(Nu.person.lastname," ").concat(Nu.person.firstname,'" изменено')),Nu.persons=Ou(Nu.persons,e.data),t.next=15;break;case 9:return t.next=11,y.a.post("".concat(g,"person"),Nu.person);case 11:a=t.sent,ho.notify("Данные сохранены",'Создано Физическое Лицо "'.concat(Nu.person.lastname," ").concat(Nu.person.firstname,'"')),Nu.persons.push(a.data),Nu.person.id=a.data.id;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),k.notify();case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}(),administratorPersonDelete:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Nu.person.id){t.next=7;break}return t.next=4,y.a.delete("".concat(g,"person/").concat(Nu.person.id));case 4:t.sent,ho.notify("Данные удалены",'Физическое Лицо "'.concat(Nu.person.lastname," ").concat(Nu.person.firstname,'" удалено')),Nu.persons=Cu(Nu.persons,Nu.person);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),k.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),administratorPersonSetSingle:function(t,e){Object(mu["a"])(t),Nu.person=Object.assign({},Nu.person,e)},administratorPersonUnsetSingle:function(){Nu.person={id:0,firstname:"",lastname:"",middlename:"",date_of_birth:"",phones:"",post:"",photo:"",fias_address_id:0,address:{id:0,unrestricted_value:""}}},administratorPersonUploadPhoto:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),r=new FormData,r.append("file",a.file),t.prev=3,t.next=6,y.a.post("".concat(g,"person/upload"),r,{headers:{"Content-Type":"multipart/form-data"}});case 6:n=t.sent,Nu.person.photo=n.data.filename,ho.notify("Загрузка завершена",'Изображение "'.concat(a.file.name,'" загружено на сервер')),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),k.notify();case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));function e(e,a){return t.apply(this,arguments)}return e}()},zu={state:Nu,actions:Au},Gu={user:{id:0,email:"",post:"",role:"admin",password:""},users:[]},Uu={administratorUserGetAllByContractor:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"user/").concat(a.contractorId));case 4:r=t.sent,Gu.users=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorUserUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Gu.user.id){t.next=9;break}return t.next=4,y.a.put("".concat(g,"user"),Gu.user);case 4:t.sent,ho.notify("Данные сохранены",'Пользователь "'.concat(Gu.user.email,'" изменен')),Gu.users=Ou(Gu.users,Gu.user),t.next=14;break;case 9:return t.next=11,y.a.post("".concat(g,"user"),Gu.user);case 11:t.sent,ho.notify("Данные сохранены",'Пользователь "'.concat(Gu.user.email,'" создан')),Gu.users.push(Gu.user);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),k.notify();case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),administratorUserDelete:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===Gu.user.id){t.next=7;break}return t.next=4,y.a.delete("".concat(g,"user/").concat(Gu.user.id));case 4:t.sent,ho.notify("Данные удалены",'Пользователь "'.concat(Gu.user.email,'" удален')),Gu.users=Cu(Gu.users,Gu.user);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),k.notify();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),administratorUserSetSingle:function(t,e){Object(mu["a"])(t),Gu.user=Object.assign({},Gu.user,e)},administratorUserUnsetSingle:function(t,e){Object(mu["a"])(t),Gu.user={id:0,email:"",post:"",password:"",role:"admin",contractor_id:e.contractorId}}},Bu={state:Gu,actions:Uu};function Vu(t){var e=[],a=!0,r=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var i=s.value,l=!0,c=!1,u=void 0;try{for(var d,p=i.columns[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value;"many_from_many_field"===m.type&&(m.value=JSON.stringify(m.value)),e.push(m)}}catch(f){c=!0,u=f}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}catch(f){r=!0,n=f}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return e}var qu={isTableExists:!1,tableFields:[]},Wu={administratorConstructorGetByLayer:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dispatch,t.prev=1,t.next=4,y.a.get("".concat(g,"constructor/").concat(a.layerId));case 4:r=t.sent,qu.isTableExists=0!==r.data.length,qu.tableFields=r.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorConstructorUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(mu["a"])(e),t.prev=1,r=Vu(qu.tableFields),!0!==qu.isTableExists){t.next=10;break}return t.next=6,y.a.put("".concat(g,"constructor/").concat(a.layerId),{columns:r});case 6:t.sent,ho.notify("Данные сохранены","Метаданные слоя обновлены"),t.next=15;break;case 10:return t.next=12,y.a.post("".concat(g,"constructor/").concat(a.layerId),{columns:r});case 12:t.sent,qu.isTableExists=!0,ho.notify("Данные сохранены","Метаданные слоя созданы");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),k.notify();case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));function e(e,a){return t.apply(this,arguments)}return e}(),administratorConstructorUnsetSingle:function(){try{qu.isTableExists=!1,qu.tableFields=[]}catch(t){k.notify()}}},Hu={state:qu,actions:Wu},Ju={point:{id:1,showTitle:!0,shape:{points:11,fill:{color:"#009fe3",opacity:0},stroke:{color:"#164194",width:1,opacity:0},radius:5,rotation:0},icon:{src:"".concat(_,"storage/images/layer/default.png"),anchor:[24,24],opacity:0,scale:1,rotation:0},pointType:"shape",font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",offsetY:-6,fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}},list:{hasList:!1,visibility:!1,color:"#000000",opacity:0}},linestring:{id:1,showTitle:!0,stroke:{color:"#164194",opacity:20,width:10},font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",placement:"line",fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}}},polygon:{id:1,showTitle:!0,fill:{color:"#009fe3",opacity:20},stroke:{color:"#164194",width:1,opacity:0},font:{font:"16px Calibri, sans-serif",textBaseline:"bottom",offsetY:-6,fill:{color:"#000000"},stroke:{color:"#ffffff",width:3}}}},Yu={geometryType:"",style:Ju.point},Ku={styleEditorSetGeometryType:function(t,e){Object(mu["a"])(t),Yu.geometryType=e.geometryType},styleEditorSetStyle:function(t,e){Object(mu["a"])(t);var a="point"===Yu.geometryType?Ju.point:"linestring"===Yu.geometryType?Ju.linestring:Ju.polygon;Yu.style=Object.assign({},a,e.style)},styleEditorSetDefaultStyle:function(){var t="point"===Yu.geometryType?Ju.point:"linestring"===Yu.geometryType?Ju.linestring:Ju.polygon;Yu.style=Object.assign({},t)},styleEditorUploadIcon:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),r=new FormData,r.append("file",a.file),t.prev=3,t.next=6,y.a.post("".concat(g,"manager/layer/upload"),r,{headers:{"Content-Type":"multipart/form-data"}});case 6:n=t.sent,s=Yu.style,s.icon.src="".concat(_).concat(n.data.filename),s.icon.anchor=[n.data.width/2,n.data.height/2],Yu.style=Object.assign({},s),ho.notify("Загрузка завершена",'Изображение "'.concat(a.file.name,'" загружено на сервер')),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3),k.notify();case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));function e(e,a){return t.apply(this,arguments)}return e}()},Zu={state:Yu,actions:Ku},Xu={layer:{id:0,alias:"",title:"",description:"",parent_id:0,module_id:0,visibility:!1,geometry_type:"point"},layers:[],styles:[]},Qu={managerLayerGetByContractor:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"manager/layer/contractor/get"));case 3:e=t.sent,Xu.layers=e.data,Xu.styles=e.data.map((function(t){return Object.assign({},JSON.parse(t.style),{id:t.id})})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),k.notify();case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),managerLayerGetById:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"manager/layer/").concat(a.id));case 4:r=t.sent,Xu.layer=Object.assign({},r.data,{style:JSON.parse(r.data.style)}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerLayerSetSingle:function(t,e){Object(mu["a"])(t),Xu.layer=Object.assign({},e.layer)},managerLayerUnsetSingle:function(){Xu.layer={id:0,alias:"",title:"",description:"",parent_id:0,module_id:0,visibility:!1,geometry_type:"point"}}},td={state:Xu,actions:Qu},ed={element:{id:0,layer_id:0,title:"",description:"",address_id:0,geometry:"",length:0,area:0,perimeter:0,previous:{id:0,element_id:0,next_element_id:0,element:null}},elements:[],magicElement:{active:!1,index:1},paginator:{count:0,current:1,limit:50},search:""},ad={managerElementGetByLayer:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,ed.elements=[],t.next=5,y.a.get("".concat(g,"manager/element/layer/").concat(a.layerId));case 5:r=t.sent,ed.elements=r.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementGetLimitByLayer:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,ed.elements=[],t.next=5,y.a.get("".concat(g,"manager/element/layer/").concat(a.layerId,"/").concat(ed.paginator.limit,"/").concat(ed.paginator.current-1));case 5:r=t.sent,ed.elements=r.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementGetCountByLayer:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"manager/element/layer/count/").concat(a.layerId));case 4:r=t.sent,ed.paginator.count=Math.ceil(r.data/ed.paginator.limit),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementGetLimitBySearch:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,ed.elements=[],t.next=5,y.a.get("".concat(g,"manager/element/search/").concat(ed.search,"/").concat(ed.paginator.limit,"/").concat(ed.paginator.current-1));case 5:r=t.sent,ed.elements=r.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementGetCountBySearch:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"manager/element/search/count/").concat(ed.search));case 4:r=t.sent,ed.paginator.count=Math.ceil(r.data/ed.paginator.limit),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementById:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"manager/element/").concat(a.id));case 4:r=t.sent,n=null!==r.data.previous?r.data.previous:{id:0,element_id:0,next_element_id:0,element:null},ed.element=Object.assign({},ed.element,r.data,{previous:n}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.rootState,t.prev=1,ed.element.additionalData=Vu(a.managerConstructor.tableFields),0===ed.element.id){t.next=11;break}return t.next=6,y.a.put("".concat(g,"manager/element/").concat(ed.element.id),ed.element);case 6:r=t.sent,ho.notify("Данные сохранены",'Элемент "'.concat(ed.element.title,'" изменен')),ed.elements=Ou(ed.elements,r.data),t.next=17;break;case 11:return t.next=13,y.a.post("".concat(g,"manager/element"),ed.element);case 13:n=t.sent,ho.notify("Данные сохранены",'Элемент "'.concat(ed.element.title,'" создан')),ed.element=Object.assign({},n.data),ed.elements.push(n.data);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](1),k.notify();case 22:case"end":return t.stop()}}),t,null,[[1,19]])})));function e(e){return t.apply(this,arguments)}return e}(),managerElementUpdateGeometry:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.rootState,t.prev=1,0===a.id){t.next=7;break}return t.next=5,y.a.put("".concat(g,"gis/geometry/").concat(a.id),{geometry:a.geometry});case 5:t.sent,ho.notify("Данные сохранены","Геометрия элемента обновлена");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementDelete:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.delete("".concat(g,"manager/element/").concat(a.element_id));case 4:t.sent,ho.notify("Данные удалены",'Элемент "'.concat(a.element_title,'" удален')),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementDeleteChecked:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,r=ed.elements.filter((function(t){return!0===t.checked})).map((function(t){return t.id})),t.next=5,y.a.post("".concat(g,"manager/element/delete/some"),{elements:r,layer_id:a.layer_id});case 5:t.sent,ho.notify("Данные удалены","Все выделенные элементы удалены из системы"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementSetSingle:function(t,e){Object(mu["a"])(t),ed.element=Object.assign({},ed.element,e.element)},managerElementUnsetSingle:function(t,e){Object(mu["a"])(t),ed.element={id:0,layer_id:e.layer_id,title:"Новый элемент",description:"",address_id:0,geometry:"",length:0,area:0,perimeter:0,previous:{id:0,element_id:0,next_element_id:0,element:null}}},managerElementGetGraph:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"manager/element/graph/").concat(ed.elements[a.i].id));case 4:r=t.sent,n=Object.assign({},ed.elements[a.i],{next:r.data}),ed.elements.splice(a.i,1,n),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerElementPreviousUnsetSingle:function(t,e){Object(mu["a"])(t),ed.element.previous=Object.assign({},ed.element.previous,{element_id:0,next_element_id:0,element:null})},managerMagicElementUpdate:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,t.prev=1,r=Object.assign({},ed.magicElement.element,{id:0}),r.additionalData=Vu(a.managerConstructor.tableFields),r.title=r.title.replace("%i",ed.magicElement.index.toString()),t.next=7,y.a.post("".concat(g,"manager/element"),r);case 7:n=t.sent,ho.notify("Данные сохранены",'Элемент "'.concat(r.title,'" создан')),ed.elements.push(n.data),ed.magicElement.element.id=n.data.id,ed.magicElement.element.previous.element_id=n.data.id,ed.magicElement.index++,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](1),k.notify();case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));function e(e){return t.apply(this,arguments)}return e}(),managerMagicElementSetSingle:function(t,e){Object(mu["a"])(t),ed.magicElement={active:!0,index:1,element:{id:0,layer_id:e.layer_id,title:"",description:"",address_id:0,geometry:"",length:0,area:0,perimeter:0,previous:{id:0,element_id:0,next_element_id:0,element:null}}}},managerMagicElementUnsetSingle:function(t,e){Object(mu["a"])(t),ed.magicElement={active:!1,index:1}}},rd={state:ed,actions:ad},nd={isTableExists:!1,tableFields:[],additionalData:{},element:{id:0,layer_id:0,title:"Новый элемент",description:"",address_id:0,geometry:"",length:0,area:0,perimeter:0,previous:null}},sd={managerConstructorGetByLayer:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dispatch,t.prev=1,t.next=4,y.a.get("".concat(g,"constructor/").concat(a.layerId));case 4:r=t.sent,nd.isTableExists=0!==r.data.length,nd.tableFields=r.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerConstructorGetAdditionalData:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"constructor/").concat(a.layerId,"/").concat(nd.element.id));case 4:r=t.sent,nd.isTableExists=0!==r.data.length,nd.tableFields=id(r.data),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),k.notify();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),managerConstructorUnsetAdditionalData:function(){nd.element={id:0,layer_id:0,title:"Новый элемент",description:"",address_id:0,geometry:"",length:0,area:0,perimeter:0,previous:null};var t=!0,e=!1,a=void 0;try{for(var r,n=nd.tableFields[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var s=r.value,o=!0,i=!1,l=void 0;try{for(var c,u=s.columns[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;d.value=""}}catch(p){i=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}}}catch(p){e=!0,a=p}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}}},od={state:nd,actions:sd};function id(t){return t.map((function(t){return t.columns=t.columns.map((function(t){return"many_from_many_field"===t.type&&(t.value=JSON.parse(t.value)),t})),t.groupTechName=t.group.replace(/\s+/g,""),t}))}var ld={modal:{title:"Вы уверены?",text:"Вы уверены, что хотите удалить этот элемент?",buttonOk:"Да, удалить",buttonCansel:"Отменить",action:!1,actionCansel:!1}},cd={setSureModal:function(t,e){Object(mu["a"])(t),ld.modal=Object.assign({},{title:"Вы уверены?",text:"Вы уверены, что хотите удалить этот элемент?",buttonOk:"Да, удалить",buttonCansel:"Отменить",action:!1,actionCansel:!1},e)}},ud={state:ld,actions:cd},dd={parent:0,list:[],actions:{}},pd={setIncludeList:function(t,e){Object(mu["a"])(t),dd.list=[],e.list.forEach((function(t){var a=yt(t[e.key],e.parent),r=yt(t[e.key],e.availableAsChild);dd.list.push({id:t.id,title:t.title,checked:!1!==a,validByParent:!1!==r})})),dd.parent=e.parent},setIncludeListActions:function(t,e){Object(mu["a"])(t),e.attach&&(dd.actions.attach=e.attach),e.detach&&(dd.actions.detach=e.detach)},toggleIncludeItem:function(t,e){Object(mu["a"])(t),e.item.checked&&dd.actions.attach?dd.actions.attach&&dd.actions.attach({parent:dd.parent,item:e.item.id}):dd.actions.detach&&dd.actions.detach({parent:dd.parent,item:e.item.id})}},md={state:dd,actions:pd},fd={full:!0},vd={toggleLeftMenu:function(){fd.full=!fd.full},getLeftMenuFull:function(t,e){Object(mu["a"])(t),fd.full=e.full}},hd={state:fd,actions:vd},bd=function(t,e,a,r){var n=new br["a"],s=n.readFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3395"});return s.setProperties(a),s.setId(t),s},yd={map:!1,properties:{longitude:48.0335,latitude:46.355,zoom:11,selectorMapContainer:"map"},source:!1,layer:!1,styles:[],interaction:{mode:"select",draw:!1,select:!1},tiles:{}},gd={setMapCenter:function(t,e){Object(mu["a"])(t),yd.properties.longitude=e.longitude?e.longitude:yd.properties.longitude,yd.properties.latitude=e.latitude?e.latitude:yd.properties.latitude,yd.properties.zoom=e.zoom?e.zoom:yd.properties.zoom,!1!==yd.map&&(yd.map.getView().setCenter(Object(Dr["r"])([yd.properties.longitude,yd.properties.latitude],"EPSG:4326","EPSG:3395")),yd.map.getView().setZoom(yd.properties.zoom))},setMapCenterDefault:function(){yd.properties.longitude=48.036,yd.properties.latitude=46.3538,yd.properties.zoom=18,!1!==yd.map&&(yd.map.getView().setCenter(Object(Dr["r"])([yd.properties.longitude,yd.properties.latitude],"EPSG:4326","EPSG:3395")),yd.map.getView().setZoom(yd.properties.zoom))},getMapCenter:function(t,e){if(Object(mu["a"])(t),!1!==yd.map){var a=Object(Dr["r"])(yd.map.getView().getCenter(),"EPSG:3395","EPSG:4326");yd.properties.longitude=a[0],yd.properties.latitude=a[1],yd.properties.zoom=yd.map.getView().getZoom()}},createMap:function(t,e){Object(mu["a"])(t),yd.map=e.map,yd.source=e.source,yd.layer=e.layer},mapUpdateSize:function(){r["default"].nextTick((function(){!1!==yd.map&&yd.map.updateSize()}))},setMapStyles:function(t,e){Object(mu["a"])(t),yd.styles=e.styles,Br(yd.layer,yd.styles)},setInteraction:function(t,e){Object(mu["a"])(t),yd.interaction.mode="point"===e.mode?"Point":"linestring"===e.mode?"LineString":"polygon"===e.mode?"Polygon":"modify"===e.mode?"modify":"select"},addFeatureToMap:function(t,e){if(Object(mu["a"])(t),e.style){if(!e.geom)return;var a=bd(e.id,e.geom,e.property,e.style);yd.source.addFeature(a)}else{var r=bd(e.id,e.geom,e.property,yd.styles.find((function(t){return t.id===e.layer_id})));yd.source.addFeature(r)}},removeFeatureFromMap:function(t,e){Object(mu["a"])(t);var a=yd.source.getFeatureById(e.id);a&&yd.source.removeFeature(a)},updateFeatureTitle:function(t,e){Object(mu["a"])(t)},addFeaturesArrowToMap:function(t,e){if(Object(mu["a"])(t),e.first&&e.second&&-1!==e.first.geometry.indexOf("POINT")&&-1!==e.second.geometry.indexOf("POINT")){var a=/^POINT\((.+)\)$/.exec(e.first.geometry),r=/^POINT\((.+)\)$/.exec(e.second.geometry);if(2===a.length&&2===r.length){var n=bd("graph-".concat(e.first.id,"-").concat(e.second.id),"LINESTRING(".concat(a[1],", ").concat(r[1],")"),{id:"graph-".concat(e.first.id,"-").concat(e.second.id),title:"graph-".concat(e.first.id,"-").concat(e.second.id),x:e.first.id,y:e.second.id},{id:0,stroke:{color:"#a42038",width:1}});yd.source.addFeature(n),a=/^POINT\(([\d\.]+)\s([\d\.]+)\)$/.exec(e.first.geometry),r=/^POINT\(([\d\.]+)\s([\d\.]+)\)$/.exec(e.second.geometry),3===a.length&&r.length}}},removeFeaturesArrowFromMap:function(t,e){Object(mu["a"])(t);var a=yd.source.getFeatureById("graph-".concat(e.first.id,"-").concat(e.second.id));a&&yd.source.removeFeature(a);var r=yd.source.getFeatureById("graph-arrow-".concat(e.first.id,"-").concat(e.second.id));r&&yd.source.removeFeature(r)},focusOfFeature:function(t,e){Object(mu["a"])(t);var a=yd.source.getFeatureById(e.id);a&&Vr(yd.map,a)},focusOfFeatures:function(t,e){Object(mu["a"])(t);var a=[];e.ids.forEach((function(t){var e=yd.source.getFeatureById(t);e&&a.push(e)})),qr(yd.map,a)}},_d={state:yd,actions:gd},Od={path:{path:"",name:""},file:null},Cd={uploadFile:function(t,e){var a=t.state,r=new FormData;return r.append("fileres",e.fileres.files[0]),r.append("identifier",e.identifier),r.append("elementId",e.elementId),new Promise((function(t){y.a.post("".concat(g,"util/file/upload"),r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.path.path=e.data,ho.notify("","Файл загружен"),t()})).catch((function(t){k.notifyWithCustomMessage(t.response.data)}))}))},downloadFile:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,t.prev=1,t.next=4,y.a.post("".concat(g,"util/file/download"),a,{responseType:"blob"});case 4:r=t.sent,n=window.URL.createObjectURL(new Blob([r.data])),s=document.createElement("a"),s.href=n,s.setAttribute("download",a.filepath.name),document.body.appendChild(s),s.click(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),k.notify();case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));function e(e,a){return t.apply(this,arguments)}return e}(),deleteFile:function(t,e){return Object(mu["a"])(t),new Promise((function(t){y.a.post("".concat(g,"util/file/delete"),e).then((function(e){t(e.data)})).catch((function(){k.notify()}))}))},uploadParsedFile:function(t,e){t.state;var a=new FormData;return a.append("".concat(e.parseType),e.fileres.files[0]),a.append("layerId",e.layerId),new Promise((function(t){y.a.post("".concat(g).concat(e.parseType,"/parse"),a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t()})).catch((function(t){k.notifyWithCustomMessage(t.response.data)}))}))}},jd={state:Od,actions:Cd},Sd={history:{id:0,text:"",type:"user",create_user_id:0,update_user_id:null,create_user:null,update_user:null,created_at:"",updated_at:""},histories:[]},kd={setHistories:function(t,e){var a=t.state;a.histories=e.histories},addHistory:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,t.prev=1,t.next=4,y.a.post("".concat(g).concat(a.object,"/history/").concat(a.id),{text:r.history.text});case 4:n=t.sent,r.histories=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),removeHistory:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,t.prev=1,t.next=4,y.a.delete("".concat(g).concat(a.object,"/history/").concat(a.id,"/").concat(r.history.id));case 4:n=t.sent,!1===n.data?k.notifyWithCustomMessage("Невозможно удалить системную запись"):r.histories=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),setHistory:function(t,e){Object(mu["a"])(t),Sd.history=Object.assign({},Sd.history,e)},unsetHistory:function(){Sd.history={id:0,text:"",type:"user",create_user_id:0,update_user_id:null,create_user:null,update_user:null,created_at:"",updated_at:""}}},wd={state:Sd,actions:kd},xd={phone:{type:"Мобильный",value:""},phones:[]},Ed={setPhones:function(t,e){var a=t.state;if(e.phones){var r=JSON.parse(e.phones);a.phones="object"!==Object(ea["a"])(r)?[{type:"Мобильный",value:r}]:r}else a.phones=[]},addPhone:function(t,e){var a=t.state;(a.phone.value||e.phone)&&(a.phone.value=e.phone?e.phone:a.phone.value,a.phones.push(a.phone))},removePhone:function(t,e){var a=t.state;a.phones.splice(e.index,1)},unsetPhone:function(){xd.phone={type:xd.phone.type,value:""}}},Td={state:xd,actions:Ed},Pd={directory:{id:null,name:"",title:""},directories:[],entities:[]},Fd={getAllDirectories:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("".concat(g,"directory"));case 3:e=t.sent,Pd.directories=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),k.notify();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getAllDirectoryEntities:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(mu["a"])(e),t.prev=1,t.next=4,y.a.get("".concat(g,"directory/entities/").concat(a));case 4:r=t.sent,Pd.entities=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),k.notify();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e,a){return t.apply(this,arguments)}return e}()},$d={state:Pd,actions:Fd};r["default"].use(du["a"]);var Md=new du["a"].Store({state:{applicationName:""},mutations:{},actions:{},getters:{},modules:{user:bu,region:_u,administratorModule:ku,administratorLayer:Eu,administratorContractor:Fu,administratorContractorTos:Lu,administratorContractorTszh:Du,administratorPerson:zu,administratorUser:Bu,administratorConstructor:Hu,styleEditor:Zu,managerLayer:td,managerElement:rd,managerConstructor:od,includeList:md,sureModal:ud,map:_d,fileuploader:jd,leftMenu:hd,history:wd,phones:Td,directoryForConstructor:$d},plugins:[Object(pu["a"])({paths:["user.token"]})]}),Ld=a("a9b2"),Rd=a.n(Ld),Id=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{style:{"text-align":t.column.align}},[t.column.component?a(t.column.component,{tag:"component",attrs:{row:t.row,column:t.column}}):t.column.interpolate?a("span",{domProps:{innerHTML:t._s(t.content)}}):a("span",[t._v(t._s(t.content))])],1)},Dd=[],Nd={props:{column:[Object,Array],row:[Object,Array]},computed:{content:function(){return this.column.getRepresentation(this.row)}}},Ad=Nd,zd=Object(T["a"])(Ad,Id,Dd,!1,null,null,null),Gd=zd.exports,Ud=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{style:{"text-align":t.column.align}},[t.column.headerComponent?a(t.column.headerComponent,{tag:"component",attrs:{column:t.column}}):a("span",[t._v(t._s(t.column.label))]),t.column.sortable?a("span",{class:t.classes,on:{click:t.toggleSort}}):t._e()],1)},Bd=[],Vd={props:{model:{prop:"direction",event:"change"},column:[Object,Array],settings:Object,direction:{type:String,default:null}},computed:{canSort:function(){return this.column.sortable},is_sorted_ascending:function(){return"asc"===this.direction},is_sorted_descending:function(){return"desc"===this.direction},is_sorted:function(){return this.is_sorted_descending||this.is_sorted_ascending},classes:function(){var t=this.settings.get("table.sorting.classes"),e=t.canSort;return this.canSort?this.is_sorted?(this.is_sorted_ascending&&(e=e.concat(t.sortAsc)),this.is_sorted_descending&&(e=e.concat(t.sortDesc)),this.joinClasses(e)):(e=e.concat(t.sortNone),this.joinClasses(e)):""}},methods:{joinClasses:function(t){return this.unique(t).join(" ")},toggleSort:function(){this.direction&&null!==this.direction?"asc"===this.direction?this.$emit("change","desc",this.column):this.$emit("change",null,this.column):this.$emit("change","asc",this.column)},unique:function(t){var e={};return t.filter((function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)}))}}},qd=Vd,Wd=Object(T["a"])(qd,Ud,Bd,!1,null,null,null),Hd=Wd.exports,Jd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{class:t.li_classes},[a("a",{class:t.a_classes,attrs:{href:"javascript: void(0);"},on:{click:t.sendClick}},[t._t("default",[t._v(t._s(t.value))])],2)])},Yd=[],Kd=(a("c5f6"),a("6e87")),Zd=a.n(Kd),Xd=function(){function t(){Object(o["a"])(this,t),this.properties={table:{class:"table table-hover table-striped",row:{classes:[""]},sorting:{classes:{canSort:["sort"],sortNone:["glyphicon","glyphicon-sort"],sortAsc:["glyphicon","glyphicon-sort-by-alphabet"],sortDesc:["glyphicon","glyphicon-sort-by-alphabet-alt"]}}},pager:{classes:{pager:"pagination",li:"",a:"",selected:"active",disabled:"disabled"},icons:{previous:"&lt;",next:"&gt;"}}}}return Object(i["a"])(t,[{key:"get",value:function(t){return Zd.a.get(this.properties,t)}},{key:"set",value:function(t,e){return Zd.a.set(this.properties,t,e),this}},{key:"merge",value:function(t){return this.properties=this._mergeObjects(this.properties,t),this}},{key:"_mergeObjects",value:function(t,e){for(var a in e)null!==e[a]?"object"!==Object(ea["a"])(e[a])?t[a]=e[a]:t[a]=this._mergeObjects(t[a],e[a]):t[a]=e[a];return t}}]),t}(),Qd=Xd,tp={props:{disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},value:{type:Number,default:null}},computed:{li_classes:function(){var t=[];return this.settings.get("pager.classes.li")&&t.push(this.settings.get("pager.classes.li")),this.disabled&&t.push(this.settings.get("pager.classes.disabled")),this.selected&&t.push(this.settings.get("pager.classes.selected")),t.join(" ")},a_classes:function(){var t=[];return this.settings.get("pager.classes.a")&&t.push(this.settings.get("pager.classes.a")),t.join(" ")},settings:function(){return this.$parent.settings}},methods:{sendClick:function(){this.disabled||this.$emit("click",this.value)}}},ep=tp,ap=Object(T["a"])(ep,Jd,Yd,!1,null,null,null),rp=ap.exports,np=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{class:t.table_class},[a("thead",[a("tr",t._l(t.normalized_columns,(function(e,r){return a("datatable-header",{key:r,attrs:{column:e,settings:t.settings,direction:t.getSortDirectionForColumn(e)},on:{change:t.setSortDirectionForColumn}})})),1)]),a("tbody",[t._l(t.processed_rows,(function(e){return t._t("default",[a("tr",{class:t.getRowClasses(e)},t._l(t.normalized_columns,(function(t,r){return a("datatable-cell",{key:r,attrs:{column:t,row:e}})})),1)],{row:e,columns:t.normalized_columns})})),0==t.processed_rows.length?a("tr",[a("td",{attrs:{colspan:t.normalized_columns.length}},[t._t("no-results")],2)]):t._e()],2),t.$slots.footer||t.$scopedSlots.footer?a("tfoot",[t._t("footer",null,{rows:t.processed_rows})],2):t._e()])},sp=[],op=function(){function t(e){Object(o["a"])(this,t),this.setAlignment(e.align),this.label=e.label||"",this.field=e.field||null,this.representedAs=e.representedAs||null,this.component=e.component||null,this.interpolate=e.interpolate||!1,this.headerComponent=e.headerComponent||null,this.sortable=this.isSortable(e),this.filterable=this.isFilterable(e)}return Object(i["a"])(t,[{key:"setAlignment",value:function(t){return t&&"string"===typeof t?"center"===t.toLowerCase()?(this.align="center",this):"right"===t.toLowerCase()?(this.align="right",this):(this.align="left",this):(this.align="left",this)}},{key:"isFilterable",value:function(t){return!1!==t.filterable&&(!(!t.field&&!t.representedAs)&&!(this.component&&!this.representedAs&&!this.field))}},{key:"isSortable",value:function(t){return!1!==t.sortable&&(!(!t.field&&!t.representedAs)&&!(this.component&&!this.representedAs&&!this.field))}},{key:"getRepresentation",value:function(t){return this.representedAs&&"function"===typeof this.representedAs?this.representedAs(t):this.component&&this.filterable?this.plain_text_function(t,this):Zd.a.get(t,this.field)}},{key:"getValue",value:function(t){return this.getRepresentation(t)}},{key:"matches",value:function(t,e){var a=(""+this.getRepresentation(t)).toLowerCase();return-1!==a.indexOf(e.toLowerCase())}}]),t}(),ip=op,lp={props:{name:{type:String,default:"default"},columns:[Object,Array],data:[Object,Array,String,Function],filterBy:{type:String,default:null},rowClasses:{type:[String,Array,Object,Function],default:null}},data:function(){return{sort_by:null,sort_dir:null,total_rows:0,page:1,per_page:null,processed_rows:[]}},computed:{rows:function(){return this.data.slice(0)},settings:function(){return this.$options.settings},handler:function(){return this.$options.handler},normalized_columns:function(){return this.columns.map((function(t){return new ip(t)}))},table_class:function(){return this.settings.get("table.class")}},methods:{getSortDirectionForColumn:function(t){return this.sort_by!==t?null:this.sort_dir},setSortDirectionForColumn:function(t,e){this.sort_by=e,this.sort_dir=t},processRows:function(){if("function"!==typeof this.data){var t=this.handler.filterHandler(this.rows,this.filterBy,this.normalized_columns),e=this.handler.sortHandler(t,this.sort_by,this.sort_dir),a=this.handler.paginateHandler(e,this.per_page,this.page);this.handler.displayHandler(a,{filtered_data:t,sorted_data:e,paged_data:a},this.setRows,this.setTotalRowCount)}else{var r={filter:this.filterBy,sort_by:this.sort_by?this.sort_by.field:null,sort_dir:this.sort_dir,page_length:this.per_page,page_number:this.page};this.data(r,function(t,e){this.setRows(t),this.setTotalRowCount(e)}.bind(this))}},setRows:function(t){this.processed_rows=t},setTotalRowCount:function(t){this.total_rows=t},getRowClasses:function(t){var e=this.rowClasses;return null===e&&(e=this.settings.get("table.row.classes")),"function"===typeof e?e(t):e}},created:function(){r["default"].$datatables[this.name]=this,this.$root.$emit("table.ready",this.name),this.$watch(function(){return this.data}.bind(this),this.processRows,{deep:!0}),this.$watch("columns",this.processRows),this.$watch(function(){return this.filterBy+this.per_page+this.page+this.sort_by+this.sort_dir}.bind(this),this.processRows),this.processRows()},handler:null,settings:null},cp=lp,up=Object(T["a"])(cp,np,sp,!1,null,null,null),dp=up.exports,pp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("nav",["abbreviated"===t.type?a("ul",{class:t.pagination_class},[t.page-3>=1?a("datatable-button",{attrs:{value:1},on:{click:t.setPageNum}}):t._e(),t.page-4>=1?a("datatable-button",{attrs:{disabled:""}},[t._v("...")]):t._e(),t.page-2>=1?a("datatable-button",{attrs:{value:t.page-2},on:{click:t.setPageNum}}):t._e(),t.page-1>=1?a("datatable-button",{attrs:{value:t.page-1},on:{click:t.setPageNum}}):t._e(),a("datatable-button",{attrs:{value:t.page,selected:""}}),t.page+1<=t.total_pages?a("datatable-button",{attrs:{value:t.page+1},on:{click:t.setPageNum}}):t._e(),t.page+2<=t.total_pages?a("datatable-button",{attrs:{value:t.page+2},on:{click:t.setPageNum}}):t._e(),t.page+4<=t.total_pages?a("datatable-button",{attrs:{disabled:""}},[t._v("...")]):t._e(),t.page+3<=t.total_pages?a("datatable-button",{attrs:{value:t.total_pages},on:{click:t.setPageNum}}):t._e()],1):"long"===t.type?a("ul",{class:t.pagination_class},t._l(t.total_pages,(function(e){return a("datatable-button",{key:e,attrs:{value:e,selected:e===t.page},on:{click:t.setPageNum}})})),1):"short"===t.type?a("ul",{class:t.pagination_class},[a("datatable-button",{attrs:{disabled:t.page-1<1,value:t.page-1},on:{click:t.setPageNum}},[a("span",{domProps:{innerHTML:t._s(t.previous_icon)}})]),a("datatable-button",{attrs:{value:t.page,selected:""}}),a("datatable-button",{attrs:{disabled:t.page+1>t.total_pages,value:t.page+1},on:{click:t.setPageNum}},[a("span",{domProps:{innerHTML:t._s(t.next_icon)}})])],1):t._e()]):t._e()},mp=[],fp={model:{prop:"page",event:"change"},props:{table:{type:String,default:"default"},type:{type:String,default:"long"},perPage:{type:Number,default:10},page:{type:Number,default:1}},data:function(){return{table_instance:null}},computed:{show:function(){return this.table_instance&&this.total_rows>0},total_rows:function(){return this.table_instance?this.table_instance.total_rows:0},pagination_class:function(){return this.settings.get("pager.classes.pager")},disabled_class:function(){return this.settings.get("pager.classes.disabled")},previous_link_classes:function(){return this.page-1<1?this.settings.get("pager.classes.disabled"):""},next_link_classes:function(){return this.page+1>this.total_pages?this.settings.get("pager.classes.disabled"):""},total_pages:function(){return this.total_rows>0?Math.ceil(this.total_rows/this.perPage):0},previous_icon:function(){return this.settings.get("pager.icons.previous")},next_icon:function(){return this.settings.get("pager.icons.next")},settings:function(){return this.$options.settings}},methods:{setPageNum:function(t){this.table_instance.page=t,this.table_instance.per_page=this.perPage,this.$emit("change",t)},getClassForPage:function(t){return this.page==t?this.settings.get("pager.classes.selected"):""}},watch:{total_rows:function(){this.page>this.total_pages&&this.setPageNum(this.total_pages)},perPage:function(){var t=this.page;t>this.total_pages&&(t=this.total_pages),this.setPageNum(t)}},created:function(){if(r["default"].$datatables[this.table])return this.table_instance=r["default"].$datatables[this.table],void(this.table_instance.per_page=this.perPage);this.$root.$on("table.ready",function(t){t===this.table&&(this.table_instance=r["default"].$datatables[this.table],this.table_instance.per_page=this.perPage)}.bind(this))},settings:null},vp=fp,hp=Object(T["a"])(vp,pp,mp,!1,null,null,null),bp=hp.exports,yp=(a("55dd"),function(){function t(){Object(o["a"])(this,t),this.filterHandler=this.handleFilter,this.sortHandler=this.handleSort,this.paginateHandler=this.handlePaginate,this.displayHandler=this.handleDisplay}return Object(i["a"])(t,[{key:"handleFilter",value:function(t,e,a){if(!e)return t;var r=e.split(/\s/);return t.filter(function(t){for(var e in r)if(!this.rowMatches(t,r[e],a))return!1;return!0}.bind(this))}},{key:"rowMatches",value:function(t,e,a){for(var r in a)if(a[r].matches(t,e))return!0;return!1}},{key:"handleSort",value:function(t,e,a){return e&&null!==a?t.sort((function(t,r){var n=e.getRepresentation(t),s=e.getRepresentation(r);if(n==s)return 0;var o=n>s?1:-1;return"desc"===a&&(o*=-1),o})):t}},{key:"handlePaginate",value:function(t,e,a){if(!e)return t;a<1&&(a=1);var r=(a-1)*e,n=a*e;return t.slice(r,n)}},{key:"handleDisplay",value:function(t,e,a,r){a(t),r(e.filtered_data.length)}}]),t}()),gp=yp,_p=function(){function t(e){Object(o["a"])(this,t),this.id=e,this.handler=new gp,this.settings=new Qd}return Object(i["a"])(t,[{key:"getId",value:function(){return this.id}},{key:"setFilterHandler",value:function(t){return this.handler.filterHandler=t,this}},{key:"setSortHandler",value:function(t){return this.handler.sortHandler=t,this}},{key:"setPaginateHandler",value:function(t){return this.handler.paginateHandler=t,this}},{key:"setDisplayHandler",value:function(t){return this.handler.displayHandler=t,this}},{key:"setting",value:function(t,e){return void 0===e?this.settings.get(t):(this.settings.set(t,e),this)}},{key:"mergeSettings",value:function(t){return this.settings.merge(t),this}},{key:"getTableDefinition",value:function(){var t=this.clone(dp);return t.handler=this.handler,t.settings=this.settings,t.name=this.id,t}},{key:"getPagerDefinition",value:function(){var t=this.clone(bp);return t.settings=this.settings,t.name=this.id,t}},{key:"clone",value:function(t){var e;if(null===t||"object"!==Object(ea["a"])(t))return t;if(t instanceof Array){e=[];for(var a=0;a<t.length;a++)e[a]=this.clone(t[a]);return e}if(t instanceof Object){for(var r in e={},t)t.hasOwnProperty(r)&&(e[r]=this.clone(t[r]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")}}]),t}(),Op=_p,Cp=function(){function t(){Object(o["a"])(this,t),this.table_types=[],this.use_default_type=!0,this.default_table_settings=new Qd}return Object(i["a"])(t,[{key:"useDefaultType",value:function(t){return this.use_default_type=!!t,this}},{key:"registerTableType",value:function(t,e){var a=new Op(t);return this.table_types.push(a),e&&"function"===typeof e&&e(a),this}},{key:"install",value:function(t){for(var e in t.$datatables={},t.component("datatable-cell",Gd),t.component("datatable-header",Hd),t.component("datatable-button",rp),this.use_default_type&&this.registerTableType("datatable",function(t){t.mergeSettings(this.default_table_settings.properties)}.bind(this)),this.table_types)this.installTableType(this.table_types[e].getId(),this.table_types[e],t)}},{key:"installTableType",value:function(t,e,a){a.component(t,e.getTableDefinition()),a.component(t+"-pager",e.getPagerDefinition())}}]),t}(),jp=Cp,Sp=new jp,kp=a("b040"),wp=a.n(kp),xp=a("7bb1"),Ep=a("b451"),Tp=a.n(Ep),Pp=a("5f5b"),Fp=(a("f9e3"),a("2dd8"),a("011e")),$p=a.n(Fp),Mp=(a("c41f"),a("3a60")),Lp=a.n(Mp),Rp=a("4e06"),Ip=a("ee98"),Dp=a.n(Ip);r["default"].use(Rd.a),r["default"].use(Sp),r["default"].use(wp.a),r["default"].use(xp["b"],{fieldsBagName:"formFields"}),xp["a"].localize("ru",Tp.a),r["default"].use(Pp["a"]),r["default"].component("vue-scrollbar",$p.a),r["default"].use(Lp.a),r["default"].use(Rp["a"]);try{window.$=window.jQuery=a("1157"),a("4989")}catch(Ap){}r["default"].use(Dp.a);var Np=a("9483");Object(Np["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),r["default"].config.productionTip=!1,window.appVue=new r["default"]({router:su,store:Md,render:function(t){return t(uu)},created:function(){localStorage.getItem("vuex")&&j(localStorage.getItem("vuex"))}}).$mount("#app")},e332:function(t,e,a){}});
//# sourceMappingURL=app.75423955.js.map